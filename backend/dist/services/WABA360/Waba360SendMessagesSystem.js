'use strict';
const C = b, D = b;
(function (c, d) {
    const A = b, B = b, e = c();
    while (!![]) {
        try {
            const f = -parseInt(A(0x202)) / (-0xd0 * -0xd + -0x17c5 + 0xd36) * (-parseInt(B(0x1f4)) / (0x1f5a * 0x1 + 0xbd3 * -0x2 + -0x7b2)) + -parseInt(B(0x1bf)) / (0x49 * -0x2b + 0x1449 + -0x803) * (-parseInt(A(0x205)) / (0xab2 + -0x3d1 * 0x4 + 0x2 * 0x24b)) + -parseInt(A(0x1dd)) / (0x218 + -0x1 * -0x1042 + -0x1255) * (parseInt(B(0x1e0)) / (-0x3 * 0x65a + 0x22d5 + -0xfc1)) + -parseInt(A(0x1cd)) / (0x2238 + 0x1a9b + -0x3ccc) + -parseInt(A(0x1cc)) / (-0x3e * 0x3b + -0x5 * 0xb5 + -0x7 * -0x28d) * (parseInt(B(0x1a8)) / (-0x2494 + -0x17b7 + 0x3c54)) + parseInt(B(0x1f1)) / (0x274 * 0x4 + -0x43e + -0x588) * (parseInt(B(0x1b3)) / (0x880 + 0xd6 * 0x8 + -0xf25)) + parseInt(B(0x1b2)) / (0xf1 * -0x3 + -0x5 * -0x1e8 + -0x6a9) * (parseInt(A(0x1af)) / (-0xd6 + 0x1695 + -0x15b2));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, 0xfe696 + -0x308b7 + 0x8b7b));
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (-0x1e26 + -0x1 * -0x210b + -0x144);
        let h = e[f];
        return h;
    }, b(c, d);
}
var __importDefault = this && this[C(0x1eb) + D(0x1be)] || function (c) {
    const E = D;
    return c && c[E(0x1d3)] ? c : { 'default': c };
};
const m = {};
m[D(0x223)] = !![], Object[D(0x1cf) + C(0x1a2)](exports, C(0x1d3), m);
function a() {
    const J = [
        'cqOoj',
        'WEAZL',
        'body',
        'payload',
        'chat:ack',
        'date\x20ok',
        'SIrNP',
        'contact',
        'ldrMI',
        'sAsRead',
        'DZqJD',
        'document',
        'findAll',
        'value',
        'uljzP',
        'status',
        'tokenAPI',
        'type',
        'erty',
        'default',
        'JtuOD',
        'video',
        'VIPNR',
        'ls/Ticket',
        '333ExoGRC',
        'image',
        'XLSgv',
        'lZaXg',
        'dinyn',
        'includes',
        'Ycdwk',
        '130kkFeYH',
        'aJkri',
        'apiKey',
        '2925096mWDqPP',
        '3597pxXbIZ',
        'messages',
        'MYnUD',
        'ack',
        'createdAt',
        'dBztC',
        'audio',
        './SentMess',
        'jTlOG',
        '../../mode',
        'applicatio',
        'fault',
        '6OGjgJa',
        'sequelize',
        'QOnMw',
        'uNmjf',
        'zFVww',
        'age',
        'Message\x20Up',
        'tenantId',
        'DzKeW',
        'timestamp',
        'tgfJm',
        'fjMTZ',
        'fgeZg',
        '378008DkgoHk',
        '599662KlPHhQ',
        '../../util',
        'defineProp',
        'ls/Message',
        'faKbc',
        'Kvmey',
        '__esModule',
        'aLwIb',
        'update',
        'logger',
        'ers/socket',
        'Aaszu',
        'Emit',
        'sended',
        'klgeB',
        'VLajc',
        '5RtsMJt',
        'ryIff',
        'wAzNv',
        '9195972fsSLIs',
        'mediaType',
        'info',
        'ls/Whatsap',
        'FzMTT',
        'whatsapp',
        'messageId',
        'quotedMsg',
        'HUYIW',
        'mediaUrl',
        'YmbLZ',
        '__importDe',
        'wabaMediaI',
        'IkoXr',
        'individual',
        'text',
        'sQLvE',
        '13990VgroAN',
        'QfzZY',
        '../../help',
        '4sZCuaj',
        'ticket',
        'lte',
        'DBMxU',
        'pending',
        'CyxfM',
        'ers/SetTic',
        'dIExX',
        'yBqzy',
        'UXeQC',
        'xzGsB',
        'message',
        'YZhkm',
        'mediaName',
        '358347JcLopq',
        'sFqVp',
        's/logger',
        '1267612cDDZZL',
        'waba',
        'caption',
        'voice',
        'ketMessage',
        'where',
        'ufWWJ',
        'WCLBJ',
        '360',
        'chat',
        'iXPyP',
        'number',
        'RTcbW',
        'dataValues',
        'ASC',
        'gEwWS',
        'EhGJK'
    ];
    a = function () {
        return J;
    };
    return a();
}
const sequelize_1 = require(D(0x1c0)), SetTicketMessagesAsRead_1 = __importDefault(require(D(0x1f3) + D(0x1fa) + D(0x209) + C(0x21f))), socketEmit_1 = __importDefault(require(D(0x1f3) + C(0x1d7) + D(0x1d9))), Message_1 = __importDefault(require(C(0x1bc) + D(0x1d0))), Ticket_1 = __importDefault(require(C(0x1bc) + C(0x1a7))), Whatsapp_1 = __importDefault(require(C(0x1bc) + C(0x1e3) + 'p')), logger_1 = require(D(0x1ce) + D(0x204)), SentMessage_1 = __importDefault(require(D(0x1ba) + D(0x1c4))), buildWabaMessage360 = async (h, i) => {
        const F = C, G = C, j = {
                'aJkri': F(0x221),
                'DBMxU': F(0x1a9),
                'ryIff': G(0x1a5),
                'iXPyP': F(0x1b9),
                'QfzZY': function (l, o) {
                    return l(o);
                },
                'yBqzy': F(0x1ee),
                'dBztC': G(0x1ef),
                'VLajc': function (l, o) {
                    return l === o;
                },
                'Ycdwk': G(0x1bd) + 'n',
                'zFVww': function (l, o) {
                    return l === o;
                },
                'sFqVp': function (l, o) {
                    return l !== o;
                },
                'lZaXg': F(0x220),
                'gEwWS': G(0x1fd),
                'aLwIb': function (l, o) {
                    return l === o;
                },
                'YZhkm': function (l, o) {
                    return l !== o;
                },
                'MYnUD': G(0x1c1),
                'CyxfM': function (l, o) {
                    return l === o;
                },
                'HUYIW': G(0x1e4),
                'IkoXr': function (l, o) {
                    return l === o;
                },
                'xzGsB': F(0x208),
                'dIExX': function (l, o) {
                    return l === o;
                },
                'klgeB': F(0x1c7),
                'faKbc': F(0x1c9),
                'SIrNP': function (l, o) {
                    return l === o;
                },
                'XLSgv': F(0x20e),
                'WEAZL': F(0x216)
            };
        let k = {
            'timestamp': j[G(0x1f2)](String, h[G(0x1c8)]),
            'recipient_type': j[G(0x1fc)],
            'to': i,
            'type': j[F(0x1b8)]
        };
        if (j[G(0x1dc)](h[F(0x1e1)], j[F(0x1ae)]) || j[F(0x1c3)](h[G(0x1e1)], j[G(0x1b0)])) {
            if (j[G(0x203)](j[F(0x1ab)], j[G(0x214)])) {
                const l = {};
                l['id'] = h[G(0x1ec) + 'd'], l[F(0x207)] = h[G(0x218)] || h[F(0x201)] || '' || '', k = {
                    ...k,
                    'type': j[G(0x1b0)],
                    'document': l
                };
            } else {
                const p = {};
                p['id'] = j[G(0x1ec) + 'd'], p[G(0x207)] = k[G(0x218)] || l[F(0x201)] || '' || '';
                const q = { ...i };
                q[F(0x1a1)] = j[F(0x1b0)], q[G(0x221)] = p, h = q;
            }
        }
        if (j[G(0x1d4)](h[G(0x1e1)], j[F(0x1f7)])) {
            if (j[G(0x200)](j[F(0x1b5)], j[F(0x1b5)])) {
                const q = {};
                q['id'] = j[F(0x1ec) + 'd'], q[F(0x207)] = k[G(0x218)] || l[F(0x201)] || '';
                const r = { ...i };
                r[G(0x1a1)] = j[G(0x1f7)], r[F(0x1a9)] = q, h = r;
            } else {
                const q = {};
                q['id'] = h[G(0x1ec) + 'd'], q[G(0x207)] = h[G(0x218)] || h[F(0x201)] || '', k = {
                    ...k,
                    'type': j[F(0x1f7)],
                    'image': q
                };
            }
        }
        if (j[F(0x1f9)](h[G(0x1e1)], j[G(0x1de)])) {
            if (j[G(0x1f9)](j[F(0x1e8)], j[G(0x1e8)])) {
                const r = {};
                r['id'] = h[F(0x1ec) + 'd'], r[G(0x207)] = h[F(0x218)] || h[G(0x201)] || '', k = {
                    ...k,
                    'type': j[G(0x1de)],
                    'video': r
                };
            } else {
                const t = {};
                t['id'] = j[G(0x1ec) + 'd'], t[F(0x207)] = k[F(0x218)] || l[F(0x201)] || '';
                const u = { ...i };
                u[F(0x1a1)] = j[F(0x1de)], u[F(0x1a5)] = t, h = u;
            }
        }
        if (j[G(0x1ed)](h[G(0x1e1)], j[F(0x20f)]) || j[F(0x1f9)](h[F(0x1e1)], j[G(0x1fe)])) {
            if (j[G(0x1fb)](j[F(0x1db)], j[F(0x1d1)])) {
                const u = {};
                u['id'] = j[F(0x1ec) + 'd'], u[G(0x207)] = k[G(0x218)] || l[G(0x201)] || '';
                const v = { ...i };
                v[G(0x1a1)] = j[G(0x20f)], v[G(0x1b9)] = u, h = v;
            } else {
                const u = {};
                u['id'] = h[F(0x1ec) + 'd'], u[F(0x207)] = h[G(0x218)] || h[G(0x201)] || '', k = {
                    ...k,
                    'type': j[F(0x20f)],
                    'audio': u
                };
            }
        }
        if (j[F(0x21c)](h[G(0x1e1)], j[G(0x1aa)]) || j[G(0x1d4)](h[G(0x1e1)], j[G(0x1b8)])) {
            if (j[G(0x203)](j[G(0x217)], j[G(0x217)])) {
                const w = {};
                w[G(0x218)] = x[F(0x218)];
                const x = { ...w };
                x[G(0x1ef)] = w, f = x;
            } else {
                const w = {};
                w[G(0x218)] = h[F(0x218)], k = {
                    ...k,
                    'text': w
                };
            }
        }
        return k;
    }, n = { [sequelize_1['Op']['is']]: null }, where = {
        'fromMe': !![],
        'messageId': n,
        'status': C(0x1f8),
        [sequelize_1['Op']['or']]: [
            { 'scheduleDate': { [sequelize_1['Op'][C(0x1f6)]]: new Date() } },
            { 'scheduleDate': { [sequelize_1['Op']['is']]: null } }
        ]
    }, Waba360SendMessagesSystem = async i => {
        const H = C, I = C, j = {
                'ldrMI': H(0x21d),
                'uljzP': H(0x1f5),
                'uNmjf': H(0x206),
                'VIPNR': I(0x1e5),
                'ufWWJ': H(0x20d),
                'dinyn': I(0x1e7),
                'Aaszu': H(0x1b7),
                'fgeZg': I(0x213),
                'WCLBJ': function (l, o) {
                    return l !== o;
                },
                'jTlOG': H(0x1f0),
                'wAzNv': function (l, o) {
                    return l(o);
                },
                'JtuOD': I(0x1ef),
                'YmbLZ': H(0x20e),
                'fjMTZ': function (l, o, p) {
                    return l(o, p);
                },
                'EhGJK': H(0x1da),
                'RTcbW': H(0x21a),
                'Kvmey': H(0x1c5) + I(0x21b)
            }, k = await Message_1[I(0x1a3)][H(0x222)]({
                'where': where,
                'include': [
                    j[H(0x21e)],
                    {
                        'model': Ticket_1[I(0x1a3)],
                        'as': j[H(0x224)],
                        'where': {
                            'tenantId': i[H(0x1c6)],
                            'channel': j[I(0x1c2)]
                        },
                        'include': [
                            j[I(0x21e)],
                            {
                                'model': Whatsapp_1[I(0x1a3)],
                                'as': j[I(0x1a6)],
                                'where': {
                                    'id': i['id'],
                                    'type': j[H(0x1c2)],
                                    'wabaBSP': j[I(0x20b)]
                                }
                            }
                        ]
                    },
                    {
                        'model': Message_1[I(0x1a3)],
                        'as': j[I(0x1ac)],
                        'include': [j[I(0x21e)]]
                    }
                ],
                'order': [[
                        j[H(0x1d8)],
                        j[I(0x1cb)]
                    ]]
            });
        for (const l of k) {
            if (j[H(0x20c)](j[I(0x1bb)], j[H(0x1bb)])) {
                const p = {};
                return p[H(0x1a3)] = j, g && h[H(0x1d3)] ? i : p;
            } else {
                const {ticket: p} = l, q = j[I(0x1df)](String, p[I(0x21d)][I(0x210)]);
                if (![
                        j[I(0x1a4)],
                        j[I(0x1ea)]
                    ][I(0x1ad)](l[H(0x1e1)]) && l[I(0x1e9)] && !l[H(0x1ec) + 'd']) {
                }
                const r = await j[H(0x1ca)](buildWabaMessage360, l, q), s = {};
                s[H(0x1ff)] = r, s[I(0x1b1)] = i[I(0x226)];
                const t = await (-0xe92 + 0x1b13 * 0x1 + -0xc81, SentMessage_1[I(0x1a3)])(s), u = { ...l };
                u[H(0x1e6)] = t[I(0x1b4)][-0x1 * -0x1fb5 + 0x1f18 + -0x3ecd]['id'], u[I(0x225)] = j[H(0x215)], u[I(0x1b6)] = 0x2;
                const v = u, w = { ...v }, x = {};
                x['id'] = l['id'];
                const y = {};
                y[I(0x20a)] = x, await Message_1[I(0x1a3)][H(0x1d5)](w, y);
                const z = {};
                z[I(0x1c6)] = p[H(0x1c6)], z[H(0x1a1)] = j[H(0x211)], z[I(0x219)] = { ...v[I(0x212)] }, z[I(0x219)][H(0x1e9)] = l[I(0x1e9)], z[I(0x219)][I(0x1e6)] = v[H(0x1e6)], z[I(0x219)][I(0x225)] = j[H(0x215)], z[I(0x219)][I(0x1b6)] = 0x2, (0x1566 + 0x2572 * -0x1 + -0x806 * -0x2, socketEmit_1[H(0x1a3)])(z), logger_1[H(0x1d6)][I(0x1e2)](j[H(0x1d2)]), await (-0x3 * -0x116 + 0x13 * 0x166 + 0x14c * -0x17, SetTicketMessagesAsRead_1[I(0x1a3)])(p);
            }
        }
    };
exports[D(0x1a3)] = Waba360SendMessagesSystem;