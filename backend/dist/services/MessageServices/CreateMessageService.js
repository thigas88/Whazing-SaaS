'use strict';
const a9 = b, aa = b;
(function (c, d) {
    const a7 = b, a8 = b, e = c();
    while (!![]) {
        try {
            const f = parseInt(a7(0x1d6)) / (0x113e * 0x2 + -0x1 * 0x141b + 0x20 * -0x73) + parseInt(a7(0x18e)) / (-0x319 + -0x6d8 + 0x9f3) * (parseInt(a8(0x187)) / (-0x3 * -0xcc7 + -0x262d + 0x1 * -0x25)) + -parseInt(a7(0x182)) / (-0x976 + 0x1f75 + -0x11 * 0x14b) * (parseInt(a7(0x1d3)) / (0xc * 0x1ee + 0x1ac5 + -0x31e8)) + parseInt(a7(0x1dc)) / (0x1 * 0x88a + -0xd76 * -0x1 + -0x15fa) * (-parseInt(a8(0x1a7)) / (-0xd * -0x1f + 0x6f * 0x3c + -0x1b90)) + parseInt(a8(0x1d9)) / (-0x33f + 0x801 + -0x4ba) + parseInt(a8(0x1c3)) / (0x1786 * -0x1 + 0x1 * 0x1bcb + -0x43c) * (-parseInt(a8(0x1e8)) / (-0x1 * 0x262d + -0x2 * -0xd32 + -0x3 * -0x3f1)) + -parseInt(a8(0x1b4)) / (-0x30f + -0x1b * -0x2 + 0x2e4 * 0x1);
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, -0x20b * 0xa3d + 0x37e81 * -0x5 + -0x80 * -0x64b3));
var __importDefault = this && this[a9(0x1e4) + aa(0x1ab)] || function (c) {
    const ab = aa;
    return c && c[ab(0x194)] ? c : { 'default': c };
};
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (0x22da + 0x1 * -0x334 + -0x1e27);
        let h = e[f];
        return h;
    }, b(c, d);
}
function a() {
    const ag = [
        'ers/socket',
        'YegSI',
        'where',
        'model',
        'EHWLS',
        'LbttH',
        'wcWBv',
        'HMjrI',
        'siaaD',
        'editedMess',
        'MAgDm',
        '2608879Vadtep',
        'kXAwA',
        'ssage',
        'edited',
        'fault',
        'LfoZZ',
        'NG_MESSAGE',
        'defineProp',
        'JRmNP',
        'chat:updat',
        'qONxU',
        'ls/Contact',
        'type',
        '2860099KRIsIq',
        'OqXJD',
        'riginal\x20nÃ£',
        'HShEO',
        'Frduj',
        'lUMeL',
        'Erro\x20ao\x20ex',
        'ls/Message',
        'IMdVF',
        'uzIGz',
        'rted',
        'body',
        'protocolMe',
        'xqSzH',
        'messageId',
        '2010348WtgkER',
        'ls/Ticket',
        'EWAsT',
        'PUyGE',
        'quotedMsg',
        'nOyGy',
        'age',
        'TEAvU',
        'Mensagem\x20o',
        'zjPVH',
        'ticketImpo',
        'tenantId',
        'SgrqN',
        'o\x20encontra',
        'key',
        'azNSN',
        '145ugZGoJ',
        'PoMfK',
        'contactId',
        '1046090lgfoud',
        'rJlnI',
        'IXacU',
        '627096JTELTO',
        '../../help',
        'dsjHX',
        '6ppAdiT',
        'findOne',
        'VBDDj',
        'ataJson',
        'ageId\x20do\x20d',
        'zKVTm',
        'create',
        'wWgcQ',
        '__importDe',
        'dataJson',
        'vQgzL',
        'include',
        '30rGZztC',
        'chat:creat',
        'DRkwC',
        'fromMe',
        'Emit',
        'Zwcsc',
        '80784swDgvf',
        'value',
        'ticket',
        'message',
        'tcAfE',
        '4643979fpiaFt',
        'XWYcX',
        'Jhilx',
        'erty',
        'trair\x20mess',
        'update',
        'XjPth',
        '2cZsDVI',
        'Qfydp',
        'yQzJU',
        '../../mode',
        'DneLJ',
        'coDkp',
        '__esModule',
        'contact',
        'ERR_CREATI',
        'mediaType',
        'default',
        'payload',
        'XkElZ',
        'parse'
    ];
    a = function () {
        return ag;
    };
    return a();
}
const o = {};
o[aa(0x183)] = !![], Object[a9(0x1ae) + a9(0x18a)](exports, a9(0x194), o);
const Message_1 = __importDefault(require(aa(0x191) + a9(0x1bb))), Ticket_1 = __importDefault(require(a9(0x191) + aa(0x1c4))), socketEmit_1 = __importDefault(require(a9(0x1da) + a9(0x19c) + a9(0x180))), Contact_1 = __importDefault(require(a9(0x191) + aa(0x1b2)));
function extractMessageId(d) {
    const ac = a9, ad = aa, e = {};
    e[ac(0x1ac)] = ad(0x184), e[ac(0x1b9)] = ad(0x195), e[ac(0x1ca)] = ac(0x1c7), e[ac(0x1a2)] = ac(0x1cb) + ac(0x1b6) + ad(0x1d0) + 'da', e[ac(0x1b5)] = function (g, h) {
        return g !== h;
    }, e[ad(0x1c8)] = ac(0x186), e[ad(0x193)] = function (g, h) {
        return g === h;
    }, e[ad(0x18f)] = ac(0x1e3), e[ac(0x1cc)] = ad(0x181), e[ad(0x1c1)] = ad(0x1ba) + ac(0x18b) + ad(0x1e0) + ad(0x1df);
    const f = e;
    try {
        if (f[ad(0x1b5)](f[ac(0x1c8)], f[ad(0x1c8)])) {
            const h = {};
            h[ac(0x1ce)] = i;
            const i = {};
            i[ac(0x19f)] = h[ad(0x198)], i['as'] = f[ad(0x1ac)], i[ad(0x19e)] = h, i[ad(0x1e7)] = [f[ac(0x1b9)]];
            const j = {};
            j[ad(0x19f)] = j[ac(0x198)], j['as'] = f[ad(0x1ca)], j[ad(0x1e7)] = [f[ad(0x1b9)]], g = [
                i,
                j
            ];
        } else {
            const h = JSON[ac(0x19b)](d);
            return h[ad(0x185)][ad(0x1a5) + ac(0x1c9)][ad(0x185)][ac(0x1c0) + ad(0x1a9)][ac(0x1d1)]['id'];
        }
    } catch (i) {
        if (f[ac(0x193)](f[ad(0x18f)], f[ac(0x1cc)]))
            throw new d(f[ad(0x1a2)]);
        else
            throw new Error(f[ad(0x1c1)]);
    }
}
const CreateMessageService = async ({
    messageData: v,
    tenantId: w
}) => {
    const ae = a9, af = a9, x = {
            'dsjHX': ae(0x1ba) + af(0x18b) + ae(0x1e0) + ae(0x1df),
            'kXAwA': ae(0x196) + af(0x1ad),
            'DRkwC': ae(0x1e9) + 'e',
            'XkElZ': ae(0x184),
            'LbttH': ae(0x195),
            'Frduj': af(0x1c7),
            'IMdVF': function (F, G) {
                return F === G;
            },
            'siaaD': af(0x1a5) + af(0x1c9),
            'yQzJU': function (F, G) {
                return F !== G;
            },
            'vQgzL': af(0x1d2),
            'rJlnI': function (F, G) {
                return F(G);
            },
            'PUyGE': af(0x1a3),
            'zKVTm': ae(0x1b0) + 'e',
            'JRmNP': af(0x1d8),
            'uzIGz': af(0x1cb) + ae(0x1b6) + af(0x1d0) + 'da',
            'YegSI': ae(0x1a6),
            'EWAsT': ae(0x1d4),
            'DneLJ': af(0x18d),
            'Jhilx': af(0x1a0),
            'VBDDj': af(0x188),
            'SgrqN': function (F, G) {
                return F === G;
            },
            'qONxU': ae(0x1b7)
        };
    if (x[af(0x1bc)](v[af(0x197)], x[ae(0x1a4)]) && v[af(0x1e5)]) {
        if (x[af(0x190)](x[af(0x1e6)], x[af(0x1e6)]))
            try {
                const G = i[af(0x19b)](j);
                return G[ae(0x185)][ae(0x1a5) + af(0x1c9)][af(0x185)][af(0x1c0) + ae(0x1a9)][ae(0x1d1)]['id'];
            } catch (H) {
                throw new l(x[af(0x1db)]);
            }
        else {
            const G = v[af(0x1e5)], H = x[ae(0x1d7)](extractMessageId, G), I = {};
            I[af(0x1c2)] = H, I[af(0x1ce)] = w;
            const J = {};
            J[af(0x19e)] = I;
            const K = await Message_1[af(0x198)][af(0x1dd)](J);
            if (K) {
                if (x[ae(0x1bc)](x[ae(0x1c6)], x[ae(0x1c6)])) {
                    const L = {};
                    L[ae(0x1aa)] = v[ae(0x1bf)], await K[ae(0x18c)](L);
                    const M = {};
                    return M[af(0x1ce)] = w, M[af(0x1b3)] = x[af(0x1e1)], M[ae(0x199)] = K, (0x149d + -0x9d * -0x35 + -0x1a * 0x20b, socketEmit_1[af(0x198)])(M), K;
                } else {
                    const O = {};
                    return O[af(0x198)] = j, O && z[af(0x194)] ? i : O;
                }
            } else {
                if (x[ae(0x1bc)](x[af(0x1af)], x[ae(0x1af)]))
                    throw new Error(x[af(0x1bd)]);
                else
                    throw new J(x[af(0x1a8)]);
            }
        }
    }
    const y = {};
    y[af(0x1c2)] = v[ae(0x1c2)], y[af(0x1ce)] = w;
    const z = {};
    z[ae(0x19e)] = y;
    let A = await Message_1[ae(0x198)][af(0x1dd)](z);
    if (!A) {
        if (x[af(0x1bc)](x[af(0x19d)], x[ae(0x1c5)])) {
            const Q = e[ae(0x19b)](f);
            return Q[ae(0x185)][af(0x1a5) + af(0x1c9)][af(0x185)][ae(0x1c0) + ae(0x1a9)][ae(0x1d1)]['id'];
        } else {
            const Q = { ...v };
            Q[ae(0x1ce)] = w, A = await Message_1[ae(0x198)][af(0x1e2)](Q);
        }
    } else {
        if (x[af(0x190)](x[af(0x192)], x[ae(0x192)]))
            throw new d(x[ae(0x1db)]);
        else
            await A[ae(0x18c)](v);
    }
    let B;
    if (!v[af(0x17f)]) {
        if (x[af(0x1bc)](x[ae(0x189)], x[ae(0x1de)])) {
            const T = {};
            T[af(0x1ce)] = y, T[ae(0x1b3)] = x[af(0x1ea)], T[ae(0x199)] = z, (-0x243 * -0x5 + 0x1 * 0x1bc5 + -0x2714, f[ae(0x198)])(T);
        } else {
            const T = {};
            T[af(0x1ce)] = w;
            const U = {};
            U[af(0x19f)] = Ticket_1[ae(0x198)], U['as'] = x[ae(0x19a)], U[af(0x19e)] = T, U[af(0x1e7)] = [x[ae(0x1a1)]];
            const V = {};
            V[ae(0x19f)] = Message_1[af(0x198)], V['as'] = x[ae(0x1b8)], V[ae(0x1e7)] = [x[af(0x1a1)]];
            const W = {};
            W['id'] = v[af(0x1d5)];
            const X = {};
            X[ae(0x19f)] = Contact_1[af(0x198)], X['as'] = x[af(0x1a1)], X[af(0x19e)] = W, B = [
                U,
                V,
                X
            ];
        }
    } else {
        if (x[ae(0x1cf)](x[af(0x1b1)], x[af(0x1b1)])) {
            const Y = {};
            Y[af(0x1ce)] = w;
            const Z = {};
            Z[ae(0x19f)] = Ticket_1[ae(0x198)], Z['as'] = x[af(0x19a)], Z[af(0x19e)] = Y, Z[af(0x1e7)] = [x[af(0x1a1)]];
            const a0 = {};
            a0[ae(0x19f)] = Message_1[ae(0x198)], a0['as'] = x[ae(0x1b8)], a0[ae(0x1e7)] = [x[ae(0x1a1)]], B = [
                Z,
                a0
            ];
        } else {
            const a2 = {};
            a2[ae(0x1ce)] = k;
            const a3 = {};
            a3[af(0x19f)] = j[af(0x198)], a3['as'] = x[ae(0x19a)], a3[ae(0x19e)] = a2, a3[af(0x1e7)] = [x[ae(0x1a1)]];
            const a4 = {};
            a4[ae(0x19f)] = l[ae(0x198)], a4['as'] = x[af(0x1b8)], a4[ae(0x1e7)] = [x[af(0x1a1)]];
            const a5 = {};
            a5['id'] = n[af(0x1d5)];
            const a6 = {};
            a6[ae(0x19f)] = m[af(0x198)], a6['as'] = x[af(0x1a1)], a6[af(0x19e)] = a5, i = [
                a3,
                a4,
                a6
            ];
        }
    }
    const C = {};
    C[af(0x1c2)] = v[ae(0x1c2)], C[ae(0x1ce)] = w;
    const D = {};
    D[ae(0x19e)] = C, D[ae(0x1e7)] = B;
    const E = await Message_1[af(0x198)][af(0x1dd)](D);
    if (!E)
        throw new Error(x[ae(0x1a8)]);
    if (!v?.[ae(0x1cd) + af(0x1be)]) {
        const a2 = {};
        a2[af(0x1ce)] = w, a2[ae(0x1b3)] = x[af(0x1ea)], a2[ae(0x199)] = E, (-0x1c4 + 0x1f32 + -0x1 * 0x1d6e, socketEmit_1[ae(0x198)])(a2);
    }
    return A;
};
exports[a9(0x198)] = CreateMessageService;