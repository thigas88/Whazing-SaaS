'use strict';
const aW = b, aX = b;
(function (c, d) {
    const aU = b, aV = b, e = c();
    while (!![]) {
        try {
            const f = -parseInt(aU(0x1a5)) / (-0x12 * 0x216 + 0x1a17 * 0x1 + -0x12 * -0xa3) + -parseInt(aU(0x17d)) / (-0xbb4 + -0x2 * -0x11be + -0x2 * 0xbe3) + parseInt(aU(0x1a3)) / (0x2af + 0x708 + -0x9b4) + parseInt(aU(0x198)) / (-0x3b4 + -0x1180 + 0x1538) * (parseInt(aU(0x1aa)) / (0x1 * -0x1124 + 0x455 + 0x1 * 0xcd4)) + -parseInt(aV(0x1ab)) / (0x1954 + 0x1e0c + -0xda * 0x41) + parseInt(aV(0x181)) / (-0xf74 + 0xd3a + 0x1 * 0x241) + -parseInt(aV(0x144)) / (-0x1d92 + -0x1249 * -0x1 + 0xb51 * 0x1) * (-parseInt(aV(0x176)) / (-0xfe2 + 0x35 * 0x6 + 0xdd * 0x11));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, -0x20c3b * 0x5 + -0x5 * 0x22a8c + -0x6 * -0x591b6));
var __importDefault = this && this[aW(0x18b) + aX(0x17f)] || function (c) {
    const aY = aX;
    return c && c[aY(0x12e)] ? c : { 'default': c };
};
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (-0xa7 * 0x37 + 0x1 * 0x239f + -0x19 * -0xe);
        let h = e[f];
        return h;
    }, b(c, d);
}
function a() {
    const b1 = [
        'ls/UsersQu',
        'ymXSj',
        'required',
        'YVGTU',
        'BUGTb',
        'Url',
        'sequelize',
        'userId',
        'YlVsW',
        'WSIbi',
        'DvQRG',
        'profilePic',
        'whatsapp',
        'isDeleted',
        'IBKPc',
        'open',
        'QMVfo',
        'TOxcf',
        'value',
        'hZiCL',
        'ZjwhM',
        'ages',
        'user',
        'length',
        '3957966PMqHhK',
        'GLDsz',
        'umber$',
        'ls/User',
        'DdFeQ',
        'name',
        'TnKnV',
        '3032344nBlqUg',
        'ntBvo',
        'fault',
        'fSmmQ',
        '11084556UGZmbS',
        'admin',
        'JEKae',
        'filter',
        'jAgMU',
        'ignedTicke',
        'VPKoZ',
        '$messages.',
        'mwSJC',
        'body$',
        '__importDe',
        'wdkLF',
        'wyfKw',
        'count',
        'true',
        'fgqyL',
        'findAndCou',
        'toLowerCas',
        'tickets',
        'cRBiV',
        'default',
        'ntAll',
        'hVkHA',
        '643228ucgoKx',
        'pOPfu',
        'queueId',
        'llLxh',
        'ayffK',
        'XBekv',
        'trim',
        'ls/Ticket',
        'vpivg',
        'profile',
        'TUS_SELECT',
        '100614YPtqog',
        'body',
        '1387044QLkwjw',
        'where',
        'order',
        'distinct',
        'uUrZM',
        '40HjcjTu',
        '8340594vIXwCW',
        'DXccw',
        'pending',
        'ls/Queue',
        'itOpen',
        'HZeHL',
        'NMkzY',
        'DESC',
        'sService',
        'urqAG',
        'STZWm',
        'WtkRt',
        'rHKct',
        '../../erro',
        'unreadMess',
        'limit',
        'attributes',
        'defineProp',
        'ZfwcM',
        'KXLVf',
        'iRiOJ',
        'find',
        'iaspo',
        'BEgXF',
        'color',
        'ypxjx',
        'closed',
        'BgZoy',
        'nlsBt',
        'NZOWk',
        'iLike',
        'ERR_NO_STA',
        'isActive',
        'istSetting',
        'map',
        'updatedAt',
        'NQcyF',
        'jiBqY',
        '__esModule',
        'ls/Message',
        '$contact.n',
        'jYHfs',
        'LAynu',
        'model',
        'status',
        'eues',
        'rs/AppErro',
        'TicketsLim',
        '../Setting',
        'contact',
        'luGbB',
        'CUvYz',
        'loCxl',
        'messages',
        'ls/Contact',
        'Services/L',
        'number',
        'offset',
        'tenantId',
        'anEts',
        '40Lhgnmm',
        'enabled',
        'wuOMA',
        'itClosed',
        'BinCn',
        'ame$',
        'push',
        'ls/Whatsap',
        'sBIAe',
        'findByPk',
        'hasMore',
        'UenHu',
        'queue',
        'include',
        'pGDEu',
        'NotViewAss',
        'XpDkk',
        'duplicatin',
        'RyAyl',
        'findAll',
        'Jefcd',
        '../../mode',
        'key',
        'and',
        'includes',
        'erty'
    ];
    a = function () {
        return b1;
    };
    return a();
}
const y = {};
y[aW(0x170)] = !![], Object[aX(0x1bc) + aX(0x15d)](exports, aW(0x12e), y);
const sequelize_1 = require(aX(0x164)), Ticket_1 = __importDefault(require(aW(0x159) + aX(0x19f))), User_1 = __importDefault(require(aX(0x159) + aX(0x179))), Queue_1 = __importDefault(require(aW(0x159) + aX(0x1ae))), Whatsapp_1 = __importDefault(require(aX(0x159) + aX(0x14b) + 'p')), Contact_1 = __importDefault(require(aX(0x159) + aW(0x13e))), UsersQueues_1 = __importDefault(require(aW(0x159) + aX(0x15e) + aX(0x135))), ListSettingsService_1 = __importDefault(require(aW(0x138) + aW(0x13f) + aX(0x129) + aX(0x1b3))), AppError_1 = __importDefault(require(aW(0x1b8) + aX(0x136) + 'r')), Message_1 = __importDefault(require(aX(0x159) + aX(0x12f))), ListTicketsService = async ({
        searchParam: searchParam = '',
        pageNumber: pageNumber = '1',
        status: I,
        date: J,
        showAll: K,
        userId: L,
        withUnreadMessages: M,
        queuesIds: N,
        isNotAssignedUser: O,
        includeNotQueueDefined: P,
        tenantId: Q,
        profile: R
    }) => {
        const aZ = aW, b0 = aX, S = {
                'NQcyF': aZ(0x13d),
                'LAynu': b0(0x1a4),
                'IBKPc': b0(0x127) + b0(0x1a2) + 'ED',
                'fgqyL': b0(0x16d),
                'jYHfs': aZ(0x1ad),
                'TOxcf': aZ(0x122),
                'DdFeQ': function (aC, aD) {
                    return aC === aD;
                },
                'anEts': aZ(0x18f),
                'ymXSj': function (aC, aD) {
                    return aC === aD;
                },
                'QMVfo': b0(0x182),
                'CUvYz': function (aC, aD) {
                    return aC === aD;
                },
                'VPKoZ': function (aC, aD) {
                    return aC === aD;
                },
                'BUGTb': aZ(0x145),
                'wyfKw': function (aC, aD) {
                    return aC && aD;
                },
                'hZiCL': function (aC, aD) {
                    return aC === aD;
                },
                'WtkRt': aZ(0x18c),
                'ZfwcM': aZ(0x124),
                'Jefcd': function (aC, aD) {
                    return aC === aD;
                },
                'DXccw': function (aC, aD) {
                    return aC !== aD;
                },
                'fSmmQ': b0(0x1b1),
                'wuOMA': aZ(0x150),
                'XBekv': aZ(0x197),
                'pOPfu': function (aC, aD) {
                    return aC > aD;
                },
                'XpDkk': function (aC, aD) {
                    return aC === aD;
                },
                'BgZoy': aZ(0x12d),
                'luGbB': b0(0x189),
                'UenHu': function (aC, aD) {
                    return aC === aD;
                },
                'cRBiV': b0(0x166),
                'ZjwhM': b0(0x1be),
                'DvQRG': function (aC, aD) {
                    return aC(aD);
                },
                'ayffK': function (aC, aD) {
                    return aC(aD);
                },
                'BEgXF': function (aC, aD) {
                    return aC(aD);
                },
                'iRiOJ': function (aC, aD) {
                    return aC(aD);
                },
                'rHKct': function (aC, aD) {
                    return aC(aD);
                },
                'pGDEu': function (aC, aD) {
                    return aC(aD);
                },
                'NZOWk': function (aC, aD) {
                    return aC * aD;
                },
                'sBIAe': function (aC, aD) {
                    return aC - aD;
                },
                'llLxh': function (aC, aD, aE) {
                    return aC(aD, aE);
                },
                'JEKae': function (aC, aD, aE) {
                    return aC(aD, aE);
                },
                'BinCn': function (aC, aD) {
                    return aC === aD;
                },
                'ypxjx': aZ(0x1a9),
                'urqAG': function (aC, aD) {
                    return aC === aD;
                },
                'RyAyl': aZ(0x16a),
                'GLDsz': b0(0x17b),
                'HZeHL': aZ(0x16b),
                'iaspo': b0(0x120),
                'loCxl': aZ(0x139),
                'ntBvo': aZ(0x169) + aZ(0x163),
                'STZWm': aZ(0x140),
                'jAgMU': aZ(0x174),
                'TnKnV': aZ(0x12b),
                'WSIbi': aZ(0x1b2),
                'YVGTU': function (aC, aD) {
                    return aC + aD;
                },
                'vpivg': function (aC, aD) {
                    return aC + aD;
                }
            }, T = S[b0(0x17a)](K, S[b0(0x143)]) && S[aZ(0x15f)](R, S[aZ(0x16e)]), U = S[b0(0x13b)](M, S[aZ(0x143)]) ? 'S' : 'N', V = S[b0(0x13b)](O, S[b0(0x143)]) ? 'S' : 'N', W = await (-0x315 * -0x7 + -0x259d + 0x2 * 0x805, ListSettingsService_1[aZ(0x195)])(Q), X = S[b0(0x187)](W?.[b0(0x11d)](aC => aC[b0(0x15a)] === aZ(0x153) + aZ(0x186) + 'ts')?.[aZ(0x170)], S[b0(0x162)]) ? 'S' : 'N';
        if (S[aZ(0x18d)](!I, !T)) {
            if (S[b0(0x171)](S[aZ(0x1b6)], S[aZ(0x1b6)]))
                throw new AppError_1[(b0(0x195))](S[aZ(0x16c)], -0x2218 + -0x2299 + 0x4645);
            else {
                const aD = ad[aZ(0x192) + 'e']()[b0(0x19e)](), aE = { [o['Op'][aZ(0x126)]]: '%' + aD + '%' }, aF = {};
                aF[aZ(0x130) + aZ(0x149)] = aE;
                const aG = { [p['Op'][aZ(0x126)]]: '%' + aD + '%' }, aH = {};
                aH[b0(0x130) + aZ(0x178)] = aG;
                const aI = { [q['Op'][aZ(0x126)]]: '%' + aD + '%' }, aJ = {};
                aJ[b0(0x188) + b0(0x18a)] = aI, ae[n['Op']['or']] = [
                    aF,
                    aH,
                    aJ
                ];
                const aK = { [ah['Op'][aZ(0x126)]]: '%' + aD + '%' }, aL = {};
                aL[b0(0x1a4)] = aK;
                const aM = {};
                aM[b0(0x133)] = ag[b0(0x195)], aM['as'] = S[aZ(0x12c)], aM[b0(0x1bb)] = [
                    'id',
                    S[b0(0x132)]
                ], aM[b0(0x1a6)] = aL, aM[aZ(0x160)] = ![], aM[aZ(0x155) + 'g'] = ![], r[b0(0x14a)](aM);
            }
        }
        if (T) {
            if (S[aZ(0x13b)](S[b0(0x1bd)], S[aZ(0x1bd)]))
                I = [
                    S[b0(0x190)],
                    S[b0(0x131)],
                    S[b0(0x16f)]
                ];
            else
                throw new d[(aZ(0x195))](S[b0(0x16c)], 0x7 * 0xfd + 0x11 * -0xa1 + 0x55a);
        }
        const Y = await User_1[aZ(0x195)][aZ(0x14d)](L);
        let Z = [];
        if (S[aZ(0x158)](Y[aZ(0x1a1)], S[aZ(0x16e)])) {
            if (S[b0(0x1ac)](S[aZ(0x180)], S[aZ(0x180)]))
                a8 = a9[aZ(0x184)](aF => ac[aZ(0x15c)](ad(aF)));
            else {
                const aF = {};
                aF[b0(0x142)] = Q, aF[b0(0x128)] = !![];
                const aG = {};
                aG[b0(0x1a6)] = aF, aG[b0(0x1bb)] = [
                    'id',
                    S[aZ(0x146)]
                ], Z = await Queue_1[aZ(0x195)][b0(0x157)](aG);
            }
        } else {
            if (S[aZ(0x1ac)](S[b0(0x19d)], S[aZ(0x19d)]))
                d = [
                    S[b0(0x190)],
                    S[aZ(0x131)],
                    S[b0(0x16f)]
                ];
            else {
                const aI = {};
                aI[aZ(0x165)] = L;
                const aJ = {};
                aJ[aZ(0x1a6)] = aI, Z = await UsersQueues_1[aZ(0x195)][b0(0x157)](aJ);
            }
        }
        let a0 = Z[b0(0x12a)](aK => aK[b0(0x19a)] || aK['id']);
        if (N && S[b0(0x199)](N[b0(0x175)], 0x1 * -0x26bb + 0x1 * -0x266d + 0x4d28)) {
            if (S[b0(0x154)](S[b0(0x123)], S[aZ(0x13a)])) {
                const aL = {};
                aL[aZ(0x165)] = q;
                const aM = { [r['Op']['in']]: ag }, aN = {};
                aN[aZ(0x134)] = aM;
                const aO = { ...ah }, aP = {
                        [p['Op'][aZ(0x15b)]]: [
                            aL,
                            aN,
                            aO
                        ]
                    }, aQ = {};
                aQ[b0(0x165)] = null;
                const aR = { [aj['Op']['in']]: ak }, aS = {};
                aS[aZ(0x134)] = aR;
                const aT = { ...al };
                aS = {
                    [aT['Op']['or']]: [
                        aP,
                        {
                            [ai['Op'][aZ(0x15b)]]: [
                                aQ,
                                aS,
                                aT
                            ]
                        }
                    ]
                };
            } else
                a0 = a0[aZ(0x184)](aL => N[aZ(0x15c)](String(aL)));
        }
        S[aZ(0x17a)](a0[aZ(0x175)], 0x28b + -0x2340 + 0x20b5) && (S[aZ(0x14f)](S[b0(0x194)], S[b0(0x172)]) ? d = [-0xb43 + 0x11ef * 0x2 + -0x189b] : a0 = [-0x1321 + 0x1ecc + -0xbab]);
        const a1 = S[b0(0x168)](isNaN, S[aZ(0x19c)](Number, W[b0(0x11d)](aM => aM[b0(0x15a)] === b0(0x137) + b0(0x1af))?.[b0(0x170)])) ? -0x620 + -0x2655 * 0x1 + 0x2c93 * 0x1 : S[b0(0x11f)](Number, W[aZ(0x11d)](aM => aM[b0(0x15a)] === b0(0x137) + b0(0x1af))?.[aZ(0x170)]), a2 = S[b0(0x11f)](isNaN, S[b0(0x11f)](Number, W[aZ(0x11d)](aM => aM[aZ(0x15a)] === aZ(0x137) + b0(0x147))?.[aZ(0x170)])) ? 0x161e + 0x434 * -0x4 + -0x530 : S[b0(0x11c)](Number, W[aZ(0x11d)](aM => aM[aZ(0x15a)] === b0(0x137) + b0(0x147))?.[b0(0x170)]), a3 = S[b0(0x1b7)](Number, a1), a4 = S[aZ(0x152)](Number, a2), a5 = S[aZ(0x125)](a4, S[aZ(0x14c)](S[b0(0x19b)](parseInt, pageNumber, -0x10e5 + 0xcb * 0x21 + -0xc5 * 0xc), -0x1 * -0x15d + 0x24fb + -0x2657)), a6 = S[aZ(0x125)](a3, S[b0(0x14c)](S[b0(0x183)](parseInt, pageNumber, 0x2188 + -0x46 * -0x7f + -0x76 * 0x94), 0xa3e * 0x1 + 0x10b0 + 0x1 * -0x1aed)), a7 = [], a8 = { [sequelize_1['Op']['in']]: I }, a9 = {};
        a9[b0(0x134)] = a8;
        const aa = { [sequelize_1['Op']['in']]: a0 }, ab = {};
        ab[aZ(0x19a)] = aa;
        const ac = { [sequelize_1['Op']['gt']]: 0x1 * 0x198c + 0x474 + -0x1e00 }, ad = {};
        ad[aZ(0x1b9) + aZ(0x173)] = ac;
        const ae = {};
        ae[aZ(0x165)] = null;
        let af = {
            'tenantId': Q,
            ...T ? {} : a9,
            ...T ? {} : ab,
            ...T ? {} : S[b0(0x148)](U, 'S') && ad,
            ...T ? {} : S[b0(0x158)](V, 'S') && ae
        };
        if (searchParam) {
            if (S[aZ(0x187)](S[b0(0x121)], S[b0(0x121)])) {
                const aM = searchParam[b0(0x192) + 'e']()[aZ(0x19e)]();
                af[sequelize_1['Op']['or']] = [
                    { '$contact.name$': { [sequelize_1['Op'][b0(0x126)]]: '%' + aM + '%' } },
                    { '$contact.number$': { [sequelize_1['Op'][aZ(0x126)]]: '%' + aM + '%' } },
                    { '$messages.body$': { [sequelize_1['Op'][aZ(0x126)]]: '%' + aM + '%' } }
                ];
                const aN = { [sequelize_1['Op'][b0(0x126)]]: '%' + aM + '%' }, aO = {};
                aO[aZ(0x1a4)] = aN;
                const aP = {};
                aP[b0(0x133)] = Message_1[aZ(0x195)], aP['as'] = S[aZ(0x12c)], aP[b0(0x1bb)] = [
                    'id',
                    S[b0(0x132)]
                ], aP[b0(0x1a6)] = aO, aP[b0(0x160)] = ![], aP[b0(0x155) + 'g'] = ![], a7[aZ(0x14a)](aP);
            } else {
                const aR = {};
                return aR[aZ(0x195)] = ab, a8 && a9[b0(0x12e)] ? aa : aR;
            }
        }
        if (S[aZ(0x1b4)](X, 'S') && !T) {
            const aR = {};
            aR[b0(0x165)] = L;
            const aS = {};
            aS[aZ(0x165)] = null, af = {
                [sequelize_1['Op']['or']]: [
                    {
                        [sequelize_1['Op'][b0(0x15b)]]: [
                            aR,
                            { 'status': { [sequelize_1['Op']['in']]: I } },
                            { ...af }
                        ]
                    },
                    {
                        [sequelize_1['Op'][aZ(0x15b)]]: [
                            aS,
                            { 'status': { [sequelize_1['Op']['in']]: I } },
                            { ...af }
                        ]
                    }
                ]
            };
        }
        const ag = {
                [sequelize_1['Op']['in']]: [
                    S[b0(0x190)],
                    S[aZ(0x131)]
                ]
            }, ah = { ...af };
        ah[aZ(0x134)] = ag;
        const ai = {};
        ai[b0(0x133)] = Whatsapp_1[aZ(0x195)], ai['as'] = S[aZ(0x156)], ai[b0(0x1bb)] = [
            'id',
            S[aZ(0x177)],
            S[aZ(0x1b0)],
            S[aZ(0x11e)]
        ];
        const aj = {};
        aj[aZ(0x133)] = Contact_1[aZ(0x195)], aj['as'] = S[b0(0x13c)], aj[aZ(0x1bb)] = [
            S[b0(0x177)],
            S[b0(0x17e)],
            S[b0(0x1b5)]
        ];
        const ak = {};
        ak[aZ(0x133)] = User_1[aZ(0x195)], ak['as'] = S[aZ(0x185)], ak[b0(0x1bb)] = [S[aZ(0x177)]];
        const al = {};
        al[b0(0x133)] = Queue_1[b0(0x195)], al['as'] = S[b0(0x146)], al[b0(0x1bb)] = [
            'id',
            S[aZ(0x146)],
            S[aZ(0x11e)]
        ];
        const am = {};
        am[b0(0x1a6)] = ah, am[b0(0x151)] = [
            ...a7,
            ai,
            aj,
            ak,
            al
        ], am[b0(0x1a8)] = !![], am[aZ(0x1ba)] = a3, am[aZ(0x141)] = a6, am[b0(0x1a7)] = [[
                S[aZ(0x17c)],
                S[aZ(0x167)]
            ]];
        const {
                rows: an,
                count: ao
            } = await Ticket_1[aZ(0x195)][b0(0x191) + b0(0x196)](am), ap = { [sequelize_1['Op']['in']]: [S[b0(0x16f)]] }, aq = { ...af };
        aq[aZ(0x134)] = ap;
        const ar = {};
        ar[b0(0x133)] = Whatsapp_1[aZ(0x195)], ar['as'] = S[aZ(0x156)], ar[b0(0x1bb)] = [
            'id',
            S[aZ(0x177)],
            S[aZ(0x1b0)],
            S[aZ(0x11e)]
        ];
        const as = {};
        as[b0(0x133)] = Contact_1[b0(0x195)], as['as'] = S[aZ(0x13c)], as[b0(0x1bb)] = [
            S[b0(0x177)],
            S[aZ(0x17e)],
            S[aZ(0x1b5)]
        ];
        const at = {};
        at[aZ(0x133)] = User_1[b0(0x195)], at['as'] = S[b0(0x185)], at[aZ(0x1bb)] = [S[b0(0x177)]];
        const au = {};
        au[b0(0x133)] = Queue_1[aZ(0x195)], au['as'] = S[aZ(0x146)], au[b0(0x1bb)] = [
            'id',
            S[b0(0x146)],
            S[aZ(0x11e)]
        ];
        const av = {};
        av[aZ(0x1a6)] = aq, av[b0(0x151)] = [
            ...a7,
            ar,
            as,
            at,
            au
        ], av[aZ(0x1a8)] = !![], av[b0(0x1ba)] = a4, av[aZ(0x141)] = a5, av[aZ(0x1a7)] = [[
                S[b0(0x17c)],
                S[aZ(0x167)]
            ]];
        const {
                rows: aw,
                count: ax
            } = await Ticket_1[b0(0x195)][b0(0x191) + b0(0x196)](av), ay = [
                ...an,
                ...aw
            ], az = S[aZ(0x161)](ao, ax), aA = S[aZ(0x199)](az, S[aZ(0x1a0)](a5, aw[aZ(0x175)])), aB = {};
        return aB[aZ(0x193)] = ay || [], aB[aZ(0x18e)] = az, aB[aZ(0x14e)] = aA, aB;
    };
exports[aW(0x195)] = ListTicketsService;