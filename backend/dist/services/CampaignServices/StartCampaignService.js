'use strict';
const L = b, M = b;
(function (c, d) {
    const J = b, K = b, e = c();
    while (!![]) {
        try {
            const f = parseInt(J(0xe5)) / (-0x1 * 0xd03 + -0x1a21 + -0x38f * -0xb) * (-parseInt(J(0xd5)) / (-0xb7f * 0x2 + 0x1ad3 + -0x3d3)) + parseInt(J(0x109)) / (0x3 * -0x745 + -0x2 * -0x14e + 0x99b * 0x2) + parseInt(K(0xa2)) / (-0xb1 + 0x4 * -0x5fd + 0x18a9) * (parseInt(J(0xa9)) / (-0x27 * 0xe3 + -0x1c1 * -0x7 + 0x7f * 0x2d)) + parseInt(J(0x122)) / (0x1127 + -0x1f0f + 0xdee) + parseInt(K(0x12b)) / (0x10d9 + 0x1a94 + -0x2b66) + -parseInt(J(0x10a)) / (-0xc18 + 0x18e + 0x549 * 0x2) * (-parseInt(J(0xfe)) / (0x1c5 + -0x15a8 + 0xff * 0x14)) + parseInt(J(0xe1)) / (-0x1d52 + 0x19 * -0x177 + 0x41fb) * (-parseInt(K(0xbe)) / (-0x1205 + 0x1663 + -0x453));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, 0x1 * -0x405ed + -0x145658 + 0x22c105));
function a() {
    const a2 = [
        'ELVsE',
        'KAWrY',
        'XwAji',
        'parse',
        'contactId',
        'ls/Campaig',
        '5531016aIhBFK',
        'addSeconds',
        'efpgN',
        'luUQY',
        'GpkYD',
        'campaginId',
        'map',
        'ipObK',
        'liRnN',
        '1615656Cfmyif',
        'difference',
        'BHUpU',
        'default',
        'OQxim',
        'contact',
        'getTime',
        'nContacts',
        'HgCSi',
        'message2',
        'eWhatsappC',
        'sSSMj',
        'bumyS',
        'cVOaL',
        'defineProp',
        'AMRrh',
        'Qqgdd',
        'include',
        'pUUjl',
        'RlbjX',
        'eufpm',
        'bNmCX',
        'wnLIm',
        'ebPHg',
        'TUuOa',
        'length',
        'email',
        'phoneNumbe',
        'random',
        '45736RdqZDn',
        'split',
        'OvrAQ',
        'terval',
        'UyeBj',
        'where',
        'status',
        '335yEyCJD',
        '__importDe',
        'GNNSq',
        'DstaV',
        '../../erro',
        'JheKb',
        'GN_CONTACT',
        'SHORg',
        'aHRnA',
        'GpAEf',
        'RaLkI',
        'ERROR_CAMP',
        'findAll',
        'rs/AppErro',
        'date-fns',
        'PjrKq',
        'lRPvl',
        'IByjB',
        'HH:mm',
        '_contact_',
        'sessionId',
        '264935RSpcgL',
        'BvBzD',
        'jijpL',
        'soqRy',
        'nrjXv',
        'pupa',
        '__esModule',
        'campaignId',
        'oUtc',
        'SendMessag',
        'QUsjp',
        'aluZH',
        '08:00',
        'isAfter',
        'setHours',
        'isBefore',
        'ediVu',
        'name',
        'o_Paulo',
        'ZeYFF',
        'MPsps',
        'message1',
        'eNicD',
        '34oTWPWg',
        'qnpha',
        'MLEtQ',
        'dfitv',
        'date-fns-t',
        'floor',
        'LeywJ',
        'kyZmf',
        'JHsKv',
        'gZKWe',
        'message',
        'InDays',
        '630HqTtEu',
        'ampaign',
        'getMinutes',
        'ECzCb',
        '52691oqtYdS',
        '20:00',
        'zonedTimeT',
        'vGPlz',
        '/Queue',
        'QOQlI',
        'AIGN_NOT_E',
        'OgYyJ',
        'setMinutes',
        'tenantId',
        'addDays',
        'findOne',
        'add',
        'YkppE',
        'aRbRp',
        'fault',
        'session',
        'scheduled',
        'YleuG',
        'uCOke',
        'uzBSJ',
        'FaVDd',
        'ERR_CAMPAI',
        'value',
        '../../util',
        '315999dbfQws',
        'fOHFD',
        'hfbqh',
        'S_NOT_EXIS',
        'number',
        'getHours',
        'SKjgm',
        'mediaUrl',
        'end',
        'isWithinIn',
        'erty',
        '1841268luxngi',
        '128rKCGzU',
        'ofMgV',
        'start',
        'GzSVt',
        'GGUNl',
        'XISTS',
        'InSeconds',
        '../../mode',
        'DEXsY',
        's/pupa',
        'JPzXx',
        'message3',
        '../../libs',
        '_id_',
        'delay',
        'update',
        'QynuL',
        'America/Sa'
    ];
    a = function () {
        return a2;
    };
    return a();
}
var __importDefault = this && this[L(0xaa) + M(0xf4)] || function (c) {
    const N = M;
    return c && c[N(0xc4)] ? c : { 'default': c };
};
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (-0x6b7 + 0x17c6 + 0xb * -0x17f);
        let h = e[f];
        return h;
    }, b(c, d);
}
const I = {};
I[L(0xfc)] = !![], Object[M(0x139) + L(0x108)](exports, L(0xc4), I);
const pupa_1 = require(M(0xfd) + L(0x113)), date_fns_1 = require(L(0xb7)), date_fns_tz_1 = require(M(0xd9) + 'z'), Campaign_1 = __importDefault(require(L(0x111) + L(0x121) + 'n')), AppError_1 = __importDefault(require(L(0xad) + L(0xb6) + 'r')), CampaignContacts_1 = __importDefault(require(L(0x111) + L(0x121) + M(0x132))), Queue_1 = __importDefault(require(M(0x116) + M(0xe9))), cArquivoName = d => {
        const O = L, P = M, e = {};
        e[O(0xb2)] = function (i, j) {
            return i - j;
        };
        const f = e;
        if (!d)
            return '';
        const g = d[O(0xa3)]('/'), h = g[f[O(0xb2)](g[O(0x9e)], -0x1 * 0x326 + 0x106 * -0x26 + 0x2a0b)];
        return h;
    }, randomInteger = (d, e) => {
        const Q = L, R = M, f = {};
        f[Q(0xc1)] = function (h, i) {
            return h + i;
        }, f[Q(0xa6)] = function (h, i) {
            return h * i;
        }, f[Q(0x10b)] = function (h, i) {
            return h - i;
        };
        const g = f;
        return g[R(0xc1)](Math[R(0xda)](g[Q(0xa6)](Math[Q(0xa1)](), g[R(0xc1)](g[Q(0x10b)](e, d), 0x1 * -0x375 + 0x1fab + -0x1c35))), d);
    }, mountMessageData = (d, e, f) => {
        const S = L, T = M, g = {
                'Qqgdd': function (k, l, m) {
                    return k(l, m);
                },
                'uzBSJ': function (k, l) {
                    return k === l;
                },
                'gZKWe': function (k, l) {
                    return k === l;
                },
                'ebPHg': function (k, l) {
                    return k || l;
                },
                'JheKb': function (k, l) {
                    return k(l);
                }
            }, h = g[S(0x13b)](randomInteger, 0xfcd + -0x135a * -0x1 + -0x2326, 0xb3d + -0x1 * 0x2ca + -0x870);
        let i = '';
        if (g[S(0xf9)](h, -0x12e9 * 0x1 + -0x1 * -0x22de + 0x3fd * -0x4))
            i = d[S(0xd3)];
        if (g[S(0xf9)](h, 0x2f0 * 0x6 + 0x1 * 0x267 + -0x7d * 0x29))
            i = d[S(0x134)];
        if (g[T(0xde)](h, -0x2495 + 0x11d3 + 0x12c5))
            i = d[S(0x115)];
        const j = {};
        return j[S(0xcf)] = e[S(0x130)][T(0xcf)] || '', j[S(0x9f)] = e[S(0x130)][S(0x9f)] || '', j[T(0xa0) + 'r'] = e[S(0x130)][T(0x102)] || '', i = (0x9 * -0x3f9 + 0xf62 + 0x145f, pupa_1[S(0xc3)])(g[S(0x9c)](i, ''), j), {
            'whatsappId': d[S(0xbd)],
            'message': i,
            'number': e[T(0x130)][T(0x102)],
            'mediaUrl': d[S(0x105)],
            'mediaName': g[T(0xae)](cArquivoName, d[T(0x105)]),
            'messageRandom': T(0xdf) + h,
            'campaignContact': e,
            'options': f
        };
    }, nextDayHoursValid = d => {
        const U = M, V = M, e = {
                'MPsps': function (o, p) {
                    return o / p;
                },
                'bumyS': function (o, p, q, r) {
                    return o(p, q, r);
                },
                'QOQlI': function (o, p, q) {
                    return o(p, q);
                },
                'DEXsY': function (o, p) {
                    return o + p;
                },
                'aRbRp': function (o, p) {
                    return o * p;
                },
                'QUsjp': function (o, p) {
                    return o - p;
                },
                'YleuG': function (o, p) {
                    return o < p;
                },
                'BvBzD': function (o, p) {
                    return o === p;
                },
                'ipObK': U(0xab),
                'hfbqh': V(0x136),
                'IByjB': function (o, p) {
                    return o * p;
                },
                'MLEtQ': function (o, p) {
                    return o < p;
                },
                'OvrAQ': function (o, p) {
                    return o === p;
                },
                'aluZH': U(0x138),
                'SHORg': V(0x12d),
                'LeywJ': U(0xca),
                'JHsKv': V(0xbb),
                'wnLIm': V(0xe6),
                'KAWrY': function (o, p) {
                    return o && p;
                },
                'JPzXx': function (o, p) {
                    return o !== p;
                },
                'nrjXv': V(0x12a),
                'kyZmf': function (o, p) {
                    return o === p;
                },
                'FaVDd': U(0x11c),
                'uCOke': function (o, p) {
                    return o && p;
                },
                'GzSVt': function (o, p) {
                    return o > p;
                },
                'RaLkI': function (o, p) {
                    return o !== p;
                },
                'dfitv': U(0xff),
                'HgCSi': U(0x11e)
            };
        let f = d;
        const g = new Date(), h = (0x3 * -0x24f + -0x4d5 * 0x8 + 0x2d95 * 0x1, date_fns_1[U(0x12c) + V(0xe0)])(f, new Date());
        if (e[V(0xf7)](h, -0x1 * 0xc9 + -0x1779 + 0x1 * 0x1842)) {
            if (e[V(0xbf)](e[V(0x129)], e[U(0x100)]))
                return q = (-0x1c8f + -0x11c5 * -0x2 + -0x6fb, r[V(0x123)])(s, e[V(0xd2)](t, -0x1 * -0x21a3 + -0x2b * -0x81 + -0x3366)), e[U(0x137)](u, v, w, {
                    ...x,
                    'jobId': V(0x127) + '_' + y['id'] + U(0xbc) + z[V(0x120)] + V(0x117) + A['id'],
                    'delay': e[V(0xea)](B, C, D)
                });
            else
                f = (-0x25b9 + 0x245c + 0x15d, date_fns_1[V(0xef)])(f, e[V(0xba)](h, -(0x1920 + -0x1 * 0x3a6 + -0x1579)));
        }
        if (e[V(0xd7)](f[U(0x131)](), g[V(0x131)]())) {
            if (e[V(0xa4)](e[U(0xc9)], e[V(0xb0)])) {
                const q = {};
                return q[V(0x12e)] = j, g && h[U(0xc4)] ? i : q;
            } else
                f = (-0xb7 + -0x16 * 0x17d + -0xb27 * -0x3, date_fns_1[U(0xed)])((-0x25d7 + 0x1fb2 * 0x1 + 0x625, date_fns_1[V(0xcc)])(f, g[U(0x103)]()), g[V(0xe3)]());
        }
        const i = (-0x2343 + 0xea * 0x10 + 0x24b * 0x9, date_fns_1[V(0x11f)])(e[V(0xdb)], e[V(0xdd)], f), j = (0x124b + 0xad * -0x27 + -0x204 * -0x4, date_fns_1[U(0x11f)])(e[U(0x9b)], e[U(0xdd)], f), k = {};
        k[U(0x10c)] = i, k[V(0x106)] = j;
        const l = (-0xfb * -0x13 + -0x1 * 0x2356 + 0x10b5, date_fns_1[V(0x107) + V(0xa5)])(f, k), m = (-0x7a * 0x1 + 0x10 * -0x176 + 0x17da, date_fns_1[V(0xcd)])(i, f), n = (0x358 + 0x4 * 0x57 + -0x2 * 0x25a, date_fns_1[U(0xcb)])(j, f);
        e[U(0x11d)](!l, m) && (e[V(0x114)](e[U(0xc2)], e[U(0xc2)]) ? i = (0x241d + 0x34d + 0x7e2 * -0x5, j[U(0xed)])((0x26 * -0x77 + 0x1 * -0x1d21 + 0x2ecb, k[V(0xcc)])(l, m[U(0x103)]()), n[V(0xe3)]()) : f = (0x1 * -0x577 + 0x11d8 + -0xc61 * 0x1, date_fns_1[U(0xed)])((-0x1a35 + 0x237 * 0x3 + 0x8 * 0x272, date_fns_1[U(0xcc)])(f, 0x6 * -0x362 + 0x11fb + 0x259), 0x126b + -0xc * 0x3a + -0xf95));
        if (e[U(0x11d)](!l, n) && e[V(0xa4)](h, 0x92a + -0x619 + 0x311 * -0x1)) {
            if (e[U(0xdc)](e[U(0xfa)], e[U(0xfa)]))
                f = (-0xb89 * 0x3 + 0x17 * -0x19a + -0x4771 * -0x1, date_fns_1[U(0xef)])((0x112d + -0x24be + 0x1391, date_fns_1[V(0xcc)])(f, 0xc89 * 0x1 + -0xef1 + 0x270), 0x2097 + -0x66 * -0x3d + 0x2c * -0x14b);
            else {
                const s = (-0x12b7 + -0x1 * 0x10d + -0x1fa * -0xa, g[V(0x12c) + U(0x110)])(h, new i());
                return e[V(0x112)](e[V(0xf3)](s, -0xdad + 0x85 * 0x45 + -0x1244), j);
            }
        }
        if (e[V(0xf8)](!l, n) && e[U(0x10d)](h, 0x1696 + 0x1f85 + -0x13 * 0x2d9)) {
            if (e[V(0xb3)](e[U(0xd8)], e[V(0x133)]))
                f = (0x21ea + 0x737 * 0x1 + -0x2921, date_fns_1[V(0xcc)])(f, 0x2261 + 0x1 * 0x218b + 0x365 * -0x14);
            else {
                if (!e)
                    return '';
                const t = f[V(0xa3)]('/'), u = t[e[V(0xc8)](t[V(0x9e)], -0x1390 + 0xfd3 + 0x3be)];
                return u;
            }
        }
        return f;
    }, calcDelay = (d, e) => {
        const W = L, X = L, f = {};
        f[W(0x104)] = function (i, j) {
            return i + j;
        }, f[X(0x13e)] = function (i, j) {
            return i * j;
        };
        const g = f, h = (0x1 * -0x2597 + 0x750 + 0x1e47, date_fns_1[W(0x12c) + W(0x110)])(d, new Date());
        return g[W(0x104)](g[X(0x13e)](h, -0x2f * -0x66 + -0x2010 + 0x1 * 0x113e), e);
    }, StartCampaignService = async ({
        campaignId: h,
        tenantId: i,
        options: j
    }) => {
        const Y = L, Z = L, k = {
                'ZeYFF': function (v, w) {
                    return v + w;
                },
                'ECzCb': function (v, w) {
                    return v * w;
                },
                'lRPvl': function (v, w) {
                    return v + w;
                },
                'GGUNl': function (v, w) {
                    return v - w;
                },
                'DstaV': Y(0xb4) + Y(0xeb) + Z(0x10f),
                'luUQY': function (v, w) {
                    return v === w;
                },
                'AMRrh': Y(0x11a),
                'qnpha': Z(0x124),
                'PjrKq': function (v, w) {
                    return v / w;
                },
                'eNicD': function (v, w, x, y) {
                    return v(w, x, y);
                },
                'OQxim': function (v, w, x) {
                    return v(w, x);
                },
                'ediVu': Z(0xf5),
                'bNmCX': Z(0x13f),
                'aHRnA': Y(0x130),
                'YkppE': function (v, w) {
                    return v === w;
                },
                'pUUjl': Y(0x9d),
                'vGPlz': Z(0xfb) + Z(0xaf) + Y(0x101) + 'TS',
                'GpkYD': Z(0x11b) + Y(0xd0),
                'jijpL': Y(0xc7) + Y(0x135) + Z(0xe2),
                'OgYyJ': Y(0xf6)
            }, l = {};
        l['id'] = h, l[Z(0xee)] = i;
        const m = {};
        m[Z(0xa7)] = l, m[Y(0x13c)] = [k[Z(0xce)]];
        const n = await Campaign_1[Y(0x12e)][Z(0xf0)](m);
        if (!n) {
            if (k[Z(0x125)](k[Y(0x9a)], k[Y(0x9a)]))
                throw new AppError_1[(Z(0x12e))](k[Z(0xac)], 0x26b9 + -0xf37 + -0x322 * 0x7);
            else
                return k[Y(0xd1)](h[Y(0xda)](k[Z(0xe4)](i[Z(0xa1)](), k[Y(0xb9)](k[Z(0x10e)](j, k), 0x177 * 0x7 + 0x11 * -0x59 + -0x457))), l);
        }
        const o = {};
        o[Z(0xc5)] = h;
        const p = {};
        p[Y(0xa7)] = o, p[Z(0x13c)] = [k[Y(0xb1)]];
        const q = await CampaignContacts_1[Y(0x12e)][Y(0xb5)](p);
        if (!q) {
            if (k[Y(0xf2)](k[Z(0x13d)], k[Y(0x13d)]))
                throw new AppError_1[(Y(0x12e))](k[Y(0xe8)], -0xbd * -0x2b + -0x1 * 0x8a9 + -0x1582 * 0x1);
            else
                p = (-0x851 + 0x1d56 + 0x1505 * -0x1, u[Z(0xcc)])(h, -0x26ba + 0x1 * 0xe06 + -0xc5e * -0x2);
        }
        const r = n[Y(0x118)] ? k[Z(0xe4)](n[Z(0x118)], 0x281 * -0x1 + -0x35 * 0xd + 0x91a) : -0x2 * 0x47b3 + -0x4fc7 + -0x3 * -0x646f;
        let s = (-0x134b + 0x37 * -0x2f + 0x1d64, date_fns_tz_1[Y(0xe7) + Y(0xc6)])(n[Z(0x10c)], k[Y(0x126)]);
        const t = q[Z(0x128)](x => {
            const a0 = Y, a1 = Z;
            if (k[a0(0x125)](k[a1(0x13a)], k[a0(0xd6)]))
                throw new m[(a1(0x12e))](k[a1(0xac)], 0x16 * -0x65 + 0x18e + 0x8b4);
            else
                return s = (0x2 * 0xa3f + -0x201a + -0x5ce * -0x2, date_fns_1[a0(0x123)])(s, k[a1(0xb8)](r, -0x158 + 0x179c + -0x125c)), k[a1(0xd4)](mountMessageData, n, x, {
                    ...j,
                    'jobId': a0(0x127) + '_' + n['id'] + a0(0xbc) + x[a0(0x120)] + a0(0x117) + x['id'],
                    'delay': k[a1(0x12f)](calcDelay, s, r)
                });
        });
        Queue_1[Y(0x12e)][Y(0xf1)](k[Y(0xc0)], t);
        const u = {};
        u[Z(0xa8)] = k[Y(0xec)], await n[Y(0x119)](u);
    };
exports[M(0x12e)] = StartCampaignService;