'use strict';
const H = b, I = b;
(function (c, d) {
    const F = b, G = b, e = c();
    while (!![]) {
        try {
            const f = parseInt(F(0x166)) / (0x53f * 0x1 + 0x1 * 0x650 + -0xb8e) * (-parseInt(F(0x125)) / (0x757 * -0x3 + -0x1 * 0x1ab + 0x17b2)) + -parseInt(G(0x10b)) / (-0xa * -0x8b + -0xe8b + 0x4 * 0x248) * (parseInt(F(0x161)) / (-0x8e * -0x2 + -0x2 * 0x113f + 0x2166)) + -parseInt(G(0x14e)) / (0x6 * 0xe + -0x5e * 0x29 + -0x97 * -0x19) + parseInt(F(0x130)) / (-0x90e + -0x73a + 0x104e) + parseInt(G(0x107)) / (0x178f + 0x1391 + -0x2b19) * (-parseInt(F(0x13f)) / (-0x214 + -0x31 * 0x8d + 0x1d19)) + -parseInt(G(0x16a)) / (-0x3 * -0xa7b + -0xab3 * 0x2 + -0x16e * 0x7) * (parseInt(F(0x148)) / (0x5 * 0xb8 + -0x1079 * -0x2 + 0x2 * -0x1240)) + -parseInt(F(0x146)) / (-0x8d5 * -0x2 + 0x980 + -0x1b1f) * (-parseInt(F(0x108)) / (0x2e * -0x39 + 0x24e9 * -0x1 + 0x2f33));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, -0x313db * -0x1 + 0x137 * -0x32b + 0x80046));
function a() {
    const O = [
        'ers/GetInt',
        '22kexTVJ',
        'SendMediaM',
        'model',
        'ice',
        '333MeqSwq',
        'ype',
        'ticket',
        '../Integra',
        'info',
        'HandleMess',
        'nId',
        'channel',
        'integratio',
        'tion',
        'ageWebHook',
        'telOo',
        'sequelize',
        'code',
        '2375807cIzYJD',
        '32319348ffAoKx',
        'order',
        'sended',
        '59259liFzKS',
        'gZihR',
        '../../help',
        'messageId',
        'mediaName',
        'essageServ',
        'GPLqi',
        'contact',
        'xQZGJ',
        'RgGKf',
        'tenantId',
        'where',
        'PmUuz',
        '../../util',
        'MessageSer',
        'QjkSM',
        './SendMedi',
        'nant:\x20',
        'LymBt',
        './SendText',
        'ketMessage',
        'vGNAb',
        'createdAt',
        'ls/Message',
        'hub_facebo',
        'ers/SetTic',
        '61546vJScwP',
        'useIntegra',
        'body',
        'logger',
        'Error\x20send',
        '../../mode',
        'age\x20is\x20(te',
        'PUggL',
        'findAll',
        'forEach',
        'ssageServi',
        '1012182yjSgtR',
        'xtHWi',
        'chat',
        'include',
        'update',
        'Hook',
        'ENOENT',
        '__importDe',
        'pending',
        ')::',
        'fault',
        'ces/Handle',
        'e\x20media',
        '\x20message\x20(',
        'Ioaxd',
        '8bKNnZi',
        'MessageWeb',
        's/logger',
        'lte',
        'SendTextMe',
        'aMessageSe',
        'qyBoc',
        '11QzCHzO',
        '\x20|\x20Ticket:',
        '167890XTJhGB',
        'destroy',
        'tionsServi',
        'mediaType',
        'status',
        'whatsappId',
        '3653975adiFbK',
        'default',
        'egrationsT',
        'wLhRw',
        'ASC',
        'ls/Ticket',
        'rvice',
        'e\x20text',
        'defineProp',
        'erty',
        'value',
        'DoudZ',
        'Error\x20mess',
        'n8n',
        'sendMessag',
        'error',
        'mEBiX',
        'id:\x20',
        'sAsRead',
        '4vXfAcG',
        'closed',
        '__esModule',
        'vice'
    ];
    a = function () {
        return O;
    };
    return a();
}
var __importDefault = this && this[H(0x137) + H(0x13a)] || function (c) {
    const J = H;
    return c && c[J(0x163)] ? c : { 'default': c };
};
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (-0x22ad + 0x1f34 + 0x5 * 0xe6);
        let h = e[f];
        return h;
    }, b(c, d);
}
const k = {};
k[I(0x158)] = !![], Object[H(0x156) + H(0x157)](exports, H(0x163), k);
const sequelize_1 = require(H(0x105)), SendTextMessageService_1 = require(H(0x11e) + I(0x119) + H(0x164)), SendMediaMessageService_1 = require(I(0x11b) + I(0x144) + I(0x154)), Message_1 = __importDefault(require(I(0x12a) + H(0x122))), Ticket_1 = __importDefault(require(I(0x12a) + I(0x153))), logger_1 = require(H(0x118) + H(0x141)), SetTicketMessagesAsRead_1 = __importDefault(require(I(0x10d) + I(0x124) + I(0x11f) + I(0x160))), HandleMessageWebHook_1 = require(H(0x16d) + I(0x14a) + H(0x13b) + H(0x140) + H(0x135)), GetIntegrationsType_1 = __importDefault(require(I(0x10d) + H(0x165) + H(0x150) + H(0x16b))), sendMessageHub = async (g, h, i = undefined) => {
        const K = H, L = I, j = {};
        j[K(0x159)] = function (o, p) {
            return o !== p;
        }, j[K(0x12c)] = L(0x132), j[K(0x15e)] = L(0x15c) + K(0x13c), j[L(0x11d)] = K(0x15c) + K(0x155), j[K(0x175)] = L(0x10a), j[K(0x114)] = function (o, p) {
            return o === p;
        }, j[K(0x120)] = K(0x15b), j[K(0x11a)] = function (o, p) {
            return o === p;
        }, j[K(0x111)] = L(0x136), j[K(0x13e)] = L(0x138), j[K(0x10c)] = L(0x16c), j[K(0x151)] = K(0x162), j[L(0x145)] = L(0x123) + 'ok', j[L(0x131)] = K(0x112), j[K(0x117)] = K(0x121), j[K(0x113)] = L(0x152);
        const l = j;
        let m;
        if (!i) {
            const o = { [sequelize_1['Op']['is']]: null }, p = {
                    'fromMe': !![],
                    'messageId': o,
                    'status': l[L(0x13e)],
                    [sequelize_1['Op']['or']]: [
                        { 'scheduleDate': { [sequelize_1['Op'][K(0x142)]]: new Date() } },
                        { 'scheduleDate': { [sequelize_1['Op']['is']]: null } }
                    ]
                }, q = {};
            q[K(0x168)] = Ticket_1[K(0x14f)], q['as'] = l[L(0x10c)], q[K(0x116)] = {
                [sequelize_1['Op']['or']]: {
                    'status': { [sequelize_1['Op']['ne']]: l[L(0x151)] },
                    'isFarewellMessage': !![]
                }
            }, q[K(0x133)] = [l[L(0x131)]], q[K(0x116)][K(0x115)] = h, q[K(0x116)][L(0x171)] = l[K(0x145)], q[K(0x116)][L(0x14d)] = g;
            const r = {};
            r[K(0x116)] = p, r[L(0x133)] = [q], r[L(0x109)] = [[
                    l[L(0x117)],
                    l[K(0x113)]
                ]], m = await Message_1[L(0x14f)][L(0x12d)](r);
        } else
            m = i;
        let n;
        await m[K(0x12e)](async s => {
            const M = K, N = L, {ticket: t} = s;
            try {
                l[M(0x159)](s[M(0x14b)], l[M(0x12c)]) && s[M(0x10f)] ? (n = await (-0xe67 * -0x1 + -0x1cc0 + 0xe59 * 0x1, SendMediaMessageService_1[M(0x167) + M(0x110) + M(0x169)])(s[N(0x10f)], s[M(0x127)], s[N(0x16c)]['id'], h), logger_1[M(0x128)][N(0x16e)](l[N(0x15e)])) : (n = await (0x6dc * 0x4 + -0x2d7 * 0x4 + -0x405 * 0x4, SendTextMessageService_1[M(0x143) + N(0x12f) + 'ce'])(s[N(0x127)], s[N(0x16c)]['id'], h), logger_1[M(0x128)][M(0x16e)](l[N(0x11d)]));
                const u = {};
                u[N(0x10e)] = n, u[N(0x14c)] = l[M(0x175)];
                const v = u, w = { ...v }, x = {};
                x['id'] = s['id'];
                const y = {};
                y[N(0x116)] = x, await Message_1[M(0x14f)][N(0x134)](w, y), await (-0x1 * 0x8d3 + -0x12fd + 0x1bd * 0x10, SetTicketMessagesAsRead_1[M(0x14f)])(t);
                if (l[N(0x114)](t[M(0x126) + N(0x173)], !![])) {
                    const z = await (0x6e * -0x56 + 0x1bfa + -0x1 * -0x8fa, GetIntegrationsType_1[N(0x14f)])(t[M(0x172) + N(0x170)]);
                    l[N(0x114)](z, l[M(0x120)]) && await (0x11dd + 0x1c68 + -0x2e45, HandleMessageWebHook_1[N(0x16f) + N(0x174)])(t[N(0x172) + M(0x170)], undefined, s['id']);
                }
            } catch (A) {
                const B = s['id'], C = s[M(0x16c)]['id'];
                if (l[N(0x11a)](A[N(0x106)], l[M(0x111)])) {
                    const D = {};
                    D['id'] = s['id'];
                    const E = {};
                    E[N(0x116)] = D, await Message_1[M(0x14f)][M(0x149)](E);
                }
                logger_1[M(0x128)][M(0x15d)](M(0x15a) + M(0x12b) + M(0x11c) + h + (N(0x147) + '\x20') + C + ')'), logger_1[M(0x128)][M(0x15d)](M(0x129) + M(0x13d) + N(0x15f) + B + M(0x139) + A);
            }
        });
    };
exports[H(0x14f)] = sendMessageHub;