'use strict';
function a() {
    const aa = [
        's/logger',
        'sequelize',
        'BieTN',
        'bevae',
        'OvmYb',
        'tenantId',
        '../../libs',
        'payload',
        'icket\x20',
        'include',
        '335976WRuSef',
        'yChRG',
        'DFECM',
        'update',
        'wallets',
        '__esModule',
        'creating\x20t',
        'type',
        'create',
        'queueId',
        'associatio',
        'tokenAPI',
        'defineProp',
        'fault',
        'ls/Contact',
        'wabaVersio',
        '92597yZSeKz',
        'pending',
        '../../util',
        'ers/socket',
        'answered',
        'bmToken',
        'HsINQ',
        '575Jllyrt',
        'logger',
        'UtJpm',
        'contact',
        'wIQQu',
        'yshKp',
        'channel',
        '9592nEefFk',
        'Emit',
        'ticket:upd',
        'tQGYl',
        '../../help',
        'ls/Tenant',
        'sts\x20',
        '2OhCUmr',
        '../../mode',
        '2011616CAANsn',
        'GXOAs',
        'YMxaW',
        '/socket',
        'where',
        'isOnline',
        'lastMessag',
        'tags',
        '__importDe',
        'jTeuY',
        'GpQQg',
        'reload',
        'erty',
        'jJwHj',
        'default',
        '18zzDuwi',
        '1329174gRDfTm',
        'smoOS',
        'ls/Ticket',
        'ls/User',
        'ticket\x20exi',
        'text',
        'whatsapp',
        'aFLwI',
        'FpcsQ',
        'ate',
        'hub_',
        'length',
        'name',
        'whatsappId',
        'RIkOl',
        'chatFlowId',
        '3262180dJfOvo',
        'hRbyp',
        'status',
        'contactId',
        '1064028fzUxOf',
        'getIO',
        'ue\x20updated',
        'ticket\x20que',
        'lUhKz',
        'user',
        'value',
        'queue',
        'closed',
        'open',
        'info',
        'extraInfo',
        'rZrNo',
        'findOne'
    ];
    a = function () {
        return aa;
    };
    return a();
}
const a5 = b, a6 = b;
(function (c, d) {
    const a3 = b, a4 = b, e = c();
    while (!![]) {
        try {
            const f = parseInt(a3(0x96)) / (-0x18f5 + -0x1 * 0x1aed + 0x33e3) * (parseInt(a4(0xab)) / (-0x1974 + 0x22 * 0x1 + 0x1954)) + parseInt(a3(0x86)) / (-0x1c70 + 0x2511 + -0x89e) + -parseInt(a3(0xa4)) / (0x1 * 0x21e2 + 0x1357 + -0x1 * 0x3535) * (-parseInt(a3(0x9d)) / (-0x1a9d * 0x1 + -0x1 * 0x991 + 0x2433)) + parseInt(a3(0xbd)) / (-0x2698 + 0x1d3 * -0x5 + 0x2fbd) + -parseInt(a4(0xd1)) / (0x1 * -0x1605 + 0x14fc * -0x1 + 0x2b08) + parseInt(a4(0xad)) / (0x9f5 * -0x3 + 0x1 * 0x1cf5 + 0xf2 * 0x1) + -parseInt(a4(0xbc)) / (0x178e + 0x2bd * 0xd + -0x3b1e) * (parseInt(a3(0xcd)) / (0x1037 * 0x2 + -0x230a + 0x2a6));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, 0x2399 + 0x4965 * -0x6 + -0x175 * -0x2a5));
var __importDefault = this && this[a5(0xb5) + a5(0x93)] || function (c) {
    const a7 = a5;
    return c && c[a7(0x8b)] ? c : { 'default': c };
};
const k = {};
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (-0x189d * -0x1 + 0x219b + -0x39c7);
        let h = e[f];
        return h;
    }, b(c, d);
}
k[a5(0x74)] = !![], Object[a6(0x92) + a6(0xb9)](exports, a6(0x8b), k);
const sequelize_1 = require(a5(0x7d)), Ticket_1 = __importDefault(require(a6(0xac) + a5(0xbf))), socket_1 = require(a5(0x82) + a6(0xb0)), Tenant_1 = __importDefault(require(a5(0xac) + a5(0xa9))), Contact_1 = __importDefault(require(a6(0xac) + a5(0x94))), User_1 = __importDefault(require(a5(0xac) + a5(0xc0))), logger_1 = require(a6(0x98) + a5(0x7c)), socketEmit_1 = __importDefault(require(a5(0xa8) + a6(0x99) + a6(0xa5))), CreateOrUpdateTicketService = async w => {
        const a8 = a5, a9 = a6, x = {};
        x[a8(0x80)] = a8(0x8c) + a9(0x84), x[a8(0x88)] = a9(0x77), x[a8(0xb7)] = a9(0x97), x[a9(0xc5)] = function (U, V) {
            return U > V;
        }, x[a8(0x72)] = a8(0xa0), x[a9(0xc4)] = a8(0x79), x[a8(0xbe)] = a9(0xb4), x[a9(0xa1)] = a8(0x8a), x[a9(0xa7)] = a8(0xc9), x[a9(0xcb)] = a8(0x73), x[a8(0xa2)] = a9(0xb2), x[a9(0x7f)] = a8(0xc3), x[a9(0x87)] = a9(0x91), x[a8(0xba)] = a8(0xcc), x[a9(0x7e)] = a9(0xcf), x[a9(0xaf)] = a9(0x9b), x[a8(0x9f)] = a8(0x95) + 'n', x[a9(0xb6)] = a9(0xc1) + a9(0xaa), x[a9(0xae)] = function (U, V) {
            return U === V;
        }, x[a8(0x7a)] = a9(0x76), x[a8(0xce)] = a8(0x75), x[a9(0x9c)] = a8(0xa6) + a8(0xc6);
        const y = x;
        logger_1[a9(0x9e)][a9(0x78)](y[a8(0x80)]);
        const {
                contactId: z,
                channel: A,
                contents: B,
                whatsapp: C
            } = w, D = (0x173 + -0xbf8 + 0x1 * 0xa85, socket_1[a8(0xd2)])(), E = {};
        E['id'] = C[a8(0x81)];
        const F = {};
        F[a9(0xb1)] = E;
        const G = await Tenant_1[a8(0xbb)][a9(0x7b)](F), H = [
                y[a9(0x88)],
                y[a9(0xb7)]
            ], I = [], J = { [sequelize_1['Op']['or']]: H }, K = {};
        K[a8(0xcf)] = J, K[a9(0x81)] = C[a9(0x81)], K[a8(0xca)] = C['id'], K[a9(0xd0)] = z;
        const L = await Ticket_1[a9(0xbb)][a9(0x7b)]({
            'where': K,
            'order': y[a8(0xc5)](I[a9(0xc8)], 0x12df * -0x1 + -0x19b2 * 0x1 + -0x2c91 * -0x1) ? I : undefined,
            'include': [
                {
                    'model': Contact_1[a9(0xbb)],
                    'as': y[a8(0x72)],
                    'include': [
                        y[a9(0xc4)],
                        y[a9(0xbe)],
                        {
                            'association': y[a9(0xa1)],
                            'attributes': [
                                'id',
                                y[a8(0xa7)]
                            ]
                        }
                    ]
                },
                {
                    'model': User_1[a8(0xbb)],
                    'as': y[a9(0xcb)],
                    'attributes': [
                        'id',
                        y[a9(0xa7)],
                        y[a8(0xa2)]
                    ]
                },
                {
                    'association': y[a8(0x7f)],
                    'attributes': [
                        'id',
                        y[a9(0xa7)],
                        y[a9(0x87)],
                        y[a9(0xba)],
                        y[a8(0x7e)],
                        y[a9(0xaf)],
                        y[a9(0x9f)]
                    ]
                }
            ]
        });
        if (L) {
            logger_1[a8(0x9e)][a8(0x78)](y[a8(0xb6)]);
            let U = L[a9(0xcf)];
            const V = L[a8(0x8f)];
            y[a9(0xae)](L[a8(0xcf)], y[a9(0x7a)]) && (U = y[a9(0xb7)]);
            const W = {};
            W[a8(0x9a)] = ![], W[a8(0xb3) + 'e'] = B[-0xb2 * -0xb + -0x22f7 * 0x1 + -0x9 * -0x309][a9(0xc2)], W[a8(0xcf)] = U, W[a9(0x8f)] = V, await L[a9(0x89)](W), logger_1[a8(0x9e)][a8(0x78)](a9(0x71) + a9(0xd3) + '\x20' + V);
            const X = {};
            X[a8(0x90) + 'n'] = y[a9(0x72)];
            const Y = {};
            Y[a8(0x90) + 'n'] = y[a9(0xcb)];
            const Z = {};
            Z[a9(0x90) + 'n'] = y[a8(0xce)];
            const a0 = {};
            a0[a8(0x90) + 'n'] = y[a9(0x7f)];
            const a1 = {};
            a1[a9(0x85)] = [
                X,
                Y,
                Z,
                a0
            ], await L[a9(0xb8)](a1);
            const a2 = {};
            return a2[a8(0x81)] = C[a9(0x81)], a2[a8(0x8d)] = y[a9(0x9c)], a2[a8(0x83)] = L, (0x233 * -0xe + -0x4c5 + 0x238f, socketEmit_1[a9(0xbb)])(a2), L;
        }
        const M = {};
        M[a8(0xcf)] = y[a8(0xb7)], M[a9(0xa3)] = a8(0xc7) + A, M[a9(0xb3) + 'e'] = B[-0xb9d * 0x1 + -0xa3 * 0x19 + -0x1 * -0x1b88][a8(0xc2)], M[a8(0xd0)] = z, M[a8(0xca)] = C['id'], M[a8(0x81)] = C[a8(0x81)];
        const N = await Ticket_1[a8(0xbb)][a8(0x8e)](M), O = {};
        O[a9(0x90) + 'n'] = y[a9(0x72)];
        const P = {};
        P[a8(0x90) + 'n'] = y[a9(0xcb)];
        const Q = {};
        Q[a8(0x90) + 'n'] = y[a8(0xce)];
        const R = {};
        R[a9(0x90) + 'n'] = y[a8(0x7f)];
        const S = {};
        S[a9(0x85)] = [
            O,
            P,
            Q,
            R
        ], await N[a9(0xb8)](S);
        const T = {};
        return T[a8(0x81)] = C[a9(0x81)], T[a8(0x8d)] = y[a8(0x9c)], T[a9(0x83)] = N, (-0x22bf + -0x1 * -0x67a + 0x1c45 * 0x1, socketEmit_1[a8(0xbb)])(T), N;
    };
exports[a6(0xbb)] = CreateOrUpdateTicketService;