'use strict';
const a3 = b, a4 = b;
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (-0x4 * 0x683 + -0x1 * 0x257d + 0x17 * 0x2cf);
        let h = e[f];
        return h;
    }, b(c, d);
}
(function (c, d) {
    const a1 = b, a2 = b, e = c();
    while (!![]) {
        try {
            const f = -parseInt(a1(0x1da)) / (-0x2572 + 0x2498 + -0x1 * -0xdb) * (-parseInt(a1(0x156)) / (-0x1aa8 + -0x1 * 0x481 + -0x1 * -0x1f2b)) + -parseInt(a1(0x193)) / (-0x4 * -0xf1 + -0x1 * 0x26e6 + 0x2325) * (parseInt(a2(0x17e)) / (-0x7 * 0x455 + 0x1d3 * -0xb + 0x1934 * 0x2)) + parseInt(a1(0x118)) / (-0x10e * -0x2 + 0x1f22 * -0x1 + 0x1d0b) + parseInt(a2(0x150)) / (0xb96 + 0x9d * 0xb + -0x124f) + -parseInt(a2(0x128)) / (0xe5b + 0x28 * 0x7f + -0x222c) + -parseInt(a1(0x13f)) / (-0x25d5 + -0xc91 + 0x326e) * (parseInt(a1(0x140)) / (0x605 * 0x5 + 0x1d45 + -0x3b55)) + -parseInt(a2(0x14b)) / (0x238d + 0x3 * -0x625 + 0x88a * -0x2) * (-parseInt(a1(0x131)) / (0x26de + -0x26fb + 0x28));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, -0xe3ded + -0x1 * -0x37ac9 + -0x1 * -0x13a5c1));
var __importDefault = this && this[a3(0x1a3) + a3(0x19c)] || function (c) {
    const a5 = a4;
    return c && c[a5(0x1bb)] ? c : { 'default': c };
};
const B = {};
function a() {
    const aa = [
        '144vpxxoa',
        '\x0a\x20\x20\x20\x20\x20\x20and',
        'tmFSO',
        'urs',
        'ticketId\x22\x0a',
        'etServices',
        '/ShowTicke',
        '../../../m',
        'rTvSE',
        'fault',
        'icketId\x22\x0a\x20',
        'sDnPt',
        '../../Tick',
        'ticketId',
        'mepfX',
        'uvFhZ',
        '__importDe',
        'XBQIu',
        'dMessageSe',
        'vFJtU',
        'where',
        'default',
        'rvice',
        'userId',
        'Haycd',
        'BusinessHo',
        'zDiHF',
        'vxhEo',
        'OwQBr',
        'mService',
        'zbFSo',
        'integratio',
        'Integratio',
        'elpers/Get',
        'tService',
        'SnCBN',
        'nId',
        'eatedAt\x22\x20,',
        'ageService',
        'nsID',
        '__esModule',
        'estamp',
        'TicketServ',
        'msg',
        '\x20and\x20\x22from',
        'tion',
        'QueryTypes',
        'maxRetries',
        'findOne',
        'EGEJX',
        'Flow',
        'retriesLim',
        'maZaY',
        'ticket:upd',
        'messageTim',
        'meLqs',
        'replacemen',
        'ate',
        'itUserDefi',
        '\x20\x20\x20\x20\x20and\x20t',
        'HWsmW',
        'erty',
        'configurat',
        'HH:mm',
        'BussinessH',
        'pending',
        'ftvCU',
        'sKbvm',
        'Formato\x20de',
        'oriao',
        'KcizJ',
        '41NbdALs',
        'update',
        'getDay',
        'trQKn',
        'ets\x22\x20t\x0a\x20\x20\x20',
        '\x20\x20\x20where\x20t',
        'QVkpm',
        '2\x20where\x20m2',
        'vCink',
        'cguds',
        'ticket',
        '5753125ZzIjIx',
        'ing',
        'UpJbH',
        'businessHo',
        'vLDlZ',
        'FOtef',
        'date-fns',
        'bot',
        'key',
        'aHXrW',
        'timestamp.',
        '.id\x20=\x20m.\x22t',
        'number',
        'ct\x20max(m2.',
        'KioNo',
        'read',
        '4736732JCGrVR',
        '/CreateLog',
        '.\x22ticketId',
        'desconheci',
        'tenantId',
        'hr1',
        'hr2',
        'SELECT',
        'IRWEA',
        '184415EGBBVK',
        '.\x22createdA',
        'findByPk',
        'bWXsj',
        '\x22\x20m,\x20\x22Tick',
        'sequelize',
        'isWithinIn',
        '\x20\x20\x20\x20\x20and\x20m',
        'ions',
        '\x22\x20=\x20true\x0a\x20',
        'jdfWn',
        'select\x20m.b',
        'flow',
        'cSxjc',
        '86816AAShdz',
        '711notwbk',
        'payload',
        'eSGvm',
        'atabase',
        'zPrTI',
        'IyZLa',
        'terval',
        'NoISX',
        'NxETr',
        'query',
        'WGMrE',
        '80JEErNh',
        'mgpJW',
        '.id\x20=\x20',
        'oursRetrie',
        'timestamp',
        '5855136yoPtVG',
        '../../Mess',
        'body',
        'closed',
        'ssageSyste',
        'ketEmit',
        '19976fsNvVi',
        '\x22)\x20from\x20\x22M',
        'Whbkp',
        'messageBus',
        '../../../h',
        'status',
        'odels/Sett',
        'from',
        '\x20m.\x22fromMe',
        'nodeList',
        'fromUnixTi',
        'elpers/soc',
        'useIntegra',
        'type',
        'ice',
        'odels/Chat',
        'isGroup',
        '../../Tena',
        '\x20mensagem\x20',
        'ody,\x20m.\x22cr',
        'Me\x22\x20=\x20true',
        'defineProp',
        '\x20\x22Messages',
        'dAt\x22\x20,\x20m.\x22',
        'ntServices',
        'cQFZA',
        'direction',
        '/ShowBusin',
        'essHoursAn',
        '\x20m.\x22update',
        't\x22\x20=\x20(sele',
        'queueId',
        'parse',
        'hr3',
        'message',
        'inessHours',
        '\x20\x20\x20\x20\x20\x20from',
        'sendType',
        'essages\x22\x20m',
        'value',
        '46152niquxR',
        'do\x20ou\x20sem\x20',
        '\x22\x20=\x20',
        'fromMe',
        'RyJsE',
        'OURYq',
        'subHours',
        'chatFlowId',
        'ciHst',
        'find',
        '../../../d',
        '\x22createdAt',
        's/CreateMe',
        'GjDWt',
        'itQueue',
        'yvpgC',
        'Ixfar',
        'error',
        'hr4',
        'VtumL',
        'day'
    ];
    a = function () {
        return aa;
    };
    return a();
}
B[a4(0x17d)] = !![], Object[a4(0x16b) + a3(0x1d0)](exports, a4(0x1bb), B);
const date_fns_1 = require(a3(0x11e)), sequelize_1 = require(a3(0x136)), ShowBusinessHoursAndMessageService_1 = __importDefault(require(a3(0x167) + a4(0x16e) + a3(0x171) + a4(0x172) + a4(0x1a5) + a3(0x1a9))), CreateMessageSystemService_1 = __importDefault(require(a4(0x151) + a3(0x1b9) + a4(0x18a) + a4(0x154) + a4(0x1b0))), database_1 = __importDefault(require(a4(0x188) + a4(0x143))), Setting_1 = __importDefault(require(a4(0x19a) + a3(0x15c) + a4(0x119))), CreateLogTicketService_1 = __importDefault(require(a4(0x19f) + a3(0x198) + a4(0x129) + a3(0x1bd) + a3(0x164))), socketEmit_1 = __importDefault(require(a4(0x15a) + a3(0x161) + a4(0x155))), ShowTicketService_1 = __importDefault(require(a3(0x19f) + a4(0x198) + a3(0x199) + a3(0x1b5))), ChatFlow_1 = __importDefault(require(a4(0x19a) + a4(0x165) + a4(0x1c5))), GetIntegrationsID_1 = __importDefault(require(a4(0x15a) + a3(0x1b4) + a3(0x1b3) + a3(0x1ba))), verifyBusinessHours = async (l, m) => {
        const a6 = a4, a7 = a4, n = {
                'aHXrW': function (q, r) {
                    return q === r;
                },
                'tmFSO': a6(0x1a2),
                'vLDlZ': function (q, r) {
                    return q !== r;
                },
                'jdfWn': a6(0x183),
                'cQFZA': a7(0x18e),
                'meLqs': function (q, r) {
                    return q === r;
                },
                'IRWEA': a7(0x13e),
                'rTvSE': a6(0x1d7) + a7(0x168) + a6(0x12b) + a7(0x17f) + a6(0x122),
                'mepfX': function (q, r) {
                    return q === r;
                },
                'KioNo': function (q, r) {
                    return q !== r;
                },
                'oriao': a7(0x153),
                'ciHst': a7(0x1d2),
                'UpJbH': function (q, r) {
                    return q === r;
                },
                'GjDWt': function (q, r) {
                    return q && r;
                },
                'VtumL': function (q, r) {
                    return q !== r;
                },
                'cguds': a6(0x115),
                'QVkpm': a7(0x19e),
                'Haycd': function (q, r) {
                    return q === r;
                },
                'eSGvm': a6(0x1c6) + a7(0x18c),
                'ftvCU': a6(0x1c6) + a7(0x1cd) + 'ne',
                'maZaY': a6(0x1a4),
                'zDiHF': function (q, r) {
                    return q === r;
                },
                'SnCBN': a6(0x124),
                'IyZLa': function (q, r) {
                    return q !== r;
                },
                'NxETr': a7(0x1d6),
                'zbFSo': a7(0x134),
                'RyJsE': function (q, r) {
                    return q === r;
                },
                'FOtef': a6(0x1af),
                'KcizJ': function (q, r) {
                    return q === r;
                },
                'zPrTI': a6(0x1cf),
                'mgpJW': a7(0x1ae),
                'EGEJX': a6(0x1c8) + a6(0x1cc),
                'trQKn': a6(0x1c2) + a7(0x1ac) + a7(0x196),
                'NoISX': function (q, r, s) {
                    return q(r, s);
                },
                'vFJtU': function (q, r) {
                    return q < r;
                },
                'WGMrE': function (q, r) {
                    return q + r;
                },
                'yvpgC': a7(0x11f),
                'Whbkp': a6(0x1d4)
            };
        let o = !![];
        const p = l[a6(0x120)]?.[a7(0x181)] ?? l[a6(0x181)] ?? (n[a6(0x1a1)](l[a6(0x170)], 'IN') && n[a6(0x1ca)](l[a6(0x178)][a6(0x15d)], 'me'));
        if (n[a6(0x126)](m[a7(0x15b)], n[a6(0x1d8)]) && !p && !m[a7(0x166)]) {
            const q = {};
            q[a6(0x12c)] = m[a6(0x12c)];
            const r = await (0xa * 0x21c + 0x6f * 0x2 + 0x2 * -0xafb, ShowBusinessHoursAndMessageService_1[a7(0x1a8)])(q), s = -0x1 * 0x550 + -0x3b * 0x14 + 0x1 * 0x9ef, t = ((() => {
                    const a8 = a6, a9 = a7;
                    if (n[a8(0x121)](n[a8(0x195)], n[a8(0x195)])) {
                        if (l[a9(0x1c9) + a9(0x1bc)]) {
                            if (n[a9(0x11c)](n[a8(0x13b)], n[a9(0x16f)]))
                                return (-0xb57 + -0x3 * -0xc6e + -0x49 * 0x5b, date_fns_1[a8(0x160) + 'me'])(l[a9(0x1c9) + a8(0x1bc)]);
                            else
                                f[a9(0x162) + a9(0x1c0)] = !![], g[a8(0x1b2) + a9(0x1b7)] = h;
                        }
                        if (l[a8(0x178)]?.[a9(0x14f)]) {
                            if (n[a9(0x1ca)](n[a9(0x130)], n[a9(0x130)])) {
                                const y = new Date(l[a8(0x178)][a8(0x14f)]);
                                return (-0x1bc8 + 0x8a * 0x42 + 0x4 * -0x1f3, date_fns_1[a9(0x184)])(y, s);
                            } else {
                                const A = {};
                                return A[a9(0x1a8)] = j, g && h[a9(0x1bb)] ? i : A;
                            }
                        }
                        throw new Error(n[a8(0x19b)]);
                    } else
                        return (0x96d * 0x1 + 0x9 * -0x18f + 0x24d * 0x2, e[a8(0x160) + 'me'])(f[a9(0x1c9) + a8(0x1bc)]);
                })()), u = r[a7(0x11b) + a6(0x196)][a6(0x187)](x => x[a6(0x192)] === t[a6(0x1dc)]());
            if (!u)
                return o;
            if (n[a6(0x1ca)](u[a7(0x163)], 'O'))
                return o;
            const v = (0xbb5 + -0x916 + -0x3d * 0xb, date_fns_1[a7(0x137) + a7(0x146)])(t, {
                    'start': (0x1ad1 + 0x2294 + -0x3d65, date_fns_1[a7(0x176)])(u[a6(0x12d)], n[a7(0x186)], new Date()),
                    'end': (-0xa8d + 0x1d0f + -0x1282, date_fns_1[a7(0x176)])(u[a6(0x12e)], n[a6(0x186)], new Date())
                }), w = (0x17b * -0x2 + 0xd3 * 0x1 + 0x223, date_fns_1[a6(0x137) + a7(0x146)])(t, {
                    'start': (0x1594 + -0xd1b * 0x1 + -0x879, date_fns_1[a6(0x176)])(u[a7(0x177)], n[a6(0x186)], new Date()),
                    'end': (-0x178d + -0x2019 + -0x11 * -0x346, date_fns_1[a6(0x176)])(u[a6(0x190)], n[a6(0x186)], new Date())
                });
            if (n[a7(0x11a)](u[a7(0x163)], 'C') || n[a7(0x18b)](!v, !w)) {
                o = ![];
                if (n[a7(0x1a1)](m[a7(0x1aa)], null) || n[a7(0x1a1)](m[a7(0x175)], null))
                    try {
                        const H = await ChatFlow_1[a6(0x1a8)][a7(0x133)](m[a6(0x185)]);
                        if (H) {
                            const I = H[a7(0x13d)][a6(0x15f)][a7(0x187)](J => J[a6(0x163)] === a6(0x1d1) + a7(0x139));
                            if (I) {
                                const {outOpenHours: J} = I[a7(0x1d1) + a6(0x139)], K = J[a6(0x163)], {destiny: L} = J;
                                if (n[a7(0x191)](L, null)) {
                                    if (n[a6(0x126)](n[a6(0x116)], n[a7(0x113)])) {
                                        const M = {
                                                'botRetries': 0x0,
                                                'lastInteractionBot': new Date()
                                            }, N = {
                                                'ticketId': m['id'],
                                                'type': n[a6(0x1ab)](K, 0xdef + -0x191f + -0x3bb * -0x3) ? n[a7(0x142)] : n[a7(0x1d5)]
                                            };
                                        if (n[a6(0x1ca)](K, -0x1 * 0x156a + -0x10cb + -0x43 * -0x92)) {
                                            if (n[a7(0x126)](n[a7(0x1c7)], n[a7(0x1c7)]))
                                                Q[a7(0x18f)](y);
                                            else {
                                                M[a6(0x175)] = L, N[a6(0x175)] = L;
                                                const S = await (-0x4 * 0x27a + -0x113c + 0x2 * 0xd92, GetIntegrationsID_1[a7(0x1a8)])(L);
                                                if (n[a7(0x1ad)](typeof S, n[a7(0x1b6)])) {
                                                    if (n[a7(0x145)](n[a6(0x148)], n[a7(0x1b1)]))
                                                        M[a6(0x162) + a6(0x1c0)] = !![], M[a7(0x1b2) + a7(0x1b7)] = S;
                                                    else {
                                                        if (l[a6(0x1c9) + a7(0x1bc)])
                                                            return (-0x255a + -0x1f60 + 0x44ba, u[a6(0x160) + 'me'])(v[a7(0x1c9) + a7(0x1bc)]);
                                                        if (o[a6(0x178)]?.[a6(0x14f)]) {
                                                            const U = new w(x[a6(0x178)][a7(0x14f)]);
                                                            return (0x33a + 0x8af + -0xbe9, y[a7(0x184)])(U, z);
                                                        }
                                                        throw new t(n[a7(0x19b)]);
                                                    }
                                                } else
                                                    n[a6(0x182)](n[a6(0x11d)], n[a7(0x11d)]) ? (M[a7(0x162) + a6(0x1c0)] = ![], M[a7(0x1b2) + a7(0x1b7)] = null) : (z[a7(0x1aa)] = D, E[a7(0x1aa)] = j);
                                            }
                                        }
                                        n[a6(0x1d9)](K, -0x8e * 0x1 + -0x1d65 + 0x1df5) && (n[a7(0x121)](n[a7(0x144)], n[a6(0x14c)]) ? (Q[a6(0x162) + a7(0x1c0)] = ![], y[a7(0x1b2) + a7(0x1b7)] = null) : (M[a6(0x1aa)] = L, N[a7(0x1aa)] = L));
                                        await m[a6(0x1db)](M);
                                        const O = {};
                                        O['id'] = m['id'], O[a6(0x12c)] = m[a7(0x12c)];
                                        const P = await (0x1 * 0x2467 + 0x1310 * 0x2 + -0x4a87, ShowTicketService_1[a6(0x1a8)])(O), Q = {};
                                        Q[a6(0x12c)] = m[a6(0x12c)], Q[a7(0x163)] = n[a7(0x1c4)], Q[a6(0x141)] = P, (0xed5 + -0x1a45 + 0xb70, socketEmit_1[a6(0x1a8)])(Q), await (0x135e * 0x2 + 0x251 * 0xb + -0x1 * 0x4037, CreateLogTicketService_1[a6(0x1a8)])(N);
                                    } else {
                                        const X = new z(D[a6(0x178)][a6(0x14f)]);
                                        return (-0x299 + -0x117a * 0x1 + 0x1413, E[a7(0x184)])(X, j);
                                    }
                                }
                            }
                        }
                    } catch (X) {
                        console[a6(0x18f)](X);
                    }
                const x = a6(0x13c) + a7(0x169) + a6(0x1b8) + a6(0x173) + a6(0x16d) + a7(0x197) + a7(0x17a) + a6(0x16c) + a6(0x135) + a6(0x111) + a7(0x112) + a7(0x123) + a7(0x19d) + a6(0x1ce) + a6(0x14d) + m['id'] + (a7(0x194) + a7(0x15e) + a7(0x13a) + a6(0x138) + a7(0x132) + a6(0x174) + a7(0x125) + a6(0x189) + a7(0x157) + a7(0x17c) + a7(0x114) + a7(0x12a) + a6(0x180)) + m['id'] + (a7(0x1bf) + a7(0x16a) + '\x20)'), y = {};
                y[a6(0x1a0)] = m['id'];
                const z = {};
                z[a6(0x1cb) + 'ts'] = y, z[a6(0x163)] = sequelize_1[a7(0x1c1)][a7(0x12f)];
                const A = await database_1[a7(0x1a8)][a7(0x149)](x, z), C = '' + r[a7(0x159) + a6(0x179)];
                o = ![];
                const D = {};
                D[a7(0x120)] = n[a7(0x110)], D[a7(0x12c)] = m[a7(0x12c)];
                const E = {};
                E[a6(0x1a7)] = D;
                const F = await Setting_1[a7(0x1a8)][a7(0x1c3)](E), G = F ? n[a7(0x147)](parseInt, F[a7(0x17d)], 0x1be6 + -0xbe0 + 0xffc * -0x1) : 0x1f62 + -0x3 * 0xbc3 + 0x7ce * 0x1;
                if (n[a7(0x1a6)](m[a7(0x1d3) + a6(0x14e) + 's'], G)) {
                    await m[a7(0x1db)]({ 'BussinessHoursRetries': n[a6(0x14a)](m[a7(0x1d3) + a6(0x14e) + 's'], 0x5ec + -0x5 * -0x4f + -0x776) });
                    const Y = {};
                    Y[a6(0x152)] = r[a7(0x159) + a7(0x179)], Y[a7(0x181)] = !![], Y[a7(0x127)] = !![], Y[a7(0x17b)] = n[a6(0x18d)], Y[a7(0x12c)] = m[a7(0x12c)];
                    const Z = Y, a0 = {};
                    a0[a7(0x1be)] = Z, a0[a7(0x12c)] = m[a6(0x12c)], a0[a7(0x117)] = m, a0[a6(0x17b)] = Z[a6(0x17b)], a0[a7(0x15b)] = n[a6(0x158)], await (0xe7f * -0x1 + 0x25da + -0x175b, CreateMessageSystemService_1[a6(0x1a8)])(a0);
                }
            }
        }
        return o;
    };
exports[a3(0x1a8)] = verifyBusinessHours;