'use strict';
function a() {
    const Z = [
        'Simzc',
        'join',
        'closed',
        'lte',
        '12236RyITVo',
        'chat:ack',
        'hCqJw',
        'peg',
        'cwCzh',
        'sgUlj',
        'id:\x20',
        'contact',
        'ers/socket',
        'qZZpP',
        '2079868qBGlEq',
        'UzRUL',
        'createdAt',
        'fluent-ffm',
        '655386KokBdI',
        'Error\x20mess',
        '../../help',
        'Emit',
        'WlFGi',
        'defineProp',
        'video',
        'update',
        'includes',
        'readFile',
        '../../util',
        'toFormat',
        'tenantId',
        's/logger',
        'type',
        'nant:\x20',
        'mediaType',
        '__esModule',
        '8733888AlxLvr',
        'saveToFile',
        'messageId',
        'cIniZ',
        'OpXPq',
        'mp4',
        'sequelize',
        'default',
        'ls/Message',
        'fault',
        'domTime',
        'ptt',
        'fs/promise',
        'DxeUZ',
        'wNXxq',
        'messengerI',
        'log',
        '\x20message\x20(',
        'ls/Ticket',
        'logger',
        's/sleepRan',
        'status',
        'text',
        '16svXmrd',
        'quotedMsg',
        'ticket',
        'tamCn',
        'age\x20is\x20(te',
        'hYZod',
        'LiyRl',
        'Message\x20Up',
        'sended',
        'path',
        'tFrTp',
        'filename',
        'public',
        'audio',
        'value',
        '4328802vDwNRE',
        'WJjys',
        'payload',
        'BwvND',
        'sendImage',
        '__importDe',
        'UgLvo',
        'applicatio',
        '../../mode',
        'mTime',
        'image',
        'document',
        'Error\x20send',
        'yRIyt',
        'end',
        'sleepRando',
        'dataValues',
        'ICvoM',
        ')::\x20',
        '51cHHceC',
        'toBuffer',
        'yrnjr',
        'kllRo',
        'sendFile',
        'hEDGw',
        'where',
        'erty',
        'jpeg',
        'sendText',
        '\x20|\x20Ticket:',
        'ASC',
        'chat',
        'axtok',
        'date\x20ok',
        'ack',
        'info',
        'oICKD',
        'sharp',
        'split',
        'pending',
        'messenger',
        '2458265BztFyd',
        'body',
        'findAll',
        'mediaUrl',
        'sendAudio',
        '.mp4',
        'file',
        'sendVideo',
        'timestamp',
        'OdpWU',
        'qkhvz',
        '766178nnWcGw',
        'error',
        'mediaName'
    ];
    a = function () {
        return Z;
    };
    return a();
}
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (0x1834 + -0x2334 * 0x1 + 0x1 * 0xcd9);
        let h = e[f];
        return h;
    }, b(c, d);
}
const S = b, T = b;
(function (c, d) {
    const Q = b, R = b, e = c();
    while (!![]) {
        try {
            const f = -parseInt(Q(0x23b)) / (0x13a3 + -0xb11 * 0x3 + 0xd91) * (-parseInt(R(0x1e2)) / (-0x2 * 0x1d4 + 0x1 * -0xf40 + 0x1 * 0x12ea)) + parseInt(Q(0x1f0)) / (0x1e62 + 0x1321 + 0x20 * -0x18c) + -parseInt(R(0x1ec)) / (0xf + 0x1 * 0x229 + -0x2 * 0x11a) + parseInt(R(0x251)) / (-0x1040 + -0x10d * 0x25 + 0x4e * 0xb5) + parseInt(R(0x228)) / (0x2476 + -0xc7 * -0x20 + -0x3d50) + -parseInt(Q(0x1db)) / (-0x3 * 0x853 + 0x1066 + 0x89a) * (-parseInt(Q(0x219)) / (-0x451 * -0x1 + -0xb * -0xc5 + -0xcc0)) + -parseInt(Q(0x202)) / (0x13cc + 0x6b5 + -0x1a78);
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, -0x23c2a + -0x1 * -0x504dd + -0x2 * -0x235bd));
var __importDefault = this && this[S(0x22d) + S(0x20b)] || function (c) {
    const U = T;
    return c && c[U(0x201)] ? c : { 'default': c };
};
const q = {};
q[T(0x227)] = !![], Object[S(0x1f5) + T(0x242)](exports, S(0x201), q);
const promises_1 = require(S(0x20e) + 's'), fluent_ffmpeg_1 = __importDefault(require(T(0x1ef) + T(0x1e5))), path_1 = require(S(0x222)), sequelize_1 = require(T(0x208)), sharp_1 = __importDefault(require(T(0x24d))), socketEmit_1 = __importDefault(require(T(0x1f2) + T(0x1ea) + T(0x1f3))), Message_1 = __importDefault(require(T(0x230) + T(0x20a))), Ticket_1 = __importDefault(require(T(0x230) + S(0x214))), logger_1 = require(T(0x1fa) + T(0x1fd)), sleepRandomTime_1 = require(T(0x1fa) + S(0x216) + S(0x20c)), MessengerSendMessagesSystem = async (l, m) => {
        const V = T, W = T, n = {
                'sgUlj': V(0x207),
                'ICvoM': V(0x1dc),
                'yrnjr': W(0x236),
                'OpXPq': W(0x24f),
                'axtok': W(0x1e9),
                'BwvND': V(0x21b),
                'hYZod': W(0x1e0),
                'hEDGw': V(0x250),
                'qZZpP': W(0x21a),
                'qkhvz': W(0x1ee),
                'oICKD': W(0x246),
                'DxeUZ': W(0x247),
                'WJjys': W(0x218),
                'WlFGi': W(0x225),
                'OdpWU': function (t, u) {
                    return t === u;
                },
                'tamCn': W(0x226),
                'kllRo': W(0x20d),
                'wNXxq': function (t, u) {
                    return t === u;
                },
                'hCqJw': V(0x232),
                'cIniZ': W(0x1f6),
                'UzRUL': V(0x22f) + 'n',
                'yRIyt': V(0x257),
                'UgLvo': W(0x233),
                'tFrTp': W(0x221),
                'LiyRl': W(0x1e3),
                'Simzc': W(0x220) + V(0x249),
                'cwCzh': function (t, u) {
                    return t(u);
                }
            }, o = { [sequelize_1['Op']['is']]: null }, p = {
                'fromMe': !![],
                'messageId': o,
                'status': n[V(0x206)],
                [sequelize_1['Op']['or']]: [
                    { 'scheduleDate': { [sequelize_1['Op'][V(0x1e1)]]: new Date() } },
                    { 'scheduleDate': { [sequelize_1['Op']['is']]: null } }
                ]
            }, r = await Message_1[W(0x209)][V(0x253)]({
                'where': p,
                'include': [
                    n[V(0x248)],
                    {
                        'model': Ticket_1[W(0x209)],
                        'as': n[W(0x22b)],
                        'where': {
                            'tenantId': m,
                            [sequelize_1['Op']['or']]: {
                                'status': { [sequelize_1['Op']['ne']]: n[V(0x21e)] },
                                'isFarewellMessage': !![]
                            },
                            'channel': n[W(0x240)],
                            'whatsappId': l['id']
                        },
                        'include': [n[V(0x248)]]
                    },
                    {
                        'model': Message_1[W(0x209)],
                        'as': n[V(0x1eb)],
                        'include': [n[W(0x248)]]
                    }
                ],
                'order': [[
                        n[W(0x1da)],
                        n[V(0x24c)]
                    ]]
            });
        let s;
        for (const t of r) {
            const u = t, {ticket: v} = u, w = v[W(0x1e9)][W(0x211) + 'd'];
            try {
                if (![
                        n[V(0x20f)],
                        n[W(0x229)]
                    ][V(0x1f8)](u[V(0x200)]) && u[W(0x1dd)]) {
                    const D = (-0x1110 + 0x116b + -0x7 * 0xd, path_1[V(0x1df)])(__dirname, '..', '..', '..', n[W(0x1f4)]), E = (0x4b7 * -0x5 + 0x1a22 + -0x5 * 0x83, path_1[V(0x1df)])(D, u[W(0x1dd)]), F = await (-0x202 * -0x9 + -0x158 + -0x2 * 0x85d, promises_1[V(0x1f9)])(E);
                    console[V(0x212)](E);
                    if (n[V(0x1d9)](u[W(0x200)], n[V(0x21c)]) || n[W(0x1d9)](u[W(0x200)], n[W(0x23e)])) {
                        const G = u[V(0x1dd)][W(0x24e)]('.'), H = (-0x1562 + -0x1da + 0x173c, path_1[W(0x1df)])(D, G[-0x1dc9 + -0x1c7d + -0x3a46 * -0x1] + W(0x256));
                        await new Promise((J, K) => {
                            const X = V, Y = V;
                            (-0x1ee4 + -0x121 * 0x11 + 0x3215, fluent_ffmpeg_1[X(0x209)])(E)[Y(0x1fb)](n[X(0x1e7)])['on'](n[Y(0x239)], L => K(L))['on'](n[X(0x23d)], () => J(!![]))[X(0x203)](H);
                        });
                        const I = await (-0xd4 + 0x2594 + 0xc0 * -0x31, promises_1[W(0x1f9)])(H);
                        s = await l[W(0x255)](w, I);
                    }
                    if (n[V(0x210)](u[W(0x200)], n[V(0x1e4)])) {
                        const J = await (-0x35 * 0x65 + -0x242e + 0x25 * 0x18b, sharp_1[V(0x209)])(F)[W(0x243)]()[W(0x23c)](), K = {};
                        K[V(0x224)] = u[V(0x1dd)], s = await l[W(0x22c)](w, J, K);
                    }
                    if (n[V(0x210)](u[W(0x200)], n[V(0x205)])) {
                        const L = {};
                        L[W(0x224)] = u[V(0x1dd)], s = await l[V(0x258)](w, F, L);
                    }
                    if ([
                            n[V(0x1ed)],
                            n[V(0x235)],
                            n[W(0x22e)]
                        ][V(0x1f8)](u[V(0x200)])) {
                        const M = {};
                        M[W(0x224)] = u[W(0x1dd)], s = await l[V(0x23f)](w, F, M);
                    }
                }
                [
                    n[W(0x20f)],
                    n[W(0x229)]
                ][V(0x1f8)](u[W(0x200)]) && !u[V(0x1dd)] && (s = await l[W(0x244)](w, u[V(0x252)]));
                const x = {
                    ...u,
                    ...s
                };
                x['id'] = u['id'], x[V(0x259)] = u[W(0x259)], x[W(0x204)] = s[V(0x204)], x[V(0x217)] = n[W(0x223)], x[V(0x24a)] = 0x2;
                const y = x, z = { ...y }, A = {};
                A['id'] = u['id'];
                const B = {};
                B[V(0x241)] = A, await Message_1[W(0x209)][V(0x1f7)](z, B);
                const C = {};
                C[W(0x1fc)] = v[V(0x1fc)], C[W(0x1fe)] = n[W(0x21f)], C[W(0x22a)] = { ...u[W(0x238)] }, C[W(0x22a)][V(0x254)] = u[W(0x254)], C[W(0x22a)]['id'] = u['id'], C[W(0x22a)][V(0x259)] = u[V(0x259)], C[W(0x22a)][V(0x204)] = s[W(0x204)], C[W(0x22a)][V(0x217)] = n[W(0x223)], C[W(0x22a)][W(0x24a)] = 0x2, (-0x3cc + -0x200d + 0x23d9, socketEmit_1[W(0x209)])(C), logger_1[V(0x215)][V(0x24b)](n[V(0x1de)]), await (-0x1 * 0x7c5 + -0x5d * 0xa + 0xb67, sleepRandomTime_1[V(0x237) + W(0x231)])({
                    'minMilliseconds': n[V(0x1e6)](Number, -0x1be5 + -0xa64 + 0x1 * 0x283d),
                    'maxMilliseconds': n[V(0x1e6)](Number, 0x26fe + 0x4 * 0x613 + -0x1 * 0x396e)
                });
            } catch (N) {
                const O = u['id'], P = u[V(0x21b)]['id'];
                logger_1[W(0x215)][V(0x1dc)](W(0x1f1) + W(0x21d) + W(0x1ff) + m + (W(0x245) + '\x20') + P + ')'), logger_1[V(0x215)][W(0x1dc)](W(0x234) + V(0x213) + W(0x1e8) + O + W(0x23a) + N);
            }
        }
    };
exports[S(0x209)] = MessengerSendMessagesSystem;