'use strict';
const C = b, D = b;
(function (c, d) {
    const A = b, B = b, e = c();
    while (!![]) {
        try {
            const f = parseInt(A(0x147)) / (-0x17 * -0x10a + 0x1945 + -0xd9 * 0x3a) + parseInt(B(0xce)) / (0x2423 + -0x6 * -0x423 + 0x3 * -0x1451) + parseInt(B(0x105)) / (0x7 * 0x26b + -0xb15 * 0x1 + -0x5d5) * (parseInt(B(0x134)) / (-0x49 * 0x29 + 0x1 * -0x1c67 + -0x12e * -0x22)) + -parseInt(B(0x114)) / (0x23f2 + -0xb7e + -0x186f) * (-parseInt(A(0xb5)) / (0x772 * -0x3 + -0xdc3 * -0x1 + 0x899)) + parseInt(A(0x117)) / (0x1 * -0x527 + 0xee5 + 0x33d * -0x3) + parseInt(B(0xc6)) / (-0x11ee + -0xd9 * 0x15 + 0x23c3) + -parseInt(A(0x100)) / (0xafa * -0x2 + -0x25e6 + 0x3be3);
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, 0x7ed87 * -0x1 + 0x3c236 + -0x17c * -0x92b));
function a() {
    const a5 = [
        'eJgSb',
        'value',
        'yeIgz',
        'logger',
        'rVerifyMes',
        'msg',
        'InLtn',
        'audio',
        'PtVYp',
        'baFRE',
        '354lVQIbe',
        '/messenger',
        'location',
        'message',
        'rRSJf',
        's/logger',
        'Message',
        'text',
        'jHLXq',
        'cZSWk',
        'video',
        'LMjeP',
        'JEXrk',
        'ZOSfe',
        'mXLUg',
        'SpvIK',
        'ILTAf',
        '4941304IatgPd',
        'PtMGx',
        'BusinessHo',
        'getMesseng',
        'JbktQ',
        'dcRob',
        'rIuYg',
        'whatsappId',
        '478756DKncUF',
        'CCCfL',
        'Sakqc',
        'JSKQX',
        'tenantId',
        'JAOwE',
        'sender',
        'defineProp',
        'cYuLf',
        '__esModule',
        'type',
        'sWLlJ',
        'timestamp',
        'hJSUW',
        'EAbWz',
        'DyGJH',
        'oFQxQ',
        '../TicketS',
        'Zfjgn',
        'ydjWp',
        'MYZen',
        'channel',
        'sWsQn',
        'object',
        'ndOrCreate',
        'ervices/Fi',
        'ggQzr',
        'YRWNO',
        'wuMeb',
        'iIiMf',
        'ers/Verify',
        'mid',
        'OKawj',
        'fallback',
        'rVerifyMed',
        'erBot',
        'GGdQP',
        'pURKx',
        'CiqFg',
        'qenfW',
        'CIHiL',
        'file',
        'MTOCb',
        'error',
        'PMtlV',
        'Uztlk',
        'ice',
        'cvmyw',
        'beukW',
        'rShowChann',
        '22857957Mpwzfw',
        'read',
        'PXpCc',
        'YIEGi',
        'rVerifyCon',
        '2604jAgyqz',
        'LdZGb',
        'default',
        'yDjrG',
        'TjOyD',
        'messenger',
        'bRZCU',
        'unreadMess',
        '../../libs',
        'erty',
        'ages',
        '../../util',
        'Jbdqx',
        'RgCoi',
        'fault',
        '6910LJgCFT',
        'isCampaign',
        'tact',
        '1652672yltviv',
        'gCrgI',
        'vices/help',
        '../ChatFlo',
        'ZVthp',
        'zTXjY',
        'CyzIC',
        'page',
        'fCBmP',
        'HwrRD',
        'RiuZj',
        'qiLNm',
        'rMarkRead',
        'uNZmS',
        'JKMpe',
        'FKTft',
        'kOgVS',
        'LizTw',
        'TBVSC',
        '../WbotSer',
        'isFarewell',
        'urs',
        'phuyV',
        'sChatFlowT',
        'PFqye',
        'sage',
        'length',
        'fgoYJ',
        'image',
        '3628IKLuRw',
        'tVudI',
        'aSoTF',
        'TicketServ',
        'ztotb',
        'shift',
        'iaMessage',
        'RPPFd',
        './Messenge',
        'messaging',
        'fbPageId',
        '__importDe',
        'contact',
        'bVsoV',
        'RJxGe',
        'EevoT',
        'Owuba',
        'Bot',
        'icket',
        '1196449PmGMEj',
        'vXaxj',
        'GSSRH',
        'luBzn',
        'VerifyStep',
        'wServices/',
        'MiUbT',
        'entry'
    ];
    a = function () {
        return a5;
    };
    return a();
}
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (0xa * 0x187 + 0x312 * -0x6 + 0x3ca);
        let h = e[f];
        return h;
    }, b(c, d);
}
var __importDefault = this && this[C(0x13f) + C(0x113)] || function (c) {
    const E = D;
    return c && c[E(0xd7)] ? c : { 'default': c };
};
const k = {};
k[C(0xac)] = !![], Object[D(0xd5) + C(0x10e)](exports, D(0xd7), k);
const logger_1 = require(C(0x110) + D(0xba)), FindOrCreateTicketService_1 = __importDefault(require(C(0xdf) + C(0xe7) + C(0xe6) + C(0x137) + C(0xfc))), messengerBot_1 = require(D(0x10d) + C(0xb6) + C(0x145)), MessengerVerifyContact_1 = __importDefault(require(C(0x13c) + D(0x104) + D(0x116))), MessengerVerifyMessage_1 = __importDefault(require(C(0x13c) + D(0xaf) + C(0x130))), MessengerVerifyMediaMessage_1 = __importDefault(require(C(0x13c) + D(0xf0) + D(0x13a))), VerifyStepsChatFlowTicket_1 = __importDefault(require(C(0x11a) + D(0xa8) + C(0xa7) + C(0x12e) + D(0x146))), MessengerMarkRead_1 = __importDefault(require(D(0x13c) + D(0x123))), MessengerShowChannel_1 = __importDefault(require(C(0x13c) + D(0xff) + 'el')), VerifyBusinessHours_1 = __importDefault(require(D(0x12a) + C(0x119) + D(0xec) + C(0xc8) + D(0x12c))), getMessageType = d => {
        const F = D, G = C, e = {};
        e[F(0xe2)] = function (i, j) {
            return i > j;
        }, e[G(0x124)] = G(0xbc), e[F(0x122)] = function (i, j) {
            return i === j;
        }, e[F(0x132)] = F(0x133), e[G(0x12d)] = function (i, j) {
            return i === j;
        }, e[F(0x12f)] = F(0xb2), e[F(0x138)] = function (i, j) {
            return i === j;
        }, e[G(0x10b)] = F(0xbf), e[G(0xe0)] = function (i, j) {
            return i === j;
        }, e[F(0xc5)] = G(0xb7), e[G(0xf4)] = F(0xf7), e[G(0xab)] = function (i, j) {
            return i === j;
        }, e[G(0x142)] = G(0xef);
        const f = e, {attachments: g} = d, h = g && f[G(0xe2)](g[F(0x131)], -0x8b6 + -0x193d + 0x21f3);
        if (d[G(0xbc)] && !h)
            return f[F(0x124)];
        if (h && f[F(0x122)](g[0x2 * -0x472 + -0x2d4 + 0x96 * 0x14][G(0xd8)], f[F(0x132)]))
            return f[F(0x132)];
        if (h && f[F(0x12d)](g[-0x2182 + -0xad * 0x13 + -0x153 * -0x23][G(0xd8)], f[G(0x12f)]))
            return f[G(0x12f)];
        if (h && f[G(0x138)](g[-0x1 * 0xa0 + 0x63c + 0x2ce * -0x2][F(0xd8)], f[F(0x10b)]))
            return f[G(0x10b)];
        if (h && f[F(0xe0)](g[0x1767 + 0xe50 + -0x25b7][G(0xd8)], f[G(0xc5)]))
            return f[F(0xc5)];
        if (h && f[G(0x122)](g[0x1 * -0x1004 + -0x1f6 * -0xb + -0x58e][F(0xd8)], f[F(0xf4)]))
            return f[F(0xf4)];
        if (h && f[G(0xab)](g[-0x626 + 0x23c + -0x14e * -0x3][G(0xd8)], f[F(0x142)]))
            return f[F(0x142)];
    }, MessengerHandleMessage = async c => {
        const H = C, I = D, d = {
                'JKMpe': function (e) {
                    return e();
                },
                'LMjeP': function (e, f) {
                    return e > f;
                },
                'JbktQ': H(0xbc),
                'Uztlk': function (e, f) {
                    return e === f;
                },
                'jHLXq': H(0x133),
                'YRWNO': I(0xb2),
                'yDjrG': I(0xbf),
                'GGdQP': H(0xb7),
                'Sakqc': H(0xf7),
                'EAbWz': H(0xef),
                'aSoTF': function (e, f) {
                    return e(f);
                },
                'wuMeb': function (e) {
                    return e();
                },
                'YIEGi': function (e, f) {
                    return e !== f;
                },
                'TjOyD': H(0x11c),
                'tVudI': H(0x11e),
                'pURKx': H(0xcf),
                'mXLUg': I(0x10a),
                'SpvIK': I(0xb9),
                'MTOCb': H(0x127),
                'RgCoi': function (e, f) {
                    return e !== f;
                },
                'CIHiL': I(0xd9),
                'beukW': H(0xa6),
                'GSSRH': H(0xc1)
            };
        return new Promise((e, f) => {
            const L = H, N = H, g = {
                    'PXpCc': function (h) {
                        const J = b;
                        return d[J(0x125)](h);
                    },
                    'sWsQn': function (h, i) {
                        const K = b;
                        return d[K(0xc0)](h, i);
                    },
                    'yeIgz': d[L(0xca)],
                    'ydjWp': function (h, i) {
                        const M = L;
                        return d[M(0xfb)](h, i);
                    },
                    'baFRE': d[N(0xbd)],
                    'cZSWk': d[L(0xe9)],
                    'JSKQX': function (h, i) {
                        const O = L;
                        return d[O(0xfb)](h, i);
                    },
                    'Owuba': d[N(0x108)],
                    'ggQzr': d[L(0xf2)],
                    'ZOSfe': d[L(0xd0)],
                    'RPPFd': d[N(0xdc)],
                    'JAOwE': function (h, i) {
                        const P = L;
                        return d[P(0x136)](h, i);
                    },
                    'MiUbT': function (h) {
                        const Q = N;
                        return d[Q(0xea)](h);
                    },
                    'CyzIC': function (h, i) {
                        const R = L;
                        return d[R(0x103)](h, i);
                    },
                    'PMtlV': d[N(0x109)],
                    'PtVYp': d[L(0x135)],
                    'dcRob': function (h, i) {
                        const S = L;
                        return d[S(0x103)](h, i);
                    },
                    'DyGJH': d[N(0xf3)],
                    'iIiMf': function (h, i) {
                        const T = N;
                        return d[T(0x136)](h, i);
                    },
                    'OKawj': d[L(0xc3)],
                    'InLtn': d[L(0xc4)],
                    'vXaxj': d[L(0xf8)],
                    'LdZGb': function (h, i) {
                        const U = L;
                        return d[U(0x103)](h, i);
                    },
                    'LizTw': function (h, i) {
                        const V = L;
                        return d[V(0x112)](h, i);
                    },
                    'oFQxQ': d[N(0xf6)],
                    'PtMGx': function (h, i) {
                        const W = N;
                        return d[W(0x112)](h, i);
                    },
                    'rIuYg': d[N(0xfe)],
                    'cYuLf': d[N(0xa5)]
                };
            ((async () => {
                const Y = N, a0 = L, h = {
                        'cvmyw': function (m, n) {
                            const X = b;
                            return g[X(0xe4)](m, n);
                        },
                        'ZVthp': g[Y(0xad)],
                        'HwrRD': function (m, n) {
                            const Z = Y;
                            return g[Z(0xe1)](m, n);
                        },
                        'hJSUW': g[Y(0xb4)],
                        'RiuZj': g[a0(0xbe)],
                        'TBVSC': function (m, n) {
                            const a1 = a0;
                            return g[a1(0xd1)](m, n);
                        },
                        'Jbdqx': g[Y(0x144)],
                        'qenfW': function (m, n) {
                            const a2 = Y;
                            return g[a2(0xd1)](m, n);
                        },
                        'fCBmP': g[Y(0xe8)],
                        'EevoT': g[a0(0xc2)],
                        'bVsoV': g[Y(0x13b)],
                        'FKTft': function (m, n) {
                            const a3 = Y;
                            return g[a3(0xd3)](m, n);
                        },
                        'gCrgI': function (m) {
                            const a4 = a0;
                            return g[a4(0xa9)](m);
                        }
                    };
                let i, j;
                const l = -0x757 + -0x772 * 0x1 + 0x4ee * 0x3;
                try {
                    if (g[a0(0x11d)](g[a0(0xfa)], g[a0(0xfa)])) {
                        const n = {};
                        return n[a0(0x107)] = j, g && h[a0(0xd7)] ? i : n;
                    } else {
                        if (g[Y(0x11d)](c[Y(0xe5)], g[Y(0xb3)]))
                            return;
                        const n = c[a0(0xaa)][Y(0x139)](), o = n?.[a0(0x13d)][a0(0x139)](), p = {};
                        p[Y(0x13e)] = n['id'], i = await (0x4 * 0x301 + 0x1376 + -0x1f7a, MessengerShowChannel_1[a0(0x107)])(p);
                        if (!i)
                            return;
                        const q = await (-0x1 * 0x17b3 + -0x2270 + 0x7b * 0x79, messengerBot_1[a0(0xc9) + a0(0xf1)])(i['id']);
                        if (!o?.[Y(0xb8)] && o[a0(0x101)]) {
                            if (g[a0(0xcb)](g[Y(0xdd)], g[a0(0xdd)])) {
                                const {attachments: v} = e, w = v && h[a0(0xfd)](v[a0(0x131)], 0x86e + -0x368 + 0x1 * -0x506);
                                if (f[Y(0xbc)] && !w)
                                    return h[Y(0x11b)];
                                if (w && h[Y(0x120)](v[-0x19b5 * 0x1 + -0x1e7d + -0x1c19 * -0x2][Y(0xd8)], h[Y(0xdb)]))
                                    return h[a0(0xdb)];
                                if (w && h[a0(0x120)](v[0x1c35 + 0x1623 * -0x1 + 0x6 * -0x103][Y(0xd8)], h[Y(0x121)]))
                                    return h[a0(0x121)];
                                if (w && h[a0(0x129)](v[-0x12 * 0x1d7 + -0x1d2b + 0x3e49][a0(0xd8)], h[a0(0x111)]))
                                    return h[a0(0x111)];
                                if (w && h[a0(0xf5)](v[-0x293 + -0x1 * -0xf3a + 0x4f * -0x29][a0(0xd8)], h[Y(0x11f)]))
                                    return h[a0(0x11f)];
                                if (w && h[a0(0xf5)](v[-0x16b3 + -0x1069 + 0x2 * 0x138e][a0(0xd8)], h[a0(0x143)]))
                                    return h[a0(0x143)];
                                if (w && h[Y(0x129)](v[-0x2543 + 0x1 * -0x11f7 + 0x373a][Y(0xd8)], h[a0(0x141)]))
                                    return h[a0(0x141)];
                            } else {
                                (-0x3 * 0x803 + 0x12e * 0xe + -0x5 * -0x181, MessengerMarkRead_1[Y(0x107)])(o, i[Y(0xd2)]);
                                return;
                            }
                        }
                        j = await (0x1 * -0x120e + 0x716 + 0x3a8 * 0x3, MessengerVerifyContact_1[Y(0x107)])(o[a0(0xd4)], q, i[Y(0xd2)]);
                        const r = {
                                ...o,
                                'type': g[Y(0xeb)](getMessageType, o[Y(0xb8)]),
                                'fromMe': ![],
                                'body': o?.[Y(0xb8)]?.[Y(0xbc)] || '',
                                'timestamp': o[a0(0xda)],
                                'message_id': o[a0(0xb8)][Y(0xed)]
                            }, s = {};
                        s[a0(0x140)] = j, s[Y(0xcd)] = i['id'], s[a0(0x10c) + Y(0x10f)] = l, s[Y(0xd2)] = i[Y(0xd2)], s[Y(0xb0)] = r, s[a0(0xe3)] = g[Y(0xee)];
                        const t = await (-0x1 * -0x24e6 + 0xc9d + 0x1fb * -0x19, FindOrCreateTicketService_1[a0(0x107)])(s);
                        if (t?.[Y(0x115) + Y(0xbb)]) {
                            if (g[Y(0x11d)](g[Y(0xb1)], g[Y(0xb1)]))
                                g[a0(0xae)][a0(0xf9)](h), h[Y(0x126)](i, j);
                            else {
                                g[a0(0xa9)](e);
                                return;
                            }
                        }
                        if (t?.[a0(0x12b) + a0(0xbb)]) {
                            if (g[a0(0xe1)](g[a0(0xa4)], g[Y(0xa4)])) {
                                g[a0(0x102)](e);
                                return;
                            } else {
                                h[Y(0x118)](s);
                                return;
                            }
                        }
                        if (g[a0(0x106)](r[Y(0xd8)], g[a0(0xad)])) {
                            if (g[Y(0x128)](g[Y(0xde)], g[Y(0xde)])) {
                                g[a0(0x102)](s);
                                return;
                            } else
                                await (-0x2f * -0x8d + -0x26c + -0x1 * 0x1777, MessengerVerifyMediaMessage_1[Y(0x107)])(i, r, t, j);
                        } else {
                            if (g[a0(0xc7)](g[Y(0xcc)], g[Y(0xd6)]))
                                await (0x1e61 + 0x6c * -0x9 + -0x1a95, MessengerVerifyMessage_1[Y(0x107)])(r, t, j);
                            else {
                                (0x10f9 + -0x1de5 + 0xcec, f[Y(0x107)])(g, h[Y(0xd2)]);
                                return;
                            }
                        }
                        await (0x1765 + -0x4f0 * 0x1 + -0x87 * 0x23, VerifyStepsChatFlowTicket_1[Y(0x107)])(r, t), await (-0x1 * 0x1e83 + -0x1967 * 0x1 + -0x22 * -0x1a5, VerifyBusinessHours_1[a0(0x107)])(r, t), g[Y(0xa9)](e);
                    }
                } catch (z) {
                    logger_1[Y(0xae)][Y(0xf9)](z), g[Y(0xd3)](f, z);
                }
            })());
        });
    };
exports[C(0x107)] = MessengerHandleMessage;