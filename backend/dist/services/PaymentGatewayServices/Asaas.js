'use strict';
const G = b, H = b;
(function (c, d) {
    const E = b, F = b, e = c();
    while (!![]) {
        try {
            const f = parseInt(E(0x117)) / (0x1859 + 0x59d * 0x1 + -0x1df5) + parseInt(F(0xf8)) / (-0x860 + 0xc1 * -0x5 + 0xc27) + -parseInt(E(0xef)) / (0x118d * 0x1 + -0x2 * 0xdbd + 0x9f0) + parseInt(F(0x11e)) / (-0x6c0 + -0x28 * -0x54 + -0x65c) + parseInt(F(0xff)) / (-0x263d + -0x81e + -0xe0 * -0x35) * (parseInt(F(0x95)) / (0x32 * 0x3e + -0x2eb * 0x4 + -0x6a)) + -parseInt(F(0xa2)) / (0x1 * -0x17cb + 0xa30 * 0x2 + 0x3f * 0xe) + -parseInt(E(0xe4)) / (-0x1723 + -0x1 * -0x23d5 + -0xcaa) * (parseInt(E(0x100)) / (-0x100a + -0x1a90 + 0x2aa3));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, -0x4f719 + 0x178a2 + 0x5fb4a));
function a() {
    const N = [
        'EgoPx',
        '/#/finance',
        'Problema\x20e',
        'ZPqTq',
        'n/json',
        'Asaas:\x20Inv',
        'GDJjK',
        '../../util',
        'ncontrado,',
        'hSsjo',
        'data',
        'open',
        'eral',
        'where',
        'AMJPQ',
        'YtDfP',
        'DETACHED',
        '\x20entre\x20em\x20',
        'json',
        'QVGgu',
        '../../mode',
        'Asaas\x20webh',
        'default',
        '2184TYGHdm',
        'ijSVX',
        'i.asaas.co',
        'OYOXB',
        'beHPg',
        'AdAbm',
        'OiOKj',
        'ajtNB',
        '__esModule',
        'tdBUi',
        'ce\x20not\x20fou',
        '363057xDphGW',
        'contato\x20co',
        'url',
        'dswzN',
        'post',
        'Subscripti',
        'ers/CheckS',
        'FRONTEND_U',
        'tenant',
        '556168njBycu',
        'ook:\x20Invoi',
        'm\x20o\x20suport',
        'status',
        'QLGvH',
        'QXvTs',
        'Error\x20in\x20a',
        '5BYaMss',
        '12438eGJmzy',
        'env',
        'WMrGo',
        'lRJPw',
        'aaKiq',
        'UWcVu',
        'txId',
        'https://ap',
        'value',
        'asaasWebho',
        'successUrl',
        'PAYMENT_CO',
        'hQVfY',
        'dMMfS',
        'e_Asaas',
        'GWSeo',
        'include',
        'wBilb',
        'processInv',
        '../../help',
        'nd\x20or\x20alre',
        'ENhRI',
        'autoRedire',
        '8820SwBMOz',
        'saasCreate',
        't\x20found',
        'mnrDO',
        'axios',
        'atewayServ',
        'GBwkG',
        '653964ciJPLi',
        'OITVt',
        'findOne',
        '__importDe',
        'Whazing',
        'ices',
        'kkKuK',
        'update',
        'saasWebhoo',
        'ctEqs',
        'HYNRO',
        'oicePaid',
        'ettingsGen',
        './PaymentG',
        'billingTyp',
        'NFIRMED',
        'fGlJJ',
        'ATwRv',
        'GVLAU',
        'iro',
        'TYcRO',
        'eGQaW',
        'Access\x20tok',
        'logger',
        'eUPHy',
        '1786782pkifIT',
        'asaas',
        'defineProp',
        'Fatura\x20#',
        'uUQeQ',
        'ECalc',
        'rs/AppErro',
        'XRQqC',
        'findByPk',
        'SwKdg',
        'Tenant\x20not',
        'oice\x20marke',
        'UdiPc',
        '608020wwGpwZ',
        'd\x20as\x20paid',
        '\x20found',
        'asaasCreat',
        'ady\x20paid',
        'VdkLP',
        'payGw',
        'rnLTI',
        'urlPagamen',
        'AkLeY',
        'body',
        'ls/Invoice',
        'Aigkw',
        's/logger',
        'eSubscript',
        'GBcgj',
        'm/v3/payme',
        'VYvoA',
        'error',
        'jzsfr',
        'OtcDV',
        'applicatio',
        'hCfuB',
        'ls/Tenant',
        'ion',
        'Invoice\x20no',
        'on:\x20',
        'payGwData',
        'ZYdVM',
        'reload',
        'k:\x20',
        'erty',
        'fault',
        'model',
        'rhDCO',
        'message',
        'debug',
        'FUnQb',
        '../../erro',
        'paymentLin',
        'keyAsaas',
        'ntLinks',
        'en\x20not\x20fou'
    ];
    a = function () {
        return N;
    };
    return a();
}
var __importDefault = this && this[G(0x7f) + H(0xc2)] || function (c) {
    const I = H;
    return c && c[I(0xec)] ? c : { 'default': c };
};
const k = {};
k[G(0x108)] = !![], Object[H(0x97) + G(0xc1)](exports, H(0xec), k), exports[H(0x109) + 'ok'] = exports[H(0xa5) + H(0xb0) + H(0xba)] = void (-0x56b + -0xb14 * -0x2 + -0x10bd);
const axios_1 = __importDefault(require(G(0x11b))), CheckSettingsGeneral_1 = __importDefault(require(H(0x113) + H(0xf5) + H(0x88) + H(0xd9))), logger_1 = require(G(0xd4) + G(0xaf)), Invoices_1 = __importDefault(require(G(0xe1) + H(0xad) + 's')), Tenant_1 = __importDefault(require(H(0xe1) + G(0xb9))), AppError_1 = __importDefault(require(G(0xc8) + H(0x9b) + 'r')), PaymentGatewayServices_1 = require(G(0x89) + H(0x11c) + H(0x81)), asaasCreateSubscription = async (g, h) => {
        const J = H, K = H, i = {
                'ENhRI': J(0x9f) + K(0xa4),
                'UdiPc': K(0xe2) + K(0xf9) + K(0xee) + K(0x114) + K(0xa6),
                'UWcVu': J(0xfe) + J(0x118) + K(0xf4) + K(0xbc),
                'dMMfS': K(0xcf) + J(0xd5) + K(0xde) + K(0xf0) + J(0xfa) + 'e!',
                'hCfuB': K(0xbb) + J(0x119),
                'lRJPw': function (j, l) {
                    return j === l;
                },
                'GBcgj': J(0xb6),
                'wBilb': J(0xca),
                'Aigkw': J(0x8a) + K(0x10e),
                'GVLAU': function (j, l) {
                    return j !== l;
                },
                'TYcRO': K(0xdb),
                'eGQaW': J(0x10f),
                'fGlJJ': K(0x92) + J(0xcc) + 'nd',
                'beHPg': J(0xed),
                'ajtNB': K(0xbe),
                'HYNRO': J(0x94),
                'AkLeY': J(0x104),
                'rnLTI': J(0xdd),
                'hSsjo': function (j, l) {
                    return j(l);
                },
                'AdAbm': J(0x107) + K(0xe6) + K(0xb2) + J(0xcb),
                'QVGgu': K(0xb7) + J(0xd1),
                'GBwkG': J(0x80),
                'EgoPx': J(0x96),
                'OiOKj': function (j, l) {
                    return j !== l;
                },
                'kkKuK': J(0x102),
                'ZPqTq': J(0x8d),
                'QXvTs': function (j, l) {
                    return j === l;
                },
                'hQVfY': J(0xa7),
                'YtDfP': K(0x11f)
            };
        try {
            if (i[J(0x103)](i[J(0xb1)], i[J(0xb1)])) {
                const {
                        price: j,
                        invoiceId: l
                    } = g[K(0xac)], m = await (0x203 * 0x1 + 0x1721 * 0x1 + -0x1924, CheckSettingsGeneral_1[J(0xe3)])(i[K(0x111)]), n = await (0x1 * -0x1a56 + 0x11b8 + 0x44f * 0x2, CheckSettingsGeneral_1[K(0xe3)])(i[J(0xae)]);
                if (!m) {
                    if (i[K(0x8e)](i[K(0x90)], i[K(0x91)]))
                        throw new AppError_1[(J(0xe3))](i[J(0x8c)], 0x6 * -0x39d + 0x21a2 + 0x299 * -0x4);
                    else {
                        const x = {};
                        return x[J(0xe3)] = j, g && h[J(0xec)] ? i : x;
                    }
                }
                const o = await Invoices_1[J(0xe3)][J(0x9d)](l);
                if (!o) {
                    if (i[K(0x103)](i[K(0xe8)], i[J(0xeb)]))
                        throw new p[(K(0xe3))](i[K(0x115)], 0xcd2 + -0x478 + -0x6c6);
                    else
                        throw new Error(i[J(0xb8)]);
                }
                if (o[J(0x106)]) {
                    if (i[K(0x8e)](i[J(0x86)], i[J(0xab)])) {
                        const y = {};
                        return y[K(0xaa) + 'to'] = o[J(0xbd)], h[J(0xdf)](y);
                    } else
                        p[K(0x93)][J(0xc6)](i[J(0xa1)]);
                }
                const p = {};
                p[K(0x10a)] = process[K(0x101)][K(0xf6) + 'RL'] + (J(0xce) + J(0x8f)), p[K(0x116) + 'ct'] = !![];
                const q = {
                        'billingType': n,
                        'chargeType': i[K(0xa9)],
                        'name': K(0x98) + l,
                        'value': i[K(0xd6)](parseFloat, j),
                        'dueDateLimitDays': 0x0,
                        'subscriptionCycle': null,
                        'maxInstallmentCount': 0x1,
                        'notificationEnabled': ![],
                        'callback': p
                    }, r = await axios_1[K(0xe3)][K(0xf3)](i[K(0xe9)], q, {
                        'headers': {
                            'Content-Type': i[K(0xe0)],
                            'accept': i[K(0xe0)],
                            'access_token': m,
                            'User-Agent': i[J(0x11d)]
                        }
                    }), s = {};
                s[J(0x106)] = r[K(0xd7)]['id'], s[J(0xa8)] = i[K(0xcd)], s[K(0xbd)] = r[J(0xd7)][J(0xf1)], await o[K(0x83)](s), await o[K(0xbf)]();
                const t = r[K(0xd7)][J(0xf1)], u = await Tenant_1[J(0xe3)][J(0x120)]();
                if (!u) {
                    if (i[J(0xea)](i[K(0x82)], i[J(0xd0)]))
                        throw new AppError_1[(K(0xe3))](i[K(0x115)], 0x10 * -0x1c5 + 0x1 * -0x1c73 + 0x3a57);
                    else {
                        const B = {};
                        return B[J(0xaa) + 'to'] = B[J(0xbd)], s[K(0xdf)](B);
                    }
                }
                const v = {};
                return v[J(0xaa) + 'to'] = t, h[K(0xdf)](v);
            } else {
                f[K(0x93)][K(0xb4)](i[K(0x105)], g);
                throw new h[(K(0xe3))](i[J(0x10d)], 0x1d91 * -0x1 + 0x80 * -0x29 + 0x33a1);
            }
        } catch (C) {
            if (i[J(0xfd)](i[K(0x10c)], i[J(0xdc)]))
                throw new d(i[K(0xb8)]);
            else {
                logger_1[J(0x93)][K(0xb4)](i[J(0x105)], C);
                throw new AppError_1[(J(0xe3))](i[J(0x10d)], -0x1b1b + -0x2ab * -0x6 + 0xca9);
            }
        }
    };
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (-0x2 * -0x1249 + -0x45e + -0x1fb5 * 0x1);
        let h = e[f];
        return h;
    }, b(c, d);
}
exports[H(0xa5) + H(0xb0) + H(0xba)] = asaasCreateSubscription;
const asaasWebhook = async (i, j) => {
    const L = G, M = H, l = {};
    l[L(0xc4)] = L(0x92) + M(0xcc) + 'nd', l[M(0x85)] = M(0xfe) + M(0x84) + L(0xc0), l[M(0x11a)] = function (n, o) {
        return n === o;
    }, l[M(0xf2)] = L(0x10b) + M(0x8b), l[M(0x9c)] = L(0xd8), l[M(0xd3)] = M(0xf7), l[M(0xb3)] = function (n, o) {
        return n !== o;
    }, l[L(0xfc)] = L(0xb5), l[M(0x9a)] = M(0xd2) + L(0xa0) + M(0xa3), l[M(0xe5)] = L(0xc7), l[M(0x9e)] = L(0x99), l[M(0xe7)] = L(0xe2) + L(0xf9) + L(0xee) + L(0x114) + L(0xa6);
    const m = l;
    try {
        const {
            event: n,
            payment: o
        } = i[M(0xac)];
        if (m[M(0x11a)](n, m[L(0xf2)])) {
            const q = o[L(0xc9) + 'k'], r = {};
            r[L(0x106)] = q, r[L(0xfb)] = m[M(0x9c)];
            const s = {};
            s[L(0xc3)] = Tenant_1[M(0xe3)], s['as'] = m[L(0xd3)];
            const t = {};
            t[M(0xda)] = r, t[L(0x110)] = [s];
            const u = await Invoices_1[L(0xe3)][L(0x120)](t);
            if (u) {
                if (m[L(0xb3)](m[L(0xfc)], m[L(0xfc)]))
                    throw new r[(M(0xe3))](m[L(0xc4)], 0x1d4c + 0x1b * 0xc7 + -0x30b9);
                else
                    await (-0x46 * 0x52 + -0x618 + 0x5b4 * 0x5, PaymentGatewayServices_1[M(0x112) + M(0x87)])(u), logger_1[L(0x93)][L(0xc6)](m[M(0x9a)]);
            } else {
                if (m[L(0xb3)](m[M(0xe5)], m[L(0x9e)]))
                    logger_1[M(0x93)][L(0xc6)](m[M(0xe7)]);
                else {
                    x[M(0x93)][M(0xb4)](m[M(0x85)], h);
                    const x = {};
                    return x['ok'] = ![], x[M(0xb4)] = j[L(0xc5)], i[L(0xfb)](0x119 + 0x1 * 0x1a6e + 0x1993 * -0x1)[M(0xdf)](x);
                }
            }
        }
        const p = {};
        return p['ok'] = !![], j[L(0xdf)](p);
    } catch (x) {
        logger_1[M(0x93)][L(0xb4)](m[L(0x85)], x);
        const y = {};
        return y['ok'] = ![], y[L(0xb4)] = x[L(0xc5)], j[M(0xfb)](0x2180 + 0x717 + -0x1 * 0x26a3)[M(0xdf)](y);
    }
};
exports[H(0x109) + 'ok'] = asaasWebhook;