'use strict';
const bz = b, bA = b;
(function (c, d) {
    const bx = b, by = b, e = c();
    while (!![]) {
        try {
            const f = parseInt(bx(0x1f4)) / (0x6f5 + -0x3ca * 0x7 + -0x6 * -0x343) + -parseInt(bx(0x233)) / (0x1b15 * -0x1 + 0x2479 + 0x1 * -0x962) * (-parseInt(by(0x2cd)) / (0x16ab + -0x18af + 0x207)) + parseInt(by(0x2a7)) / (-0x971 * -0x3 + 0xf92 + 0x2be1 * -0x1) + parseInt(bx(0x2b4)) / (-0x7 * 0x1c1 + -0x1 * -0x10a3 + -0xb * 0x65) * (-parseInt(by(0x2ea)) / (0x93a + -0xfb + 0x1 * -0x839)) + parseInt(bx(0x2b0)) / (-0xe * -0x72 + -0x20a9 + -0xd3a * -0x2) + parseInt(bx(0x270)) / (-0x1 * 0xa39 + 0x381 + -0x60 * -0x12) + -parseInt(bx(0x2d2)) / (-0x51f + -0x7e + 0x5a6);
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, -0x647a7 * -0x2 + -0x4fdce + 0x23fc * -0x8));
var __importDefault = this && this[bz(0x23a) + bz(0x2b3)] || function (c) {
    const bB = bA;
    return c && c[bB(0x224)] ? c : { 'default': c };
};
function a() {
    const bH = [
        'n/json',
        'request',
        'post',
        'Irnli',
        'default',
        '../TicketS',
        'MUUSv',
        'JNhbJ',
        'split',
        'closeTicke',
        'ZiPoH',
        'MGDTa',
        'LdlNM',
        'dGRYF',
        '172172unOWfz',
        'log',
        'clientSide',
        'value',
        'aveTF',
        'DZAtp',
        'ticketId',
        'message',
        'ticketData',
        '2963821eHXdLA',
        'OfaXD',
        'geSystemSe',
        'fault',
        '3566190JXdXVt',
        'ers/socket',
        'gain.',
        'axios',
        'contactId',
        'dfUlQ',
        'length',
        'messages',
        'stringify',
        'toString',
        'CafRj',
        'Accept',
        'typebot',
        'defineProp',
        'xoWyq',
        'bold',
        'KxhaQ',
        'nId',
        'yfHjp',
        'type',
        'Error\x20on\x20t',
        'XbtmI',
        'NiDsN',
        'EHOcX',
        'GpiQW',
        '796029ntTqvL',
        '../../help',
        'GwcPa',
        'akuRP',
        'MJDKf',
        '3466674tTjqpY',
        'qReaP',
        'fMUYd',
        'sendType',
        'yhKoP',
        'vDUgD',
        'lXHaN',
        '../../mode',
        'OHSvU',
        'yBxKP',
        'name',
        'secondsToW',
        'OlqZN',
        'lodash',
        'xLIph',
        'oYQbl',
        'random',
        'UTsho',
        'xzFaa',
        'wPsjp',
        'ate',
        'content',
        'jlDrK',
        'reload',
        '6nPWIIA',
        'Actions',
        'CqJxm',
        'cZvWR',
        'rYNMk',
        'Invalid\x20me',
        'gkkjz',
        '../Contact',
        'ls/Message',
        'rKWAU',
        'tus',
        'logger',
        'input',
        'NHtAZ',
        'body',
        '/startChat',
        'ketService',
        '/continueC',
        'NcyhN',
        'floor',
        'useIntegra',
        '/api/v1/ty',
        'Nexvy',
        'mChcY',
        'maxBodyLen',
        'XlWek',
        'Services/U',
        'bpVCQ',
        'Emit',
        'CATJk',
        'applicatio',
        'eFyNn',
        'typebotSta',
        'rzHta',
        'hat',
        'PuhaD',
        'mediaUrl',
        'ener:\x20',
        'vUfKo',
        'ervices/Cr',
        'find',
        'YvYmJ',
        'konyf',
        'pdateConta',
        'getMinutes',
        '408753mazhsK',
        'autoClose',
        'ence',
        'reateMessa',
        'update',
        'status',
        'msg',
        'method',
        'JsxPX',
        '../../util',
        'startsWith',
        'children',
        'cDCeG',
        'choice\x20inp',
        'sessionId',
        'sionId',
        'hHGLB',
        'zYClW',
        'prRGa',
        'stopBot',
        'ervices/Up',
        'VyVGI',
        's/logger',
        'email',
        'isBot',
        'bbKOO',
        'ssage.\x20Ple',
        't:\x20',
        'tenantId',
        'Erro\x20ao\x20cr',
        'ctTagsBotS',
        'fopCO',
        'eateLogTic',
        'setMinutes',
        'tagId',
        'italic',
        'AJSqU',
        'where',
        'ls/QueueIn',
        'WzYbn',
        'tegrations',
        'VtOyv',
        'aovBm',
        'tGBUN',
        'pending',
        'GeBgA',
        'reniciando',
        'zkwsV',
        '__esModule',
        '▶️\x20',
        'gyOyq',
        'EjNXo',
        'number',
        'UnJrl',
        'findOne',
        'FxXMA',
        'richText',
        'mediaType',
        'parse',
        'erty',
        'QyVTJ',
        'HPdWX',
        'Services/C',
        '4hrVNBz',
        'OzspW',
        'GAbkI',
        'wait',
        'Service',
        'entrou\x20no\x20',
        'yTsfs',
        '__importDe',
        'pebots/',
        'ZCPSi',
        'MdMeS',
        'zLoHD',
        'ticket:upd',
        'qWGsy',
        'kOetz',
        'isTransfer',
        'ase,\x20try\x20a',
        'protocol',
        'AIPvB',
        'payload',
        'closed',
        'HqJwX',
        'url',
        'RPpMK',
        'rvice',
        'Content-Ty',
        'MGuvz',
        'CerHK',
        '\x20typebot',
        'czMLW',
        'updatedAt',
        'mookL',
        'ypebotList',
        'contact',
        'integratio',
        'ZEZXv',
        'Xzxzl',
        'aitFor',
        'dateTicket',
        'XfSfr',
        'XRWEG',
        'replace',
        'bdSbt',
        'EFTkw',
        'dmpZc',
        'fromMe',
        'underline',
        'yHJXz',
        'string',
        'gth',
        '/api/v1/se',
        'headers',
        'ozNnd',
        'typebotSes',
        'nqvTg',
        'RBfLR',
        'VDIzI',
        'NKVND',
        'text',
        'Tasbq',
        'vzGXo',
        '918744hXnAuh',
        'userId',
        'ssions/',
        'iar\x20sessão',
        'isNil',
        'MmGRQ',
        'ers/Mustac',
        'cOFRM',
        'bKNNJ',
        'FvHIH',
        'data',
        'NVmJd',
        'XyKrt',
        'UDVyh',
        'KKOlg',
        '0|1|3|2|4',
        'ygzlw',
        'DxFPr',
        'Hhhnw',
        'info',
        'dhVYD',
        '\x20do\x20typebo',
        'ebfMI',
        'ticket',
        'messageId',
        'fKnwO',
        'BzZvl',
        'ervice',
        'ceQlt',
        '../Message',
        'rjyte',
        'fFvlB',
        'tion',
        'queueId',
        'BjXcQ',
        'mNhhm',
        'read',
        'RVyXj',
        'hbQZJ',
        'ckzfK',
        'BscEU'
    ];
    a = function () {
        return bH;
    };
    return a();
}
const s = {};
s[bz(0x2aa)] = !![], Object[bz(0x2c1) + bz(0x22f)](exports, bA(0x224), s);
const axios_1 = __importDefault(require(bA(0x2b7))), lodash_1 = require(bz(0x2df)), Message_1 = __importDefault(require(bA(0x2d9) + bz(0x2f2))), QueueIntegrations_1 = __importDefault(require(bz(0x2d9) + bA(0x21a) + bz(0x21c))), logger_1 = require(bA(0x1fd) + bz(0x20a)), UpdateTicketService_1 = __importDefault(require(bA(0x29e) + bz(0x208) + bA(0x259) + bA(0x237))), UpdateContactTagsBotService_1 = __importDefault(require(bz(0x2f1) + bA(0x304) + bA(0x1f2) + bz(0x212) + bA(0x28b))), CreateMessageSystemService_1 = __importDefault(require(bA(0x28d) + bz(0x232) + bz(0x1f7) + bz(0x2b2) + bA(0x24b))), CreateLogTicketService_1 = __importDefault(require(bA(0x29e) + bz(0x1ee) + bz(0x214) + bA(0x2fa))), Mustache_1 = __importDefault(require(bz(0x2ce) + bz(0x276) + 'he')), socketEmit_1 = __importDefault(require(bz(0x2ce) + bA(0x2b5) + bA(0x306))), delay = c => new Promise(d => setTimeout(d, c)), HandleMessageTypebot = async ({
        messageId: I,
        ticket: J
    }) => {
        const bC = bA, bD = bz, K = {
                'HPdWX': function (a4, a5) {
                    return a4 * a5;
                },
                'JsxPX': function (a4, a5) {
                    return a4 === a5;
                },
                'MdMeS': bC(0x2ee),
                'eFyNn': function (a4, a5) {
                    return a4 !== a5;
                },
                'GwcPa': bD(0x20d),
                'xzFaa': function (a4, a5) {
                    return a4 * a5;
                },
                'DxFPr': bC(0x263),
                'OfaXD': function (a4, a5) {
                    return a4 || a5;
                },
                'fMUYd': bC(0x29b),
                'czMLW': bC(0x308) + bC(0x299),
                'rKWAU': function (a4, a5) {
                    return a4 === a5;
                },
                'VyVGI': bD(0x213),
                'NiDsN': bD(0x230),
                'zYClW': bD(0x211) + bD(0x273) + bD(0x285) + bC(0x20f),
                'WzYbn': function (a4, a5) {
                    return a4 === a5;
                },
                'EjNXo': bC(0x228),
                'MmGRQ': bC(0x25b),
                'KxhaQ': bC(0x238) + bD(0x2c0),
                'DZAtp': function (a4, a5) {
                    return a4 - a5;
                },
                'rjyte': function (a4, a5) {
                    return a4(a5);
                },
                'yTsfs': function (a4, a5) {
                    return a4 > a5;
                },
                'XbtmI': function (a4, a5) {
                    return a4 < a5;
                },
                'XfSfr': function (a4, a5) {
                    return a4 !== a5;
                },
                'CqJxm': bC(0x2a3),
                'VtOyv': bC(0x206),
                'FxXMA': function (a4, a5) {
                    return a4 === a5;
                },
                'zLoHD': bD(0x2f0),
                'vDUgD': bC(0x26b),
                'KKOlg': function (a4, a5, a6) {
                    return a4(a5, a6);
                },
                'vUfKo': function (a4, a5) {
                    return a4 === a5;
                },
                'tGBUN': bC(0x252),
                'NKVND': bD(0x2fc),
                'aveTF': function (a4, a5) {
                    return a4 !== a5;
                },
                'RVyXj': function (a4, a5) {
                    return a4 === a5;
                },
                'ZEZXv': bC(0x2be),
                'UnJrl': bC(0x301),
                'NHtAZ': bD(0x248),
                'yBxKP': bD(0x2d1),
                'kOetz': bD(0x235),
                'YvYmJ': function (a4, a5) {
                    return a4 === a5;
                },
                'rzHta': bD(0x200),
                'UDVyh': bD(0x303),
                'Irnli': function (a4, a5) {
                    return a4 * a5;
                },
                'ZCPSi': bD(0x2a6),
                'BzZvl': function (a4, a5) {
                    return a4 + a5;
                },
                'MGuvz': bC(0x2c0),
                'oYQbl': bC(0x220),
                'yfHjp': function (a4, a5) {
                    return a4 === a5;
                },
                'bpVCQ': bD(0x26d),
                'ygzlw': bD(0x218),
                'jlDrK': bC(0x26f),
                'BscEU': function (a4, a5) {
                    return a4 === a5;
                },
                'bKNNJ': bD(0x2ed),
                'xLIph': function (a4, a5) {
                    return a4 !== a5;
                },
                'hbQZJ': bC(0x26e),
                'FvHIH': bC(0x245),
                'RBfLR': bC(0x2d0),
                'hHGLB': bD(0x24a),
                'gyOyq': function (a4, a5) {
                    return a4 === a5;
                },
                'OHSvU': bD(0x307),
                'dfUlQ': function (a4, a5) {
                    return a4 !== a5;
                },
                'zkwsV': bD(0x25e),
                'NVmJd': bD(0x28c),
                'MUUSv': bD(0x1f1),
                'GeBgA': bC(0x234),
                'CerHK': bD(0x2cc),
                'aovBm': function (a4, a5) {
                    return a4 !== a5;
                },
                'fFvlB': bD(0x2d3),
                'ckzfK': bC(0x289),
                'lXHaN': function (a4, a5) {
                    return a4 === a5;
                },
                'cOFRM': bC(0x293),
                'dmpZc': bC(0x240),
                'yHJXz': bD(0x2cb),
                'Xzxzl': bC(0x269),
                'dhVYD': function (a4, a5) {
                    return a4 === a5;
                },
                'BjXcQ': bD(0x2ef) + bD(0x20e) + bC(0x243) + bD(0x2b6),
                'Nexvy': bC(0x27f),
                'ozNnd': bC(0x247),
                'xoWyq': bD(0x23f) + bC(0x2e6),
                'OlqZN': bD(0x1f5),
                'JNhbJ': function (a4, a5) {
                    return a4 > a5;
                },
                'MGDTa': function (a4, a5) {
                    return a4(a5);
                },
                'wPsjp': function (a4, a5) {
                    return a4 === a5;
                },
                'LdlNM': bC(0x201) + 'ut',
                'UTsho': function (a4, a5) {
                    return a4(a5);
                },
                'ebfMI': function (a4, a5) {
                    return a4 === a5;
                },
                'bdSbt': bC(0x222) + bC(0x24f),
                'Hhhnw': function (a4, a5) {
                    return a4(a5);
                },
                'PuhaD': function (a4, a5) {
                    return a4 + a5;
                },
                'yhKoP': bD(0x2c8) + bC(0x253) + bC(0x1ec)
            }, L = {};
        L['id'] = J[bC(0x255) + bC(0x2c5)];
        const M = {};
        M[bC(0x219)] = L;
        const N = await QueueIntegrations_1[bC(0x29d)][bC(0x22a)](M), {
                urlN8N: O,
                typebotExpires: P,
                typebotKeywordFinish: Q,
                typebotKeywordRestart: R,
                typebotUnknownMessage: S,
                typebotSlug: T,
                typebotDelayMessage: U,
                typebotRestartMessage: V
            } = N;
        let W;
        const X = {};
        X[bC(0x288)] = I;
        const Y = {};
        Y[bC(0x219)] = X, W = await Message_1[bD(0x29d)][bD(0x22a)](Y);
        let {body: Z} = W;
        if (!Z) {
            if (K[bC(0x21b)](K[bD(0x275)], K[bD(0x275)]))
                Z = W[bC(0x22d)];
            else {
                const a5 = {};
                return a5[bD(0x29d)] = j, a5 && h[bC(0x224)] ? i : a5;
            }
        }
        console[bD(0x2a8)](K[bC(0x2c4)]);
        async function a0(a5, a6) {
            const bF = bD, bG = bC, a7 = {
                    'XyKrt': function (a8, a9) {
                        const bE = b;
                        return K[bE(0x231)](a8, a9);
                    }
                };
            if (K[bF(0x1fc)](K[bG(0x23d)], K[bF(0x23d)]))
                try {
                    if (K[bF(0x1e6)](K[bG(0x2cf)], K[bF(0x2cf)]))
                        X = '_' + Y + '_';
                    else {
                        const a9 = Math[bG(0x2fd)](K[bF(0x2e4)](Math[bF(0x2e2)](), -0x2c87e9852 + 0xc3d82b9 * 0x17 + 0x65f1e1 * 0xa13))[bF(0x2bd)](), aa = JSON[bG(0x2bc)]({
                                'isStreamEnabled': !![],
                                'message': K[bF(0x281)],
                                'resultId': K[bF(0x281)],
                                'isOnlyRegistering': ![],
                                'prefilledVariables': {
                                    'pushName': J?.[bG(0x254)]?.[bG(0x2dc)] || '',
                                    'nome': J?.[bF(0x254)]?.[bF(0x2dc)] || '',
                                    'email': J?.[bF(0x254)]?.[bF(0x20b)] || '',
                                    'ticketId': J?.['id'] || '',
                                    'protocol': J?.[bF(0x244)] || '',
                                    'ticket': K[bG(0x2b1)](J, '')
                                }
                            }), ab = {};
                        ab[bF(0x1fb)] = K[bF(0x2d4)], ab[bG(0x302) + bG(0x264)] = Infinity, ab[bG(0x249)] = O + (bG(0x2ff) + bF(0x23b)) + T + bF(0x2f9), ab[bF(0x266)] = {}, ab[bF(0x27a)] = aa, ab[bF(0x266)][bG(0x24c) + 'pe'] = K[bG(0x250)], ab[bF(0x266)][bF(0x2bf)] = K[bG(0x250)];
                        const ac = ab, ad = await axios_1[bG(0x29d)][bG(0x29a)](ac);
                        return ad[bF(0x27a)];
                    }
                } catch (ae) {
                    if (K[bF(0x2f3)](K[bF(0x209)], K[bF(0x2ca)]))
                        X += bG(0x225) + Y[bF(0x2e7)] + '\x0a';
                    else {
                        logger_1[bF(0x2f5)][bF(0x283)](K[bG(0x205)], ae);
                        throw ae;
                    }
                }
            else
                X = a7[bG(0x27c)](Y[bF(0x236)][bF(0x2dd) + bG(0x258)], -0x3e3 + -0x1c42 + 0x240d * 0x1);
        }
        let a1, a2, a3 = ![];
        try {
            const a5 = new Date();
            a5[bC(0x215)](K[bC(0x2ac)](a5[bD(0x1f3)](), K[bC(0x28e)](Number, P)));
            if (K[bD(0x239)](P, -0x14 * -0xcd + -0x1ad0 + 0x566 * 0x2) && K[bC(0x2c9)](J[bD(0x251)], a5)) {
                if (K[bC(0x25a)](K[bD(0x2ec)], K[bC(0x21d)])) {
                    const a7 = {};
                    a7[bC(0x268) + bC(0x203)] = null, a7[bC(0x20c)] = !![], await J[bC(0x1f8)](a7), await J[bC(0x2e9)]();
                } else
                    X = '~' + Y + '~';
            }
            if ((0x260 * -0x1 + -0x18 * 0xf1 + 0x18f8, lodash_1[bD(0x274)])(J[bC(0x268) + bD(0x203)])) {
                if (K[bC(0x22b)](K[bC(0x23e)], K[bC(0x2d7)]))
                    X = '*' + Y + '*';
                else {
                    a2 = await K[bD(0x27e)](a0, W, N), a1 = a2[bD(0x202)], a3 = !![];
                    const aa = {};
                    aa[bD(0x268) + bD(0x203)] = a1, aa[bC(0x1e7) + bD(0x2f4)] = !![], aa[bC(0x2fe) + bD(0x290)] = !![], aa[bD(0x255) + bD(0x2c5)] = N['id'], await J[bC(0x1f8)](aa);
                }
            } else
                K[bD(0x1ed)](K[bD(0x21f)], K[bD(0x26c)]) ? X = '*' + Y + '*' : (a1 = J[bD(0x268) + bC(0x203)], a3 = J[bC(0x1e7) + bD(0x2f4)]);
            if (!a3)
                return;
            let a6 = -0x1ffd + 0x20ae + -0x3 * 0x3b;
            if (K[bD(0x2ab)](Z, Q) && K[bD(0x2ab)](Z, R)) {
                let ac, ad, ae;
                if (K[bD(0x21b)](a2?.[bD(0x2bb)][bD(0x2ba)], -0x1130 + -0x1998 + 0x2ac8) || K[bC(0x21b)](a2, undefined)) {
                    if (K[bC(0x295)](K[bC(0x256)], K[bD(0x229)])) {
                        const ag = g[bC(0x1ff)][0x2 * -0xd55 + 0xe * -0x22e + -0x2 * -0x1c97][bC(0x26d)];
                        h = '[' + ag + '](' + i[bD(0x249)] + ')', j = !![];
                    } else {
                        const ag = {};
                        ag[bC(0x2ae)] = Z;
                        const ah = JSON[bD(0x2bc)](ag), ai = {};
                        ai[bD(0x1fb)] = K[bC(0x2d4)], ai[bD(0x302) + bC(0x264)] = Infinity, ai[bC(0x249)] = O + (bC(0x265) + bC(0x272)) + a1 + (bD(0x2fb) + bC(0x1e9)), ai[bD(0x266)] = {}, ai[bC(0x27a)] = ah, ai[bD(0x266)][bC(0x24c) + 'pe'] = K[bD(0x250)], ai[bD(0x266)][bD(0x2bf)] = K[bC(0x250)];
                        const aj = ai;
                        ac = await axios_1[bC(0x29d)][bC(0x29a)](aj), ad = ac[bD(0x27a)]?.[bC(0x2bb)], ae = ac[bD(0x27a)]?.[bD(0x2f6)];
                        const ak = ac[bD(0x27a)]?.[bD(0x2a9) + bD(0x2eb)] || [], al = ak[bD(0x1ef)](am => am[bD(0x2c7)] === bC(0x236));
                        al && al[bC(0x236)] && K[bC(0x22b)](typeof al[bD(0x236)][bD(0x2dd) + bD(0x258)], K[bC(0x227)]) && (K[bD(0x2ab)](K[bC(0x2f7)], K[bC(0x2f7)]) ? X = Y[bD(0x26d)] : a6 = K[bC(0x2e4)](al[bC(0x236)][bC(0x2dd) + bD(0x258)], -0xffd * 0x1 + 0x3 * -0x3ed + 0x1fac));
                    }
                } else {
                    if (K[bD(0x295)](K[bD(0x2db)], K[bC(0x241)]))
                        X = Y[bC(0x26d)];
                    else {
                        ad = a2?.[bC(0x2bb)], ae = a2?.[bD(0x2f6)];
                        const ao = a2?.[bC(0x2a9) + bD(0x2eb)] || [], ap = ao[bD(0x1ef)](aq => aq[bC(0x2c7)] === bC(0x236));
                        ap && ap[bC(0x236)] && K[bD(0x1f0)](typeof ap[bC(0x236)][bC(0x2dd) + bD(0x258)], K[bC(0x227)]) && (K[bD(0x2ab)](K[bD(0x1e8)], K[bC(0x27d)]) ? a6 = K[bD(0x29c)](ap[bD(0x236)][bD(0x2dd) + bC(0x258)], -0x5 * 0x563 + 0xf68 + -0x3 * -0x525) : X = K[bD(0x2e4)](Y[bC(0x236)][bC(0x2dd) + bD(0x258)], -0xe20 + -0x2 * -0x11ba + -0x116c));
                    }
                }
                if (K[bC(0x1ed)](ad?.[bD(0x2ba)], -0x1f12 + -0x201d + 0x3f2f)) {
                    if (K[bC(0x1ed)](K[bD(0x23c)], K[bC(0x23c)])) {
                        await K[bC(0x28e)](delay, K[bD(0x28a)](U, a6));
                        const ar = await (0xe2f + 0x16f * 0xd + -0x1069 * 0x2, Mustache_1[bD(0x29d)])(S, J[bD(0x254)], J), as = {};
                        as[bD(0x2f8)] = ar, as[bD(0x260)] = !![], as[bC(0x294)] = !![], as[bD(0x2d5)] = K[bC(0x24d)], as[bC(0x210)] = J[bC(0x210)];
                        const at = as, au = {};
                        au[bC(0x1fa)] = at, au[bC(0x210)] = J[bC(0x210)], au[bD(0x287)] = J, au[bD(0x2d5)] = at[bD(0x2d5)], au[bC(0x1f9)] = K[bD(0x2e1)], await (0x39b + -0x1584 + 0x11e9, CreateMessageSystemService_1[bC(0x29d)])(au);
                    } else
                        X = '*' + Y + '*';
                } else {
                    for (const aw of ad) {
                        if (K[bC(0x2c6)](aw[bD(0x2c7)], K[bC(0x305)])) {
                            let ax = '', ay = ![];
                            for (const aD of aw[bD(0x2e7)][bC(0x22c)]) {
                                for (const aE of aD[bD(0x1ff)]) {
                                    let aF = '';
                                    if (aE[bD(0x26d)]) {
                                        if (K[bD(0x1e6)](K[bC(0x280)], K[bC(0x2e8)]))
                                            aF = aE[bC(0x26d)];
                                        else {
                                            Y[bC(0x2f5)][bC(0x283)](K[bC(0x205)], g);
                                            throw h;
                                        }
                                    }
                                    if (aE[bC(0x2c7)] && aE[bC(0x1ff)])
                                        for (const aH of aE[bD(0x1ff)]) {
                                            let aI = '';
                                            if (aH[bD(0x26d)]) {
                                                if (K[bD(0x298)](K[bD(0x278)], K[bC(0x278)]))
                                                    aI = aH[bC(0x26d)];
                                                else {
                                                    const aK = g[bD(0x1ff)][-0x1fb7 + -0x1aaf + 0x3a66][bC(0x26d)];
                                                    h = '[' + aK + '](' + i[bC(0x249)] + ')', j = !![];
                                                }
                                            }
                                            if (aH[bC(0x2c7)] && aH[bC(0x1ff)]) {
                                                if (K[bC(0x2e0)](K[bC(0x296)], K[bC(0x296)])) {
                                                    i = j?.[bC(0x2bb)], k = l?.[bC(0x2f6)];
                                                    const aL = m?.[bC(0x2a9) + bC(0x2eb)] || [], aM = aL[bC(0x1ef)](aN => aN[bC(0x2c7)] === bC(0x236));
                                                    aM && aM[bC(0x236)] && K[bD(0x21b)](typeof aM[bC(0x236)][bD(0x2dd) + bD(0x258)], K[bC(0x227)]) && (o = K[bC(0x231)](aM[bD(0x236)][bC(0x2dd) + bD(0x258)], 0x1500 + 0x2318 + 0xa7 * -0x50));
                                                } else
                                                    for (const aL of aH[bD(0x1ff)]) {
                                                        if (K[bC(0x298)](K[bD(0x279)], K[bC(0x279)])) {
                                                            let aM = '';
                                                            aL[bD(0x26d)] && (K[bD(0x25a)](K[bC(0x26a)], K[bC(0x204)]) ? aM = aL[bD(0x26d)] : X = '_' + Y + '_');
                                                            aL[bD(0x2c3)] && (K[bC(0x226)](K[bD(0x2da)], K[bC(0x2da)]) ? aM = '*' + aM + '*' : X = Y);
                                                            aL[bC(0x217)] && (K[bC(0x2b9)](K[bC(0x223)], K[bC(0x223)]) ? X = '~' + Y + '~' : aM = '_' + aM + '_');
                                                            aL[bC(0x261)] && (K[bC(0x25a)](K[bC(0x27b)], K[bC(0x27b)]) ? X = '_' + Y + '_' : aM = '~' + aM + '~');
                                                            if (aL[bC(0x249)]) {
                                                                if (K[bD(0x1e6)](K[bD(0x29f)], K[bC(0x29f)]))
                                                                    X = Y[bC(0x26d)];
                                                                else {
                                                                    const aS = aL[bC(0x1ff)][0xb7 * -0x13 + -0x3 * 0x37c + 0x1809][bD(0x26d)];
                                                                    aM = '[' + aS + '](' + aL[bC(0x249)] + ')', ay = !![];
                                                                }
                                                            }
                                                            ax += aM;
                                                        } else {
                                                            const aU = g[bD(0x1ff)][-0x167 * -0x9 + -0x2a * 0x27 + -0x639][bC(0x26d)];
                                                            h = '[' + aU + '](' + i[bD(0x249)] + ')', j = !![];
                                                        }
                                                    }
                                            }
                                            aH[bC(0x2c3)] && (K[bD(0x226)](K[bD(0x221)], K[bC(0x24e)]) ? X = Y[bD(0x22d)] : aI = '*' + aI + '*');
                                            if (aH[bC(0x217)]) {
                                                if (K[bC(0x21e)](K[bD(0x28f)], K[bC(0x297)]))
                                                    aI = '_' + aI + '_';
                                                else
                                                    throw M;
                                            }
                                            aH[bC(0x261)] && (K[bC(0x2d8)](K[bC(0x277)], K[bD(0x25f)]) ? X = '~' + Y + '~' : aI = '~' + aI + '~');
                                            if (aH[bC(0x249)]) {
                                                if (K[bC(0x2b9)](K[bD(0x262)], K[bC(0x257)])) {
                                                    const aX = aH[bD(0x1ff)][-0x655 * -0x6 + -0x846 + 0x18 * -0x13d][bC(0x26d)];
                                                    aI = '[' + aX + '](' + aH[bD(0x249)] + ')', ay = !![];
                                                } else
                                                    g = h[bD(0x268) + bD(0x203)], i = j[bC(0x1e7) + bC(0x2f4)];
                                            }
                                            ax += aI;
                                        }
                                    aE[bD(0x2c3)] && (aF = '*' + aF + '*');
                                    aE[bC(0x217)] && (aF = '_' + aF + '_');
                                    aE[bC(0x261)] && (aF = '~' + aF + '~');
                                    if (aE[bD(0x249)]) {
                                        const aZ = aE[bC(0x1ff)][-0x10 * -0x1b4 + 0x1a8c + -0x35cc][bC(0x26d)];
                                        aF = '[' + aZ + '](' + aE[bC(0x249)] + ')', ay = !![];
                                    }
                                    ax += aF;
                                }
                                ax += '\x0a';
                            }
                            ax = ax[bC(0x25c)]('**', '')[bC(0x25c)](/\n$/, '');
                            K[bD(0x284)](ax, K[bC(0x292)]) && (ax = S);
                            if (ax[bC(0x1fe)]('#')) {
                                const b0 = ax[bC(0x25c)]('#', '');
                                try {
                                    const b1 = JSON[bC(0x22e)](b0);
                                    if (b1[bC(0x2a2) + 't'] && (-0x22e7 + -0x1 * -0x2645 + -0x35e, lodash_1[bD(0x274)])(b1[bD(0x271)]) && (-0x109d + 0x43 * 0x89 + 0x99f * -0x2, lodash_1[bD(0x274)])(b1[bC(0x291)])) {
                                        const b2 = K[bD(0x300)][bD(0x2a1)]('|');
                                        let b3 = -0x26d5 * 0x1 + -0x16 * -0x182 + -0x17 * -0x3f;
                                        while (!![]) {
                                            switch (b2[b3++]) {
                                            case '0':
                                                await J[bD(0x1f8)]({
                                                    'typebotSessionId': null,
                                                    'typebotStatus': ![],
                                                    'useIntegration': ![],
                                                    'integrationId': null,
                                                    'status': K[bC(0x267)],
                                                    'chatFlowId': null,
                                                    'stepChatFlow': null,
                                                    'botRetries': 0x0,
                                                    'lastInteractionBot': new Date()
                                                });
                                                continue;
                                            case '1':
                                                await J[bD(0x2e9)]();
                                                continue;
                                            case '2':
                                                const b4 = {};
                                                b4[bD(0x210)] = J[bC(0x210)], b4[bC(0x2c7)] = K[bD(0x2c2)], b4[bC(0x246)] = J, (0x67 * -0xa + 0x1211 + -0xe0b, socketEmit_1[bC(0x29d)])(b4);
                                                continue;
                                            case '3':
                                                const b5 = {};
                                                b5[bC(0x2ad)] = J['id'], b5[bD(0x2c7)] = K[bC(0x2de)], await (0x1 * 0x713 + -0x2 * 0x11c0 + -0x1c6d * -0x1, CreateLogTicketService_1[bD(0x29d)])(b5);
                                                continue;
                                            case '4':
                                                return;
                                            }
                                            break;
                                        }
                                    }
                                    if (b1[bC(0x216)] && (-0x169 + -0xdf4 + 0xf5d, lodash_1[bC(0x274)])(b1[bC(0x271)]) && (0x1 * -0x955 + 0x2 * -0x1081 + 0x3 * 0xe1d, lodash_1[bD(0x274)])(b1[bC(0x291)])) {
                                        await (-0x12e1 + -0x5f * -0x3b + 0x2 * -0x182, UpdateContactTagsBotService_1[bD(0x29d)])({
                                            'tagId': b1[bD(0x216)],
                                            'contactId': J[bD(0x2b8)][bC(0x2bd)](),
                                            'tenantId': J[bC(0x210)]
                                        });
                                        return;
                                    }
                                    if (b1[bC(0x207)] && (0xf68 + -0x1b73 + 0xc0b, lodash_1[bC(0x274)])(b1[bD(0x271)]) && (0x5cd * -0x6 + 0x2513 * 0x1 + 0x1 * -0x245, lodash_1[bD(0x274)])(b1[bC(0x291)])) {
                                        const b6 = {};
                                        b6[bD(0x268) + bD(0x203)] = null, b6[bC(0x1e7) + bD(0x2f4)] = ![], b6[bC(0x2fe) + bD(0x290)] = ![], b6[bC(0x255) + bC(0x2c5)] = null, await J[bC(0x1f8)](b6), await J[bD(0x2e9)]();
                                        return;
                                    }
                                    if (!(0x1f * -0x61 + -0x1b * -0x27 + 0x7a2, lodash_1[bD(0x274)])(b1[bD(0x291)]) && K[bC(0x2a0)](b1[bD(0x291)], -0x162f + -0x1d * 0x110 + 0x34ff) && (0x7c6 + 0x178d + -0xb * 0x2d9, lodash_1[bD(0x274)])(b1[bD(0x271)])) {
                                        const b7 = {};
                                        b7[bC(0x268) + bC(0x203)] = null, b7[bD(0x1e7) + bD(0x2f4)] = ![], b7[bD(0x2fe) + bC(0x290)] = ![], b7[bD(0x255) + bD(0x2c5)] = null, await J[bD(0x1f8)](b7);
                                        const b8 = {};
                                        b8[bC(0x291)] = b1[bD(0x291)], b8[bD(0x2fe) + bD(0x290)] = ![], b8[bC(0x255) + bD(0x2c5)] = null, b8['IA'] = ![], b8[bC(0x210)] = J[bC(0x210)];
                                        const b9 = {};
                                        b9[bD(0x2af)] = b8, b9[bD(0x2ad)] = J['id'], b9[bC(0x242) + bC(0x1f6)] = !![], await (0x56 * -0x42 + -0x1493 + -0x161 * -0x1f, UpdateTicketService_1[bD(0x29d)])(b9), await J[bD(0x2e9)]();
                                        return;
                                    }
                                    if (!(0x53 * -0x20 + -0x644 + 0x10a4, lodash_1[bD(0x274)])(b1[bC(0x291)]) && K[bD(0x239)](b1[bC(0x291)], 0x2 * 0x39e + 0x1b47 + -0x6e7 * 0x5) && !(0x2 * -0x38c + -0x1 * 0x7f3 + 0x1 * 0xf0b, lodash_1[bC(0x274)])(b1[bC(0x271)]) && K[bD(0x239)](b1[bC(0x271)], -0xfbe + -0xfa5 + 0x1 * 0x1f63)) {
                                        const ba = {};
                                        ba[bD(0x268) + bD(0x203)] = null, ba[bC(0x1e7) + bD(0x2f4)] = ![], ba[bC(0x2fe) + bC(0x290)] = ![], ba[bD(0x255) + bC(0x2c5)] = null, await J[bC(0x1f8)](ba);
                                        const bb = {};
                                        bb[bC(0x291)] = b1[bC(0x291)], bb[bD(0x271)] = b1[bD(0x271)], bb[bD(0x2fe) + bD(0x290)] = ![], bb[bC(0x255) + bC(0x2c5)] = null, bb['IA'] = ![], bb[bC(0x210)] = J[bD(0x210)];
                                        const bc = {};
                                        bc[bC(0x2af)] = bb, bc[bC(0x2ad)] = J['id'], bc[bD(0x242) + bC(0x1f6)] = !![], await (0x2 * -0xb07 + 0x823 + -0x7 * -0x1fd, UpdateTicketService_1[bC(0x29d)])(bc), await J[bC(0x2e9)]();
                                        return;
                                    }
                                } catch (bd) {
                                    throw bd;
                                }
                            }
                            await K[bC(0x28e)](delay, K[bC(0x28a)](U, a6));
                            const az = await (0x21c4 + 0x8 * 0x4b4 + 0x3 * -0x17cc, Mustache_1[bD(0x29d)])(ax, J[bC(0x254)], J), aA = {};
                            aA[bC(0x2f8)] = az, aA[bC(0x260)] = !![], aA[bC(0x294)] = !![], aA[bD(0x2d5)] = K[bD(0x24d)], aA[bD(0x210)] = J[bD(0x210)];
                            const aB = aA, aC = {};
                            aC[bC(0x1fa)] = aB, aC[bC(0x210)] = J[bC(0x210)], aC[bD(0x287)] = J, aC[bD(0x2d5)] = aB[bC(0x2d5)], aC[bD(0x1f9)] = K[bD(0x2e1)], await (-0x564 + 0x20b9 + -0x1b55, CreateMessageSystemService_1[bD(0x29d)])(aC);
                        }
                        if (K[bC(0x2e0)](aw[bC(0x2c7)], K[bD(0x305)])) {
                            await K[bD(0x2a4)](delay, K[bD(0x28a)](U, a6));
                            const be = {};
                            be[bD(0x2f8)] = '', be[bC(0x1eb)] = aw[bD(0x2e7)][bC(0x249)], be[bD(0x260)] = !![], be[bC(0x294)] = !![], be[bD(0x2d5)] = K[bC(0x24d)], be[bD(0x210)] = J[bC(0x210)];
                            const bf = be, bg = {};
                            bg[bD(0x1fa)] = bf, bg[bC(0x210)] = J[bC(0x210)], bg[bD(0x287)] = J, bg[bC(0x2d5)] = bf[bD(0x2d5)], bg[bC(0x1f9)] = K[bD(0x2e1)], await (0x45e * -0x5 + 0xbe2 + 0x9f4, CreateMessageSystemService_1[bD(0x29d)])(bg);
                        }
                    }
                    if (ae) {
                        if (K[bD(0x2e5)](ae[bC(0x2c7)], K[bD(0x2a5)])) {
                            let bh = '';
                            const {items: bi} = ae;
                            for (const bn of bi) {
                                bh += bC(0x225) + bn[bC(0x2e7)] + '\x0a';
                            }
                            bh = bh[bD(0x25c)](/\n$/, ''), await K[bC(0x2e3)](delay, K[bD(0x28a)](U, a6));
                            const bj = await (-0x17e3 + 0x39 * 0x5 + 0x16c6, Mustache_1[bD(0x29d)])(bh, J[bC(0x254)], J), bk = {};
                            bk[bD(0x2f8)] = bj, bk[bD(0x260)] = !![], bk[bC(0x294)] = !![], bk[bC(0x2d5)] = K[bC(0x24d)], bk[bD(0x210)] = J[bD(0x210)];
                            const bl = bk, bm = {};
                            bm[bC(0x1fa)] = bl, bm[bD(0x210)] = J[bD(0x210)], bm[bD(0x287)] = J, bm[bD(0x2d5)] = bl[bD(0x2d5)], bm[bD(0x1f9)] = K[bD(0x2e1)], await (0x3 * -0x90e + 0x1dd8 + -0x2ae, CreateMessageSystemService_1[bD(0x29d)])(bm);
                        }
                    }
                }
            }
            if (K[bD(0x286)](Z, R)) {
                console[bC(0x2a8)](K[bC(0x25d)]);
                const bo = {};
                bo[bC(0x20c)] = !![], bo[bD(0x268) + bD(0x203)] = null, await J[bC(0x1f8)](bo), await J[bC(0x2e9)](), await K[bC(0x282)](delay, K[bC(0x1ea)](U, a6));
                const bp = await (-0x318 * -0x3 + -0x16e5 * 0x1 + -0x11 * -0xcd, Mustache_1[bD(0x29d)])(V, J[bC(0x254)], J), bq = {};
                bq[bD(0x2f8)] = bp, bq[bC(0x260)] = !![], bq[bD(0x294)] = !![], bq[bC(0x2d5)] = K[bD(0x24d)], bq[bC(0x210)] = J[bD(0x210)];
                const br = bq, bs = {};
                bs[bD(0x1fa)] = br, bs[bD(0x210)] = J[bD(0x210)], bs[bD(0x287)] = J, bs[bD(0x2d5)] = br[bC(0x2d5)], bs[bC(0x1f9)] = K[bD(0x2e1)], await (0x1a9e + 0x5 * 0x5a7 + -0x15 * 0x29d, CreateMessageSystemService_1[bD(0x29d)])(bs);
            }
            if (K[bD(0x2d8)](Z, Q)) {
                const bt = {};
                bt[bC(0x1f9)] = K[bD(0x267)], bt[bC(0x2fe) + bC(0x290)] = ![], bt[bC(0x255) + bD(0x2c5)] = null, bt[bC(0x210)] = J[bD(0x210)];
                const bu = {};
                bu[bD(0x2af)] = bt, bu[bC(0x2ad)] = J['id'], await (0xa86 + -0x2b3 * -0x4 + -0x1552, UpdateTicketService_1[bD(0x29d)])(bu);
                return;
            }
        } catch (bv) {
            logger_1[bD(0x2f5)][bD(0x283)](K[bC(0x2d6)], bv);
            const bw = {};
            bw[bC(0x268) + bC(0x203)] = null, await J[bC(0x1f8)](bw);
            throw bv;
        }
    };
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (0x1 * -0x21d + 0x15b3 + -0x11b0);
        let h = e[f];
        return h;
    }, b(c, d);
}
exports[bz(0x29d)] = HandleMessageTypebot;