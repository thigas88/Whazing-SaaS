'use strict';
const E = b, F = b;
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (0x1 * 0x1413 + 0xf33 + 0x1 * -0x2203);
        let h = e[f];
        return h;
    }, b(c, d);
}
(function (c, d) {
    const C = b, D = b, e = c();
    while (!![]) {
        try {
            const f = -parseInt(C(0x19f)) / (0x18a3 + 0x13db + 0x2c7d * -0x1) * (parseInt(D(0x176)) / (-0x11 * 0x191 + -0x233a + 0x3ddd)) + parseInt(C(0x183)) / (-0x206 * -0x9 + 0xbe * -0x2 + 0xb * -0x185) * (-parseInt(D(0x1b3)) / (-0x5 * -0x6d9 + -0x4bc * -0x1 + -0x1 * 0x26f5)) + -parseInt(C(0x1b9)) / (-0x13cf + 0x900 + 0x1c * 0x63) * (-parseInt(C(0x166)) / (0x1d36 * -0x1 + 0x7 * 0x10b + 0x1 * 0x15ef)) + parseInt(C(0x15e)) / (0x65d + 0x25e8 + -0x2c3e) * (-parseInt(C(0x193)) / (0x9 * 0x118 + -0x16af + -0xcdf * -0x1)) + -parseInt(C(0x1d2)) / (-0x3a1 * -0x3 + 0x481 * -0x5 + 0xbab) * (-parseInt(D(0x148)) / (0x9 * 0x21d + -0x2b * 0x65 + -0x204)) + -parseInt(D(0x154)) / (-0x1 * 0x1489 + -0xd * 0x1a2 + -0x1 * -0x29ce) * (-parseInt(C(0x198)) / (-0x115 + 0x2282 * 0x1 + 0x2161 * -0x1)) + parseInt(C(0x1c5)) / (-0x3ca * -0x5 + 0x409 + -0x5 * 0x496);
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, 0x1c104c + 0x9b35d + -0x4 * 0x5b7d5));
function a() {
    const V = [
        'tedForMess',
        'ZAGWm',
        '../../help',
        '__importDe',
        'tdsMO',
        'POoPZ',
        'PvTlR',
        '131033GdYViY',
        'stream',
        'split',
        'SAD',
        'value',
        'vWDjo',
        'UCtQm',
        'reply_to_m',
        '74532cTJXhn',
        'length',
        'defineProp',
        'geService',
        'eStream',
        'GET',
        'JXJqu',
        'audio',
        'SAV',
        'writeFile',
        'ERR_DOWNLO',
        'nkYlM',
        'image/webp',
        'bUuVW',
        '../Message',
        'image/png',
        '144aLAyRY',
        'DVBOu',
        'telegram',
        'createWrit',
        'cvzrA',
        'message',
        'mimeType',
        'eeZVA',
        'ATTys',
        'getFileLin',
        'dfZhN',
        'document',
        'join',
        '1455pQJthl',
        'vXFPO',
        'public',
        'ERROR\x20DONW',
        'erty',
        'yyDWa',
        'LCqUm',
        'logger',
        'QCoKo',
        'fileName',
        'getTime',
        'uIOrh',
        'uDPct',
        'sage',
        'tnxTu',
        'type',
        '368vxxDNu',
        'EojAG',
        'jyuAd',
        'update',
        'PTopj',
        '7204884cXHGKm',
        'messageDat',
        'voice',
        'IlFiH',
        '\x20ID:\x20',
        'received',
        'fERIY',
        '10643YkqDmV',
        'date',
        'taVDT',
        'error',
        'promisify',
        'oFCOu',
        'message_id',
        'AOHjT',
        'data',
        'eXqSt',
        'caption',
        'text',
        'default',
        'essage',
        'nNyaB',
        'sended',
        'SYlSF',
        'kVogQ',
        'eYKyY',
        'is_animate',
        '5392ojRslQ',
        '../../util',
        'hYXPv',
        'toString',
        'EvlSC',
        'axios',
        '190CVfJwr',
        'ers/getQuo',
        'photo',
        'VXgHe',
        'finish',
        'mime_type',
        's/logger',
        'Services/C',
        'LOAD',
        'ageId',
        'pipe',
        'file_id',
        '11020672fCyfrA',
        'file_name',
        'getFile',
        'OudfY',
        'tenantId',
        'tssAG',
        'jxYEl',
        'zSZov',
        'SAS',
        'NWNLn',
        '__esModule',
        'MZEiH',
        'BcQyE',
        '1224954FTyAxu',
        'aNHPw',
        'wEPOQ',
        'edited_mes',
        'AD_MEDIA::',
        'ajScS',
        '10iWmUcR',
        'IhDTe',
        'fileId',
        'sticker',
        'AuwVK',
        'ogOBM',
        'video',
        'fdVTV',
        'util',
        'path',
        'fault',
        'reateMessa',
        '33zLnTkD',
        'aUDTZ',
        'xfYJG'
    ];
    a = function () {
        return V;
    };
    return a();
}
var __importDefault = this && this[E(0x15a) + E(0x152)] || function (c) {
    const G = E;
    return c && c[G(0x1cf)] ? c : { 'default': c };
};
const u = {};
u[F(0x162)] = !![], Object[F(0x168) + F(0x187)](exports, F(0x1cf), u);
const path_1 = require(F(0x151)), util_1 = require(F(0x150)), fs_1 = require('fs'), axios_1 = __importDefault(require(F(0x1b8))), CreateMessageService_1 = __importDefault(require(E(0x174) + E(0x1c0) + F(0x153) + F(0x169))), logger_1 = require(F(0x1b4) + F(0x1bf)), getQuotedForMessageId_1 = __importDefault(require(F(0x159) + E(0x1ba) + F(0x157) + F(0x1c2))), writeFileAsync = (-0x2047 * -0x1 + -0x40 * 0x17 + -0x1 * 0x1a87, util_1[E(0x1a3)])(fs_1[E(0x16f)]), getMediaInfo = j => {
        const H = E, I = E, k = {};
        k[H(0x155)] = H(0x1bb), k[H(0x15c)] = I(0x14e), k[H(0x1d1)] = H(0x16d), k[H(0x1c8)] = I(0x19a), k[H(0x1a4)] = H(0x14b), k[I(0x1cc)] = I(0x181), k[H(0x17a)] = function (w, z) {
            return w - z;
        }, k[I(0x191)] = function (w, z) {
            return w == z;
        }, k[H(0x1b5)] = H(0x175), k[H(0x180)] = H(0x172);
        const l = k, m = j[H(0x1bb)] ? l[H(0x155)] : j[H(0x14e)] ? l[H(0x15c)] : j[I(0x16d)] ? l[I(0x1d1)] : j[I(0x19a)] ? l[I(0x1c8)] : j[H(0x14b)] && !j[I(0x14b)][H(0x1b2) + 'd'] ? l[H(0x1a4)] : l[H(0x1cc)], n = j[m], [o, p, q, r, s, t, v] = [
                m,
                n[H(0x1be)] ? n[H(0x1be)] : '',
                ![],
                null,
                n[H(0x1c4)] ? n[H(0x1c4)] : n[l[I(0x17a)](n[I(0x167)], -0x427 + 0x1b9f * -0x1 + 0x1fc7)][H(0x1c4)],
                j[H(0x1a9)] ? j[I(0x1a9)] : '',
                l[H(0x191)](m, l[I(0x1c8)])
            ];
        switch (m) {
        case l[I(0x155)]:
            const w = {};
            w[I(0x192)] = o, w[I(0x17c)] = l[H(0x1b5)], w[H(0x161)] = q, w[I(0x18c)] = r, w[I(0x14a)] = s, w[I(0x1a9)] = t, w[H(0x16e)] = v;
            return w;
            break;
        case l[I(0x15c)]:
            const x = {};
            x[H(0x192)] = o, x[I(0x17c)] = p, x[I(0x161)] = q, x[H(0x18c)] = r, x[I(0x14a)] = s, x[I(0x1a9)] = t, x[I(0x16e)] = v;
            return x;
            break;
        case l[H(0x1d1)]:
            const y = {};
            y[I(0x192)] = o, y[I(0x17c)] = p, y[H(0x161)] = q, y[I(0x18c)] = r, y[I(0x14a)] = s, y[H(0x1a9)] = t, y[H(0x16e)] = v;
            return y;
            break;
        case l[H(0x1c8)]:
            const z = {};
            z[H(0x192)] = o, z[H(0x17c)] = p, z[I(0x161)] = q, z[I(0x18c)] = r, z[I(0x14a)] = s, z[H(0x1a9)] = t, z[H(0x16e)] = v;
            return z;
            break;
        case l[H(0x1a4)]:
            const A = {};
            A[I(0x192)] = o, A[H(0x17c)] = l[H(0x180)], A[I(0x161)] = q, A[H(0x18c)] = r, A[I(0x14a)] = s, A[I(0x1a9)] = t, A[H(0x16e)] = v, A[I(0x1cd)] = !![];
            return A;
            break;
        default:
            const B = {};
            B[H(0x192)] = o, B[H(0x17c)] = p, B[H(0x161)] = !![], B[H(0x18c)] = n[I(0x1c6)] ? n[I(0x1c6)] : null, B[I(0x14a)] = s, B[I(0x1a9)] = t, B[H(0x16e)] = v;
            return B;
            break;
        }
    }, downloadFile = async (c, d) => {
        const J = E, K = E, e = {
                'kVogQ': function (g, h) {
                    return g === h;
                },
                'NWNLn': J(0x197),
                'JXJqu': K(0x173),
                'ajScS': J(0x186) + K(0x1c1),
                'eeZVA': function (g, h) {
                    return g(h);
                },
                'vWDjo': K(0x1bd),
                'aNHPw': J(0x1a2),
                'AuwVK': function (g, h) {
                    return g !== h;
                },
                'eXqSt': K(0x18e),
                'nkYlM': J(0x18f),
                'jxYEl': J(0x16b),
                'fERIY': J(0x15f)
            }, f = await (0x1 * -0x8cf + 0x1 * -0xd3d + 0x160c, axios_1[J(0x1ab)])({
                'url': c[J(0x1b6)](),
                'method': e[K(0x1cb)],
                'responseType': e[K(0x19e)]
            });
        await new Promise((g, h) => {
            const L = K, N = K, i = {
                    'tdsMO': e[L(0x147)],
                    'vXFPO': function (j, k) {
                        const M = L;
                        return e[M(0x17d)](j, k);
                    },
                    'AOHjT': e[L(0x163)],
                    'LCqUm': e[N(0x143)]
                };
            e[L(0x14c)](e[L(0x1a8)], e[N(0x171)]) ? f[L(0x1a7)][N(0x1c3)]((-0x1 * 0xce6 + -0x15bc + -0x193 * -0x16, fs_1[L(0x179) + L(0x16a)])(d))['on'](e[N(0x163)], async () => g(!![]))['on'](e[N(0x143)], j => {
                const O = L, P = L;
                if (e[O(0x1b0)](e[P(0x1ce)], e[O(0x16c)])) {
                    const l = {
                        'eYKyY': i[O(0x15b)],
                        'ATTys': function (m, n) {
                            const Q = O;
                            return i[Q(0x184)](m, n);
                        }
                    };
                    j[P(0x1a7)][P(0x1c3)]((-0x2d9 + -0x1a91 + -0x5e2 * -0x5, k[P(0x179) + O(0x16a)])(l))['on'](i[P(0x1a6)], async () => q(!![]))['on'](i[O(0x189)], v => {
                        const R = P, S = P;
                        q[R(0x1a2)](l[S(0x1b1)], v), l[S(0x17e)](r, new s(v));
                    });
                } else
                    console[P(0x1a2)](e[P(0x147)], j), e[O(0x17d)](h, new Error(j));
            }) : e = f?.[N(0x145) + N(0x190)];
        });
    }, VerifyMediaMessage = async (d, e, f, g) => {
        const T = F, U = E, h = {
                'UCtQm': T(0x186) + T(0x1c1),
                'ogOBM': function (v, w) {
                    return v(w);
                },
                'fdVTV': function (v, w) {
                    return v && w;
                },
                'EojAG': function (v, w) {
                    return v === w;
                },
                'QCoKo': T(0x177),
                'IhDTe': U(0x19b),
                'ZAGWm': function (v, w) {
                    return v === w;
                },
                'taVDT': U(0x1d0),
                'PvTlR': T(0x185),
                'jyuAd': function (v, w, x) {
                    return v(w, x);
                },
                'VXgHe': function (v, w) {
                    return v !== w;
                },
                'yyDWa': T(0x156),
                'nNyaB': function (v, w) {
                    return v(w);
                },
                'tssAG': function (v, w) {
                    return v * w;
                },
                'EvlSC': U(0x1ae),
                'SYlSF': U(0x19d),
                'wEPOQ': function (v, w) {
                    return v || w;
                }
            };
        let i, j = {};
        i = d?.[U(0x17b)], j = d?.[U(0x196)];
        if (h[U(0x14f)](!i, j)) {
            if (h[T(0x194)](h[U(0x18b)], h[U(0x149)])) {
                e[T(0x18a)][U(0x1a2)](U(0x170) + T(0x146) + T(0x19c) + f[T(0x1a5)]);
                return;
            } else
                i = j?.[U(0x145) + U(0x190)];
        }
        const k = await h[T(0x14d)](getMediaInfo, i), l = await d[U(0x178)][T(0x1c7)](k[T(0x14a)]);
        if (!l) {
            if (h[T(0x158)](h[T(0x1a1)], h[U(0x1a1)])) {
                logger_1[U(0x18a)][U(0x1a2)](T(0x170) + T(0x146) + U(0x19c) + i[T(0x1a5)]);
                return;
            } else
                h[T(0x1a2)](h[U(0x164)], i), h[U(0x14d)](j, new k(l));
        }
        const m = k[U(0x17c)][U(0x160)]('/')[0x411 + -0x25b1 + -0x1 * -0x21a1][T(0x160)](';')[0xf14 + 0xd * 0xad + -0x17dd], n = l[U(0x1c4)] + '_' + new Date()[U(0x18d)]() + '.' + m, o = (0x1 * -0xb2b + 0xcd6 + -0x1ab, path_1[T(0x182)])(__dirname, '..', '..', '..', h[T(0x15d)], n), p = await d[U(0x178)][T(0x17f) + 'k'](k[U(0x14a)]);
        await h[U(0x195)](downloadFile, p, o);
        let q;
        if (i?.[U(0x165) + T(0x1ac)]?.[T(0x1a5)]) {
            if (h[U(0x1bc)](h[U(0x188)], h[U(0x188)])) {
                const y = {};
                return y[U(0x1ab)] = j, g && h[U(0x1cf)] ? i : y;
            } else {
                const y = await (-0x2359 + 0xf62 + -0x1 * -0x13f7, getQuotedForMessageId_1[U(0x1ab)])(i[T(0x165) + U(0x1ac)][T(0x1a5)], f[U(0x1c9)]);
                q = y?.['id'] || undefined;
            }
        }
        const r = {
            'messageId': h[T(0x1ad)](String, i?.[T(0x1a5)]),
            'ticketId': f['id'],
            'contactId': e ? undefined : g['id'],
            'body': i[T(0x1aa)] || i[T(0x1a9)] || n,
            'fromMe': e,
            'read': e,
            'mediaUrl': n,
            'mediaType': k[U(0x17c)][U(0x160)]('/')[-0xc69 + -0x29e * 0x9 + -0x23f7 * -0x1],
            'quotedMsgId': q,
            'timestamp': h[U(0x1ca)](+i[U(0x1a0)], 0x673 + 0x636 + -0x8c1),
            'status': e ? h[U(0x1b7)] : h[U(0x1af)]
        };
        await f[T(0x196)]({
            'lastMessage': i[U(0x1aa)] || i[U(0x1a9)] || n,
            'lastMessageAt': new Date()[U(0x18d)](),
            'answered': h[U(0x144)](e, ![])
        });
        const s = {};
        s[T(0x199) + 'a'] = r, s[U(0x1c9)] = f[T(0x1c9)];
        const t = await (-0x35 * -0x2 + -0x1f09 + -0x75 * -0x43, CreateMessageService_1[T(0x1ab)])(s);
        return t;
    };
exports[F(0x1ab)] = VerifyMediaMessage;