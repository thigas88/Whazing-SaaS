'use strict';
const Q = b, R = b;
(function (c, d) {
    const O = b, P = b, e = c();
    while (!![]) {
        try {
            const f = parseInt(O(0x1f9)) / (-0x17 * -0x17 + -0xda * 0x14 + 0xef8) + parseInt(P(0x1e7)) / (-0x3 * -0x88a + -0x26b5 + -0x1df * -0x7) * (parseInt(P(0x20d)) / (-0x245e + 0xf41 + -0xd * -0x1a0)) + -parseInt(O(0x1d3)) / (0x11dc + -0xe3 * 0x2 + -0x1012) + parseInt(O(0x1da)) / (-0x1ce0 + 0x5c9 + -0x7b4 * -0x3) + parseInt(O(0x1f0)) / (-0x264a + -0x1 * 0x3fa + 0x2a4a) * (parseInt(O(0x1fd)) / (-0xbf * -0x1a + 0x14b1 + -0x2810)) + parseInt(P(0x1b7)) / (0x1ae5 + -0x1781 * 0x1 + -0x1 * 0x35c) + parseInt(O(0x1ca)) / (-0x75 * -0x2f + 0x1950 + -0x2ec2) * (-parseInt(P(0x200)) / (-0xc0d * 0x3 + -0x3 * -0x76d + 0x1 * 0xdea));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, -0x5872 + -0xb9cb * -0x1 + 0x1 * 0x1b381));
function a() {
    const V = [
        'Rwiaw',
        'erty',
        'FqEjW',
        '108ieAKPJ',
        'bLmjR',
        'Lemhz',
        'createdAt',
        'ASC',
        'id:\x20',
        'ack',
        'ketMessage',
        'age\x20is\x20(te',
        '12866arvbGo',
        'mediaType',
        'default',
        'image',
        '57386QzZqhL',
        '\x20|\x20Ticket:',
        'path',
        '10hjVorK',
        'iYpif',
        'telegram',
        'ers/SetTic',
        'wtmUp',
        'xHnee',
        'telegramId',
        'sendMessag',
        'Error\x20mess',
        'oFPdk',
        'update',
        '../../util',
        'info',
        '568338xjDlfs',
        '__esModule',
        'pending',
        'CiODn',
        'findAll',
        'quotedMsg',
        's/logger',
        'sendPhoto',
        'BmmRA',
        'join',
        'rajgi',
        'timestamp',
        'source',
        'mediaUrl',
        'date',
        'e\x20text',
        'closed',
        'type',
        'error',
        'Emit',
        'ls/Ticket',
        'gbDLA',
        ')::\x20',
        'aKroh',
        'e\x20media',
        'vHKwV',
        'contact',
        'xvZqT',
        'logger',
        '823440gpEzfg',
        'essage_id',
        'messageId',
        'sAsRead',
        'FdfUA',
        'video',
        'public',
        '\x20message\x20(',
        'ers/socket',
        'text',
        'ptt',
        'body',
        'FfkoY',
        'dataValues',
        '__importDe',
        'reply_to_m',
        'sendDocume',
        'AFCBp',
        'oZOEM',
        '2590119iKjEeS',
        'payload',
        'EGINS',
        'sendVoice',
        'jvUgX',
        'XINpG',
        'ls/Message',
        'fault',
        'sequelize',
        '798920JZORYJ',
        'status',
        '../../help',
        'nant:\x20',
        'chat',
        'includes',
        'sendVideo',
        '855625ahSPIR',
        'sended',
        'audio',
        'mediaName',
        'value',
        'Error\x20send',
        'lte',
        'tenantId',
        'where',
        'message_id',
        'Message\x20Up',
        'RTzeQ',
        'chat:ack',
        '2SZrDau',
        'msOIT',
        'defineProp',
        'date\x20ok',
        'ticket',
        '../../mode'
    ];
    a = function () {
        return V;
    };
    return a();
}
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (0x7c3 + -0x71b * 0x2 + 0x810);
        let h = e[f];
        return h;
    }, b(c, d);
}
var __importDefault = this && this[Q(0x1c5) + R(0x1d1)] || function (c) {
    const S = R;
    return c && c[S(0x20e)] ? c : { 'default': c };
};
const q = {};
q[R(0x1de)] = !![], Object[Q(0x1e9) + R(0x1ee)](exports, R(0x20e), q);
const path_1 = require(R(0x1ff)), sequelize_1 = require(R(0x1d2)), SetTicketMessagesAsRead_1 = __importDefault(require(Q(0x1d5) + R(0x203) + Q(0x1f7) + Q(0x1ba))), socketEmit_1 = __importDefault(require(R(0x1d5) + Q(0x1bf) + Q(0x1ad))), Message_1 = __importDefault(require(R(0x1ec) + R(0x1d0))), Ticket_1 = __importDefault(require(R(0x1ec) + Q(0x1ae))), logger_1 = require(Q(0x20b) + R(0x1a0)), SendMessagesSystemWbot = async (m, n) => {
        const T = R, U = R, o = {};
        o[T(0x1a2)] = U(0x20f), o[U(0x1a4)] = U(0x1b4), o[U(0x1c3)] = U(0x1eb), o[T(0x1ce)] = U(0x1aa), o[U(0x1c8)] = T(0x202), o[T(0x19d)] = T(0x19f), o[T(0x1b5)] = U(0x1f3), o[U(0x205)] = U(0x1f4), o[T(0x1cc)] = U(0x1d7), o[U(0x1e8)] = U(0x1c0), o[T(0x1cf)] = T(0x1bd), o[T(0x1e5)] = function (v, w) {
            return v === w;
        }, o[T(0x1ed)] = T(0x1dc), o[U(0x201)] = U(0x1c1), o[U(0x1af)] = function (v, w) {
            return v === w;
        }, o[T(0x204)] = U(0x1fc), o[T(0x1b3)] = function (v, w) {
            return v === w;
        }, o[T(0x1c9)] = U(0x1bc), o[U(0x1bb)] = U(0x207) + U(0x1b2), o[U(0x1f2)] = U(0x207) + T(0x1a9), o[T(0x1ef)] = function (v, w) {
            return v * w;
        }, o[T(0x209)] = T(0x1db), o[T(0x1b1)] = T(0x1e6), o[U(0x1f1)] = T(0x1e4) + U(0x1ea);
        const p = o, r = { [sequelize_1['Op']['is']]: null }, s = {
                'fromMe': !![],
                'messageId': r,
                'status': p[U(0x1a2)],
                [sequelize_1['Op']['or']]: [
                    { 'scheduleDate': { [sequelize_1['Op'][T(0x1e0)]]: new Date() } },
                    { 'scheduleDate': { [sequelize_1['Op']['is']]: null } }
                ]
            }, t = await Message_1[T(0x1fb)][T(0x19e)]({
                'where': s,
                'include': [
                    p[U(0x1a4)],
                    {
                        'model': Ticket_1[U(0x1fb)],
                        'as': p[U(0x1c3)],
                        'where': {
                            'tenantId': n,
                            [sequelize_1['Op']['or']]: {
                                'status': { [sequelize_1['Op']['ne']]: p[T(0x1ce)] },
                                'isFarewellMessage': !![]
                            },
                            'channel': p[T(0x1c8)],
                            'whatsappId': m['id']
                        },
                        'include': [p[U(0x1a4)]]
                    },
                    {
                        'model': Message_1[U(0x1fb)],
                        'as': p[T(0x19d)],
                        'include': [p[T(0x1a4)]]
                    }
                ],
                'order': [[
                        p[U(0x1b5)],
                        p[U(0x205)]
                    ]]
            });
        let u;
        for (const v of t) {
            const w = v, {ticket: x} = w, y = x[T(0x1b4)][U(0x206)], z = {};
            w[T(0x19f)] && (z[T(0x1c6) + U(0x1b8)] = w[T(0x19f)][U(0x1b9)]);
            try {
                if (![
                        p[T(0x1cc)],
                        p[T(0x1e8)]
                    ][U(0x1d8)](w[T(0x1fa)]) && w[T(0x1dd)]) {
                    const F = (0x23c8 + 0x1 * -0x1ea6 + -0x9 * 0x92, path_1[U(0x1a3)])(__dirname, '..', '..', '..', p[U(0x1cf)]), G = (-0x1 * -0xe7d + -0xbc * 0x2b + 0x7 * 0x271, path_1[U(0x1a3)])(F, w[U(0x1dd)]);
                    if (p[T(0x1e5)](w[T(0x1fa)], p[T(0x1ed)]) || p[U(0x1e5)](w[T(0x1fa)], p[U(0x201)])) {
                        const H = {};
                        H[U(0x1a6)] = G, u = await m[U(0x202)][T(0x1cd)](y, H, z);
                    } else {
                        if (p[U(0x1af)](w[T(0x1fa)], p[U(0x204)])) {
                            const I = {};
                            I[T(0x1a6)] = G, u = await m[U(0x202)][U(0x1a1)](y, I, z);
                        } else {
                            if (p[T(0x1b3)](w[T(0x1fa)], p[T(0x1c9)])) {
                                const J = {};
                                J[T(0x1a6)] = G, u = await m[U(0x202)][T(0x1d9)](y, J, z);
                            } else {
                                const K = {};
                                K[T(0x1a6)] = G, u = await m[U(0x202)][T(0x1c7) + 'nt'](y, K, z);
                            }
                        }
                    }
                    logger_1[U(0x1b6)][U(0x20c)](p[U(0x1bb)]);
                } else
                    u = await m[T(0x202)][T(0x207) + 'e'](y, w[U(0x1c2)], z), logger_1[T(0x1b6)][U(0x20c)](p[U(0x1f2)]);
                const A = {
                        ...w,
                        ...u,
                        'id': w['id'],
                        'timestamp': p[U(0x1ef)](u[T(0x1a8)], 0x21af + -0x190b + -0x4bc),
                        'messageId': u[T(0x1e3)],
                        'status': p[U(0x209)],
                        'ack': 0x2
                    }, B = { ...A }, C = {};
                C['id'] = w['id'];
                const D = {};
                D[T(0x1e2)] = C, await Message_1[T(0x1fb)][T(0x20a)](B, D);
                const E = {};
                E[T(0x1e1)] = x[T(0x1e1)], E[U(0x1ab)] = p[T(0x1b1)], E[T(0x1cb)] = { ...w[T(0x1c4)] }, E[T(0x1cb)]['id'] = w['id'], E[T(0x1cb)][T(0x1a7)] = w[U(0x1a7)], E[T(0x1cb)][T(0x1a5)] = A[U(0x1a5)], E[T(0x1cb)][T(0x1b9)] = u[U(0x1e3)], E[T(0x1cb)][U(0x1d4)] = p[T(0x209)], E[T(0x1cb)][T(0x1f6)] = 0x2, (0x2 * -0xf31 + 0x242b + -0x1 * 0x5c9, socketEmit_1[U(0x1fb)])(E), logger_1[T(0x1b6)][U(0x20c)](p[U(0x1f1)]), await (-0x1 * -0x19ab + -0x6ab * -0x1 + -0x2056, SetTicketMessagesAsRead_1[U(0x1fb)])(x);
            } catch (L) {
                const M = w['id'], N = w[T(0x1eb)]['id'];
                logger_1[U(0x1b6)][U(0x1ac)](T(0x208) + U(0x1f8) + T(0x1d6) + n + (U(0x1fe) + '\x20') + N + ')'), logger_1[T(0x1b6)][T(0x1ac)](U(0x1df) + U(0x1be) + U(0x1f5) + M + U(0x1b0) + L);
            }
        }
    };
exports[Q(0x1fb)] = SendMessagesSystemWbot;