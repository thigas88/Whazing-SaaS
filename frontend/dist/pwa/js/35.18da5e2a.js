(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[35],{7010:function(a,t,i){"use strict";i.r(t);var e=function(){var a=this,t=a._self._c;return"admin"===a.userProfile?t("div",[t("q-table",{staticClass:"contact-table container-rounded-10 my-sticky-dynamic q-ma-lg",attrs:{flat:"",bordered:"",square:"","hide-bottom":"",data:a.filas,columns:a.columns,loading:a.loading,"row-key":"id",pagination:a.pagination,"rows-per-page-options":[0]},on:{"update:pagination":function(t){a.pagination=t}},scopedSlots:a._u([{key:"top-left",fn:function(){return[t("div",[t("h2",{class:a.$q.dark.isActive?"text-green":""},[t("q-icon",{attrs:{name:"mdi-arrow-decision-outline q-pr-sm"}}),a._v("\n          Filas\n        ")],1),t("q-btn",{staticClass:"generate-button btn-rounded-50",attrs:{icon:"eva-plus-outline",label:"Adicionar"},on:{click:function(t){a.filaEdicao={},a.modalFila=!0}}})],1)]},proxy:!0},{key:"body-cell-color",fn:function(i){return[t("q-td",{staticClass:"text-center"},[t("div",{staticClass:"q-pa-sm rounded-borders",style:`background: ${i.row.color}`},[a._v("\n          "+a._s(i.row.color)+"\n        ")])])]}},{key:"body-cell-isActive",fn:function(a){return[t("q-td",{staticClass:"text-center"},[t("q-icon",{attrs:{size:"24px",name:a.value?"mdi-check-circle-outline":"mdi-close-circle-outline",color:a.value?"positive":"negative"}})],1)]}},{key:"body-cell-integrationId",fn:function(i){return[t("q-td",{attrs:{props:i}},[a._v("\n        "+a._s(a.formatIntegracao(i.row.integrationId))+"\n      ")])]}},{key:"body-cell-acoes",fn:function(i){return[t("q-td",{staticClass:"text-center"},[t("q-btn",{class:a.$q.dark.isActive?"text-green":"",attrs:{flat:"",round:"",icon:"eva-edit-outline"},on:{click:function(t){return a.editarFila(i.row)}}}),t("q-btn",{class:a.$q.dark.isActive?"text-green":"",attrs:{flat:"",round:"",icon:"eva-trash-outline"},on:{click:function(t){return a.deletarFila(i.row)}}})],1)]}}],null,!1,339892799)}),t("ModalFila",{attrs:{modalFila:a.modalFila,filaEdicao:a.filaEdicao},on:{"update:modalFila":function(t){a.modalFila=t},"update:modal-fila":function(t){a.modalFila=t},"update:filaEdicao":function(t){a.filaEdicao=t},"update:fila-edicao":function(t){a.filaEdicao=t},"modal-fila:criada":a.filaCriada,"modal-fila:editada":a.filaEditada}})],1):a._e()},o=[],l=(i("14d9"),i("a005")),n=i("ee0e"),s=function(){var a=this,t=a._self._c;return t("q-dialog",{attrs:{persistent:"",value:a.modalFila},on:{hide:a.fecharModal,show:a.abrirModal}},[t("q-card",{staticClass:"q-pa-lg modal-container container-rounded-10"},[t("q-card-actions",{staticClass:"q-mt-md",attrs:{align:"right"}},[t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"eva-close",color:"negative",flat:""}})],1),t("q-card-section",[t("div",{staticClass:"text-h6 text-center font-family-main"},[a._v(a._s(a.filaEdicao.id?"Editar":"Criar")+" Fila")])]),t("q-card-section",{staticClass:"container-border container-rounded-10"},[t("div",{staticClass:"text-h6 font-family-main q-mb-sm"},[a._v("\n        Informações\n      ")]),t("q-input",{staticClass:"row col",attrs:{rounded:"",outlined:"",label:"Nome da Fila"},model:{value:a.fila.queue,callback:function(t){a.$set(a.fila,"queue",t)},expression:"fila.queue"}}),t("q-input",{staticClass:"q-my-md",style:`background: ${a.fila.color} `,attrs:{filled:"","hide-bottom-space":"",rules:["anyColor"],dark:!1},scopedSlots:a._u([{key:"preappend",fn:function(){},proxy:!0},{key:"append",fn:function(){return[t("q-icon",{staticClass:"cursor-pointer",attrs:{name:"colorize"}},[t("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[t("q-color",{attrs:{"format-model":"hex",square:"","default-view":"palette","no-header":"",bordered:""},model:{value:a.fila.color,callback:function(t){a.$set(a.fila,"color",t)},expression:"fila.color"}})],1)],1)]},proxy:!0}]),model:{value:a.fila.color,callback:function(t){a.$set(a.fila,"color",t)},expression:"fila.color"}}),t("q-checkbox",{attrs:{label:"Ativo"},model:{value:a.fila.isActive,callback:function(t){a.$set(a.fila,"isActive",t)},expression:"fila.isActive"}}),t("q-select",{attrs:{rounded:"",outlined:"",dense:"",label:"Integração",options:a.integracoes,"map-options":"","emit-value":"","option-value":"id","option-label":"name",clearable:""},model:{value:a.fila.integrationId,callback:function(t){a.$set(a.fila,"integrationId",t)},expression:"fila.integrationId"}},[t("q-tooltip",[a._v("\n              Atribuir integração\n            ")])],1)],1),t("q-card-actions",{staticClass:"q-mt-md",attrs:{align:"right"}},[t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-mr-md btn-rounded-50",attrs:{label:"Cancelar",color:"negative"}}),t("q-btn",{staticClass:"generate-button btn-rounded-50",attrs:{label:"Salvar",icon:"eva-save-outline"},on:{click:a.handleFila}})],1)],1)],1)},r=[],c={name:"ModalFila",props:{modalFila:{type:Boolean,default:!1},filaEdicao:{type:Object,default:()=>({id:null})}},data(){return{integracoes:[],fila:{id:null,queue:null,from_ia:!1,color:"#ffffff",isActive:!0}}},methods:{async listarIntegracoes(){const{data:a}=await Object(l["d"])();this.integracoes=a},resetarFila(){this.fila={id:null,queue:null,from_ia:!1,color:"#ffffff",isActive:!0}},fecharModal(){this.resetarFila(),this.$emit("update:filaEdicao",{id:null}),this.$emit("update:modalFila",!1)},abrirModal(){this.filaEdicao.id?this.fila={...this.filaEdicao}:this.resetarFila()},async handleFila(){try{if(this.loading=!0,this.fila.id){const{data:a}=await Object(n["a"])(this.fila);this.$emit("modal-fila:editada",a),this.$q.notify({type:"info",progress:!0,position:"top",textColor:"black",message:"Etapa editada!",actions:[{icon:"close",round:!0,color:"white"}]})}else{const{data:a}=await Object(n["b"])(this.fila);this.$emit("modal-fila:criada",a),this.$q.notify({type:"positive",progress:!0,position:"top",message:"Fila criada!",actions:[{icon:"close",round:!0,color:"white"}]})}this.loading=!1,this.fecharModal()}catch(a){console.error(a),this.$notificarErro("Ocorreu um erro!",a)}}},mounted(){this.listarIntegracoes()}},d=c,f=i("2877"),u=i("24e8"),p=i("f09f"),m=i("4b7e"),h=i("9c40"),b=i("a370"),g=i("27f9"),v=i("0016"),q=i("7cbe"),y=i("b498"),F=i("8f8e"),k=i("ddd8"),w=i("05c0"),C=i("7f67"),x=i("eebe"),I=i.n(x),$=Object(f["a"])(d,s,r,!1,null,"1d878878",null),A=$.exports;I()($,"components",{QDialog:u["a"],QCard:p["a"],QCardActions:m["a"],QBtn:h["a"],QCardSection:b["a"],QInput:g["a"],QIcon:v["a"],QPopupProxy:q["a"],QColor:y["a"],QCheckbox:F["a"],QSelect:k["a"],QTooltip:w["a"]}),I()($,"directives",{ClosePopup:C["a"]});var E={name:"Filas",components:{ModalFila:A},data(){return{userProfile:"user",filaEdicao:{},modalFila:!1,filas:[],integracoes:[],pagination:{rowsPerPage:40,rowsNumber:0,lastIndex:0},loading:!1,columns:[{name:"id",label:"#",field:"id",align:"left"},{name:"queue",label:"Fila",field:"queue",align:"left"},{name:"color",label:"Cor",field:"color",align:"center"},{name:"isActive",label:"Ativo",field:"isActive",align:"center"},{name:"integrationId",label:"Integração",field:"integrationId",align:"center",format:a=>this.formatIntegracao(a)},{name:"acoes",label:"Ações",field:"acoes",align:"center"}]}},methods:{async listarIntegracoes(){const{data:a}=await Object(l["d"])();this.integracoes=a},formatIntegracao(a){const t=this.integracoes.find((t=>t.id===a));return t?t.name:""},async listarFilas(){const{data:a}=await Object(n["d"])();this.filas=a},filaCriada(a){const t=[...this.filas];t.push(a),this.filas=[...t]},filaEditada(a){const t=[...this.filas],i=t.findIndex((t=>t.id===a.id));i>-1&&(t[i]=a),this.filas=[...t]},editarFila(a){this.filaEdicao={...a},this.modalFila=!0},deletarFila(a){this.$q.dialog({title:"Atenção!!",message:`Deseja realmente deletar a Fila "${a.queue}"?`,cancel:{label:"Não",color:"primary",push:!0},ok:{label:"Sim",color:"negative",push:!0},persistent:!0}).onOk((()=>{this.loading=!0,Object(n["c"])(a).then((t=>{let i=[...this.filas];i=i.filter((t=>t.id!==a.id)),this.filas=[...i],this.$q.notify({type:"positive",progress:!0,position:"top",message:`Fila ${a.queue} deletada!`,actions:[{icon:"close",round:!0,color:"white"}]})})),this.loading=!1}))}},mounted(){this.listarIntegracoes(),this.listarFilas(),this.userProfile=localStorage.getItem("profile")}},_=E,Q=i("eaac"),O=i("db86"),j=Object(f["a"])(_,e,o,!1,null,"d26a35f4",null);t["default"]=j.exports;I()(j,"components",{QTable:Q["a"],QIcon:v["a"],QBtn:h["a"],QTd:O["a"]})}}]);