(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"23d9":function(t,e,a){},"4d74":function(t,e,a){},9127:function(t,e,a){"use strict";a("23d9")},"989e":function(t,e,a){"use strict";a.r(e);a("14d9");var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"WAL position-relative bg-grey-3",style:t.style},[e("q-layout",{attrs:{container:"",view:"lHr LpR lFr"}},[e("q-drawer",{attrs:{"show-if-above":"",overlay:t.$q.screen.lt.md,persistent:"",breakpoint:769,bordered:"",width:t.$q.screen.lt.md?t.$q.screen.width:380,"content-class":"hide-scrollbar full-width"},on:{hide:function(e){t.drawerTickets=!1}},model:{value:t.drawerTickets,callback:function(e){t.drawerTickets=e},expression:"drawerTickets"}},[e("q-toolbar",{staticClass:"q-pr-none menu-header menu-left q-gutter-xs full-width",staticStyle:{height:"64px"}},[e("q-btn",{staticClass:"chat-button-avatar",attrs:{flat:"",size:"lg"}},[e("q-avatar",{attrs:{size:"sm"}},[t._v("\n            "+t._s(t.$iniciaisString(t.username))+"\n          ")]),e("q-menu",[e("q-list",{staticStyle:{"min-width":"100px"}},[e("q-item-label",{attrs:{header:""}},[t._v(" Olá! "),e("b",[t._v(" "+t._s(t.username)+" ")])]),e("cStatusUsuario",{attrs:{usuario:t.usuario},on:{"update:usuario":t.atualizarUsuario}}),e("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:t.abrirModalUsuario}},[e("q-item-section",[t._v("Perfil")])],1),e("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:t.efetuarLogout}},[e("q-item-section",[t._v("Sair")])],1)],1)],1),e("q-tooltip",[t._v("Usuário")])],1),e("q-space"),e("q-btn",{staticClass:"btn-rounded",class:t.$q.dark.isActive?"text-green bg-black":"",attrs:{flat:"",icon:t.isSilentMode?"volume_off":"volume_up",disable:t.loadingMount},on:{click:t.toggleSilentMode}},[e("q-tooltip",{attrs:{"content-class":"text-bold"}},[t._v(" "+t._s(t.isSilentMode?"Modo Silencioso Ativado":"Modo Silencioso Desativado")+" ")])],1),e("q-btn",{staticClass:"btn-rounded",class:t.$q.dark.isActive?"text-green bg-black":"",attrs:{flat:"",icon:"eva-message-circle-outline",disable:t.loadingMount},on:{click:()=>t.$router.push({name:"chat-interno"})}},[e("q-tooltip",{attrs:{"content-class":"text-bold"}},[t._v(" Chat Interno ")]),this.notificacaoInternaNaoLida+parseInt(t.notificacoesChat)/2>0?e("q-badge",{staticClass:"badge-left",attrs:{color:"red",floating:""}},[t._v(" "+t._s(this.notificacaoInternaNaoLida+parseInt(t.notificacoesChat)/2))]):t._e()],1),e("q-btn",{staticClass:"btn-rounded",class:t.$q.dark.isActive?"text-green bg-black":"",attrs:{flat:"",icon:"mdi-clipboard-list-outline",disable:t.loadingMount},on:{click:function(e){t.tarefaEdicao={},t.modalTarefa=!0}}},[e("q-tooltip",{attrs:{"content-class":"text-bold"}},[t._v(" Criar Tarefa ")]),t.delayed+t.venceHoje>0?e("q-badge",{staticClass:"badge-left",attrs:{color:"red",floating:""},on:{click:()=>t.$router.push({name:"tarefas"})}},[t._v(" "+t._s(t.delayed+t.venceHoje))]):t._e()],1),e("q-btn",{staticClass:"btn-rounded",class:t.$q.dark.isActive?"text-green bg-black":"",staticStyle:{"margin-right":"5px"},attrs:{flat:"",icon:"eva-undo-outline",disable:t.loadingMount},on:{click:()=>t.$router.push({name:"home-dashboard"})}},[e("q-tooltip",{attrs:{"content-class":"text-bold"}},[t._v(" Retornar ao menu ")])],1)],1),t.loadingMount?e("q-linear-progress",{staticClass:"absolute-top",staticStyle:{width:"100%"},attrs:{indeterminate:"",color:"primary"}}):t._e(),t._e(),e("q-toolbar",{directives:[{name:"show",rawName:"v-show",value:t.toolbarSearch,expression:"toolbarSearch"}],staticClass:"menu-container column q-gutter-sm items-center full-width"},[e("div",{staticClass:"search full-width"},[e("q-input",{staticClass:"full-width",attrs:{dense:"",outlined:"",rounded:"",type:"search",debounce:700},on:{input:function(e){return t.BuscarTicketFiltro()}},scopedSlots:t._u([{key:"append",fn:function(){return[e("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.pesquisaTickets.searchParam,callback:function(e){t.$set(t.pesquisaTickets,"searchParam",e)},expression:"pesquisaTickets.searchParam"}})],1),e("div",{staticClass:"row-buttons full-width"},[e("q-btn",{staticClass:"bg-grey-3 btn-rounded-50",staticStyle:{flex:"1"},attrs:{flat:"",color:t.cFiltroSelecionado?"deep-orange-9":"primary"}},[t._v("\n            Filtro\n          "),e("q-menu",{staticStyle:{"max-height":"100vh !important"},attrs:{"content-class":"shadow-10 no-scroll container-rounded-10 max-height-none"}},[e("div",{staticClass:"row q-pa-sm",staticStyle:{"min-width":"350px","max-width":"350px"}},[e("div",{staticClass:"q-ma-sm"},[e("div",{staticClass:"text-h6 q-mb-md font-family-main"},[t._v("Filtros Avançados")]),"admin"===t.profile?e("q-toggle",{staticClass:"full-width",class:{"q-mb-lg":t.pesquisaTickets.showAll},attrs:{label:"(Admin) - Visualizar Todos"},on:{input:function(e){t.debounce(t.BuscarTicketFiltro(),700)}},model:{value:t.pesquisaTickets.showAll,callback:function(e){t.$set(t.pesquisaTickets,"showAll",e)},expression:"pesquisaTickets.showAll"}}):t._e(),e("q-toggle",{attrs:{"toggle-indeterminate":"",label:"Ordenar por data de criação"},on:{input:function(e){return t.loadOrdenar()}},model:{value:t.ordenar,callback:function(e){t.ordenar=e},expression:"ordenar"}}),t.pesquisaTickets.showAll?t._e():e("q-separator",{staticClass:"q-mb-md"}),t.pesquisaTickets.showAll?t._e():e("div",[e("q-select",{attrs:{disable:t.pesquisaTickets.showAll,rounded:"",dense:"",outlined:"","hide-bottom-space":"","emit-value":"","map-options":"",multiple:"","options-dense":"","use-chips":"",label:"Filas",color:"primary",options:t.cUserQueues,"input-debounce":700,"option-value":"id","option-label":"queue","input-style":"width: 300px; max-width: 300px;"},on:{input:function(e){t.debounce(t.BuscarTicketFiltro(),700)}},model:{value:t.pesquisaTickets.queuesIds,callback:function(e){t.$set(t.pesquisaTickets,"queuesIds",e)},expression:"pesquisaTickets.queuesIds"}}),e("q-list",{staticClass:"q-my-md",attrs:{dense:""}},[e("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{tag:"label"}},[e("q-item-section",{attrs:{avatar:""}},[e("q-checkbox",{attrs:{val:"open",color:"primary","keep-color":""},on:{input:function(e){t.debounce(t.BuscarTicketFiltro(),700)}},model:{value:t.pesquisaTickets.status,callback:function(e){t.$set(t.pesquisaTickets,"status",e)},expression:"pesquisaTickets.status"}})],1),e("q-item-section",[e("q-item-label",[t._v("Abertos")])],1)],1),"admin"===t.profile?e("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{tag:"label"}},[e("q-item-section",{attrs:{avatar:""}},[e("q-checkbox",{attrs:{val:"pending",color:"negative","keep-color":""},on:{input:function(e){t.debounce(t.BuscarTicketFiltro(),700)}},model:{value:t.pesquisaTickets.status,callback:function(e){t.$set(t.pesquisaTickets,"status",e)},expression:"pesquisaTickets.status"}})],1),e("q-item-section",[e("q-item-label",[t._v("Pendentes")])],1)],1):t._e(),"admin"!==t.profile?e("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{tag:"label"}},[e("q-item-section",{attrs:{avatar:""}},[e("q-checkbox",{attrs:{val:"pending",color:"negative","keep-color":""},on:{input:function(e){t.debounce(t.BuscarTicketFiltro(),700)}},model:{value:t.pesquisaTickets.status,callback:function(e){t.$set(t.pesquisaTickets,"status",e)},expression:"pesquisaTickets.status"}})],1),e("q-item-section",[e("q-item-label",[t._v("Pendentes")])],1)],1):t._e(),e("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{tag:"label"}},[e("q-item-section",{attrs:{avatar:""}},[e("q-checkbox",{attrs:{val:"closed",color:"positive","keep-color":""},on:{input:function(e){t.debounce(t.BuscarTicketFiltro(),700)}},model:{value:t.pesquisaTickets.status,callback:function(e){t.$set(t.pesquisaTickets,"status",e)},expression:"pesquisaTickets.status"}})],1),e("q-item-section",[e("q-item-label",[t._v("Fechados")])],1)],1)],1),e("q-separator",{staticClass:"q-mb-md"}),e("q-toggle",{attrs:{label:"Somente Tickets com mensagens não lidas"},on:{input:function(e){t.debounce(t.BuscarTicketFiltro(),700)}},model:{value:t.pesquisaTickets.withUnreadMessages,callback:function(e){t.$set(t.pesquisaTickets,"withUnreadMessages",e)},expression:"pesquisaTickets.withUnreadMessages"}})],1),t.pesquisaTickets.showAll?t._e():e("q-separator",{staticClass:"q-my-md",attrs:{spaced:""}}),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"float-right q-my-md",attrs:{color:"negative",label:"Fechar",push:""}})],1)])]),e("q-tooltip",{attrs:{"content-class":"text-bold"}},[t._v(" Filtro Avançado ")])],1),t.canAccessPageContact?e("q-btn",{staticClass:"bg-grey-3 btn-rounded-50",class:t.$q.dark.isActive?"text-green bg-black":"",staticStyle:{flex:"1"},attrs:{flat:""},on:{click:function(e){t.$q.screen.lt.md?t.modalNovoTicket=!0:t.$router.push({name:"chat-contatos"})}}},[t._v("\n          Contatos\n        "),e("q-tooltip",{attrs:{"content-class":(t.$q.dark.isActive?"text-white bg-black":"")+" text-bold"}},[t._v("Contatos")])],1):t._e(),t.hasMoreTickets?e("q-btn",{staticClass:"bg-grey-3 btn-rounded-50",class:t.$q.dark.isActive?"text-green bg-black":"",staticStyle:{flex:"1"},attrs:{flat:""},on:{click:function(e){return t.showNotification()}}},[t._v("\n          Atendimentos\n          "),e("q-tooltip",{attrs:{"content-class":(t.$q.dark.isActive?"text-green bg-black":"")+" text-bold"}},[t._v(" Carregar Mais Atendimentos ")])],1):t._e()],1)]),e("q-toolbar",{staticClass:"padding-person menu-left items-center"},[e("q-separator",{staticClass:"absolute-top"}),e("div",{staticClass:"full-width"},[e("q-tabs",{staticClass:"btn-rounded",class:{"text-green":t.$q.dark.isActive,"text-black":!t.$q.dark.isActive},attrs:{"narrow-indicator":"",dense:"","active-bg-color":t.$q.dark.isActive?"primary":"grey-3","inline-label":"",align:"justify"},model:{value:t.tabTickets,callback:function(e){t.tabTickets=e},expression:"tabTickets"}},[e("q-tab",{staticClass:"btn-rounded-50",class:t.$q.dark.isActive?"bg-black text-green":"bg-grey-3 btn-rounded-50 q-tab-personalized",attrs:{ripple:!1,name:"private",icon:"eva-person-outline"}},["enabled"===t.contadorUniversal?e("q-badge",{staticClass:"badge-left",attrs:{color:"red",floating:""}},[t._v(" "+t._s(t.privateMessages.length))]):t._e(),e("q-tooltip",{attrs:{"content-class":"text-bold"}},[t._v(" Conversas Privadas ")])],1),"disabled"===t.grupoAtivo?e("q-tab",{staticClass:"btn-rounded-50",class:t.$q.dark.isActive?"bg-black text-green":"bg-grey-3 btn-rounded-50 q-tab-personalized",attrs:{ripple:!1,name:"groups",icon:"eva-people-outline"}},["enabled"===t.contadorUniversal?e("q-badge",{staticClass:"badge-left",attrs:{color:"red",floating:""}},[t._v(" "+t._s(t.groupMessages.length))]):t._e(),e("q-tooltip",{attrs:{"content-class":"text-bold"}},[t._v(" Conversas em Grupo ")])],1):t._e(),e("q-btn",{staticClass:"btn-rounded-50",class:t.$q.dark.isActive?"bg-black text-green":"bg-grey-3 btn-rounded-50 q-tab-personalized",attrs:{icon:"mdi-book-account-outline",disable:t.loadingMount},on:{click:t.loadMoreOpenTickets}},[e("q-tooltip",{attrs:{"content-class":"text-bold"}},[t._v(" Carregar Mais Tickets ")])],1)],1)],1)],1),"enabled"===t.fixarConexao?e("q-toolbar",{directives:[{name:"show",rawName:"v-show",value:t.toolbarSearch,expression:"toolbarSearch"}],staticClass:"row q-gutter-sm q-py-sm items-center"},[e("q-toggle",{staticClass:"text-bold q-ml-md flex flex-block",attrs:{size:"xl","keep-color":"",dense:"","icon-color":t.$q.dark.isActive?"black":"white",value:t.$q.dark.isActive,color:t.$q.dark.isActive?"grey-3":"black","checked-icon":"mdi-white-balance-sunny","unchecked-icon":"mdi-weather-sunny"},on:{input:function(e){return t.$setConfigsUsuario({isDark:!t.$q.dark.isActive})}}},[e("q-tooltip",{attrs:{"content-class":"text-body1"}},[t._v(" "+t._s(t.$q.dark.isActive?"Desativar":"Ativar")+" Modo Escuro (Dark Mode) ")])],1),e("div",{staticClass:"flex flex-inline q-pt-xs"},[e("q-scroll-area",{staticStyle:{height:"40px",width:"300px"},attrs:{horizontal:""}},[t._l(t.whatsapps,(function(t){return[e("q-btn",{key:t.id,staticClass:"q-mx-xs q-pa-none",style:"opacity: "+("CONNECTED"===t.status?1:.2),attrs:{rounded:"",flat:"",dense:"",size:"18px",icon:`img:${t.type}-logo.png`}},[e("q-tooltip",{attrs:{"max-height":"300px","content-class":"bg-blue-1 text-body1 text-grey-9 hide-scrollbar"}},[e("ItemStatusChannel",{attrs:{item:t}})],1)],1)]}))],2)],1),e("q-separator",{staticClass:"absolute-bottom"})],1):t._e(),e("q-toolbar",{directives:[{name:"show",rawName:"v-show",value:"private"===t.tabTickets,expression:"tabTickets === 'private'"}],staticClass:"items-center"},[e("div",{staticClass:"full-width q-py-xs"},[e("q-tabs",{staticClass:"text-primary btn-rounded",attrs:{"narrow-indicator":"",dense:"",align:"justify","active-bg-color":t.$q.dark.isActive?"primary":"grey-2"},model:{value:t.tabTicketsStatus,callback:function(e){t.tabTicketsStatus=e},expression:"tabTicketsStatus"}},[!t.hidetab||t.hidetab&&t.openTickets.length>0?e("q-tab",{class:{"text-green":t.$q.dark.isActive,"tab-item":!t.$q.dark.isActive},attrs:{ripple:!1,name:"open",icon:"eva-message-circle-outline",label:"Abertos"}},[e("q-badge",{staticClass:"badge-left",attrs:{color:"red",floating:""}},[t._v(" "+t._s(t.openTickets.length))]),e("q-tooltip",{attrs:{"content-class":"bg-padrao text-grey-9 text-bold"}},[t._v(" Tickets em atendimento ")])],1):t._e(),!t.hidetab||t.hidetab&&t.pendingTickets.length>0?e("q-tab",{class:{"text-green":t.$q.dark.isActive,"tab-item":!t.$q.dark.isActive},attrs:{ripple:!1,name:"pending",icon:"eva-clock-outline",label:"Pendentes"}},[e("q-badge",{staticClass:"badge-left",attrs:{color:"red",floating:""}},[t._v(" "+t._s(t.pendingTickets.length))]),e("q-tooltip",{attrs:{"content-class":"bg-padrao text-grey-9 text-bold"}},[t._v(" Tickets pendentes ")])],1):t._e(),!t.hidetab||t.hidetab&&t.closedTickets.length>0?e("q-tab",{class:{"text-green":t.$q.dark.isActive,"tab-item":!t.$q.dark.isActive},attrs:{ripple:!1,name:"closed",icon:"eva-lock-outline",label:"Fechados"}},[e("q-badge",{staticClass:"badge-left",attrs:{color:"red",floating:""}},[t._v(" "+t._s(t.closedTickets.length))]),e("q-tooltip",{attrs:{"content-class":"bg-padrao text-grey-9 text-bold"}},[t._v(" Tickets fechados ")])],1):t._e(),"enabled"===t.chatbotLane&&(!t.hidetab||t.hidetab&&t.pendingTicketsChatBot.length>0)?e("q-tab",{class:{"text-green":t.$q.dark.isActive,"tab-item":!t.$q.dark.isActive},attrs:{ripple:!1,name:"chatbot",icon:"mdi-robot-outline",label:"Chatbot"}},[e("q-badge",{staticClass:"badge-left",attrs:{color:"red",floating:""}},[t._v(" "+t._s(t.pendingTicketsChatBot.length))]),e("q-tooltip",{attrs:{"content-class":"bg-padrao text-grey-9 text-bold"}},[t._v(" Chatbot ")])],1):t._e()],1)],1)]),e("q-toolbar",{directives:[{name:"show",rawName:"v-show",value:"groups"===t.tabTickets,expression:"tabTickets === 'groups'"}],staticClass:"items-center"},[e("div",{staticClass:"full-width q-py-xs"},[e("q-tabs",{staticClass:"text-primary btn-rounded",attrs:{"narrow-indicator":"",dense:"",align:"justify","active-bg-color":t.$q.dark.isActive?"primary":"grey-2"},model:{value:t.tabTicketsStatus,callback:function(e){t.tabTicketsStatus=e},expression:"tabTicketsStatus"}},[!t.hidetab||t.hidetab&&t.openGroupTickets.length>0?e("q-tab",{class:{"text-green":t.$q.dark.isActive,"text-black":!t.$q.dark.isActive},attrs:{ripple:!1,name:"open",icon:"eva-message-circle-outline",label:"Abertos"}},[e("q-badge",{staticClass:"badge-left",attrs:{color:"red",floating:""}},[t._v(" "+t._s(t.openGroupTickets.length))]),e("q-tooltip",{attrs:{"content-class":"bg-padrao text-grey-9 text-bold"}},[t._v(" Conversas Abertas ")])],1):t._e(),!t.hidetab||t.hidetab&&t.pendingGroupTickets.length>0?e("q-tab",{class:{"text-green":t.$q.dark.isActive,"text-black":!t.$q.dark.isActive},attrs:{ripple:!1,name:"pending",icon:"eva-clock-outline",label:"Pendentes"}},[e("q-badge",{staticClass:"badge-left",attrs:{color:"red",floating:""}},[t._v(" "+t._s(t.pendingGroupTickets.length))]),e("q-tooltip",{attrs:{"content-class":"bg-padrao text-grey-9 text-bold"}},[t._v(" Conversas Pendentes ")])],1):t._e(),!t.hidetab||t.hidetab&&t.closedGroupTickets.length>0?e("q-tab",{class:{"text-green":t.$q.dark.isActive,"text-black":!t.$q.dark.isActive},attrs:{ripple:!1,name:"closed",icon:"eva-lock-outline",label:"Fechados"}},[e("q-badge",{staticClass:"badge-left",attrs:{color:"red",floating:""}},[t._v(" "+t._s(t.closedGroupTickets.length))]),e("q-tooltip",{attrs:{"content-class":"bg-padrao text-grey-9 text-bold"}},[t._v(" Conversas Fechadas ")])],1):t._e()],1)],1)]),t._l(t.openTickets,(function(a){return e("ItemTicket",{directives:[{name:"show",rawName:"v-show",value:"private"===t.tabTickets&&"open"===t.tabTicketsStatus,expression:"tabTickets === 'private' && tabTicketsStatus === 'open'"}],key:a.id,attrs:{ticket:a,filas:t.filas}})})),t._l(t.pendingTickets,(function(a){return e("ItemTicket",{directives:[{name:"show",rawName:"v-show",value:"private"===t.tabTickets&&"pending"===t.tabTicketsStatus,expression:"tabTickets === 'private' && tabTicketsStatus === 'pending'"}],key:a.id,attrs:{ticket:a,filas:t.filas}})})),t._l(t.pendingTicketsChatBot,(function(a){return e("ItemTicket",{directives:[{name:"show",rawName:"v-show",value:"private"===t.tabTickets&&"chatbot"===t.tabTicketsStatus,expression:"tabTickets === 'private' && tabTicketsStatus === 'chatbot'"}],key:a.id+"bot",attrs:{ticket:a,filas:t.filas}})})),t._l(t.closedTickets,(function(a){return e("ItemTicket",{directives:[{name:"show",rawName:"v-show",value:"private"===t.tabTickets&&"closed"===t.tabTicketsStatus,expression:"tabTickets === 'private' && tabTicketsStatus === 'closed'"}],key:a.id,attrs:{ticket:a,filas:t.filas}})})),t._l(t.openGroupTickets,(function(a){return e("ItemTicket",{directives:[{name:"show",rawName:"v-show",value:"groups"===t.tabTickets&&"open"===t.tabTicketsStatus,expression:"tabTickets === 'groups' && tabTicketsStatus === 'open'"}],key:a.id,attrs:{ticket:a,filas:t.filas}})})),t._l(t.pendingGroupTickets,(function(a){return e("ItemTicket",{directives:[{name:"show",rawName:"v-show",value:"groups"===t.tabTickets&&"pending"===t.tabTicketsStatus,expression:"tabTickets === 'groups' && tabTicketsStatus === 'pending'"}],key:a.id,attrs:{ticket:a,filas:t.filas}})})),t._l(t.closedGroupTickets,(function(a){return e("ItemTicket",{directives:[{name:"show",rawName:"v-show",value:"groups"===t.tabTickets&&"closed"===t.tabTicketsStatus,expression:"tabTickets === 'groups' && tabTicketsStatus === 'closed'"}],key:a.id,attrs:{ticket:a,filas:t.filas}})})),"disabled"===t.fixarConexao?e("div",{staticClass:"absolute-bottom row justify-between",staticStyle:{height:"50px"}},[e("q-toggle",{staticClass:"text-bold q-ml-md flex flex-block",attrs:{size:"xl","keep-color":"",dense:"","icon-color":t.$q.dark.isActive?"black":"white",value:t.$q.dark.isActive,color:t.$q.dark.isActive?"grey-3":"black","checked-icon":"mdi-white-balance-sunny","unchecked-icon":"mdi-weather-sunny"},on:{input:function(e){return t.$setConfigsUsuario({isDark:!t.$q.dark.isActive})}}},[e("q-tooltip",{attrs:{"content-class":"text-body1"}},[t._v(" "+t._s(t.$q.dark.isActive?"Desativar":"Ativar")+" Modo Escuro (Dark Mode) ")])],1),e("div",{staticClass:"flex flex-inline q-pt-xs"},[e("q-scroll-area",{staticStyle:{height:"40px",width:"300px"},attrs:{horizontal:""}},[t._l(t.whatsapps,(function(t){return[e("q-btn",{key:t.id,staticClass:"q-mx-xs q-pa-none",style:"opacity: "+("CONNECTED"===t.status?1:.2),attrs:{rounded:"",flat:"",dense:"",size:"18px",icon:`img:${t.type}-logo.png`}},[e("q-tooltip",{attrs:{"max-height":"300px","content-class":"bg-blue-1 text-body1 text-grey-9 hide-scrollbar"}},[e("ItemStatusChannel",{attrs:{item:t}})],1)],1)]}))],2)],1)],1):t._e()],2),e("q-page-container",[e("router-view",{key:t.ticketFocado.id,attrs:{mensagensRapidas:t.mensagensRapidas}})],1),!t.cRouteContatos&&t.ticketFocado.id&&t.drawerContact?e("q-drawer",{staticClass:"dados-contato",attrs:{"show-if-above":"",bordered:"",side:"right","content-class":"bg-grey-3"}},[e("div",{staticClass:"flex justify-start items-end bg-white full-width no-border-radius q-pa-sm",staticStyle:{height:"60px"}},[e("span",{staticClass:"text-h6"},[e("q-btn",{staticClass:"btn-small",attrs:{flat:"",label:"",icon:"mdi-close",color:t.$q.dark.isActive?"green":"primary"},on:{click:t.toggleDrawer}}),t._v("\n          Dados Contato\n      ")],1)]),e("q-scroll-area",{staticStyle:{height:"calc(100vh - 70px)"}},[e("div",[e("q-card",{staticClass:"bg-white border-radius-none q-mt-sm",staticStyle:{width:"100%"},attrs:{flat:""}},[e("q-card-section",{staticClass:"text-center"},[e("q-avatar",{staticStyle:{border:"1px solid #9e9e9ea1 !important",width:"100px",height:"100px"}},[t.ticketFocado.contact.profilePicUrl?t._e():e("q-icon",{staticStyle:{width:"100px",height:"100px"},attrs:{name:"mdi-account",size:"6em",color:"grey-5"}}),e("q-img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.ticketFocado.contact.profilePicUrl},scopedSlots:t._u([{key:"error",fn:function(){return[e("q-icon",{attrs:{name:"mdi-account",size:"1.5em",color:t.$q.dark.isActive?"green":"grey-5"}})]},proxy:!0}],null,!1,3667661003)})],1),e("div",{staticClass:"text-caption q-mt-md blur-effect",staticStyle:{"font-size":"14px"}},[t._v("\n                "+t._s(t.ticketFocado.contact.name||"")+"\n              ")]),e("div",{staticClass:"text-caption q-mt-sm blur-effect",staticStyle:{"font-size":"14px"},attrs:{id:"number"}},[t.ticketFocado.contact.number?[e("a",{class:t.$q.dark.isActive?"text-green":"",attrs:{href:t.getPhoneNumberLink(t.ticketFocado.contact.number)}},[t._v("\n                    "+t._s(t.formatId(t.ticketFocado.contact.number))+"\n                  ")])]:t._e()],2),e("div",{staticClass:"text-caption q-mt-md",staticStyle:{"font-size":"14px"},attrs:{id:"email"}},[t.ticketFocado.contact.email?[e("a",{attrs:{href:"mailto:"+t.ticketFocado.contact.email}},[t._v(t._s(t.ticketFocado.contact.email))])]:[t._v("\n                  "+t._s(t.ticketFocado.contact.email||"")+"\n                ")]],2),e("q-btn",{staticClass:"btn-rounded-50 btn-outline btn-small",class:t.$q.dark.isActive?"text-green":"",attrs:{flat:"",icon:"eva-edit-outline",label:"Editar"},on:{click:function(e){return t.editContact(t.ticketFocado.contact.id)}}}),t.cIsExtraInfo?[e("q-list",t._l(t.ticketFocado.contact.extraInfo,(function(a,s){return e("q-item",{key:s},[e("q-item-section",[e("q-item-label",[t._v(t._s(a.value))])],1)],1)})),1)]:t._e()],2)],1),e("q-card",{staticClass:"bg-white border-radius-none q-mt-sm",staticStyle:{width:"100%"},attrs:{flat:""}},[e("q-card-section",{staticClass:"text-bold text-center q-pa-sm"},[e("q-btn",{staticClass:"btn-rounded-50 btn-outline btn-small",class:t.$q.dark.isActive?"text-green":"",attrs:{flat:"",icon:"mdi-file-pdf-box"},on:{click:t.downloadPDF}},[e("q-tooltip",{attrs:{"content-class":"bg-primary text-bold"}},[t._v("\n                  Baixar conversa em PDF\n                ")])],1),e("q-btn",{staticClass:"btn-rounded-50 btn-outline btn-small",class:t.$q.dark.isActive?"text-green":"",attrs:{flat:"",icon:"mdi-timeline-text-outline"},on:{click:t.abrirModalLogs}},[e("q-tooltip",{attrs:{"content-class":"bg-primary text-bold"}},[t._v("\n                  Logs\n                ")])],1),"admin"===this.userProfile?e("q-btn",{staticClass:"btn-rounded-50 btn-outline btn-small",class:t.$q.dark.isActive?"text-green":"",attrs:{flat:"",icon:"mdi-delete"},on:{click:function(e){return t.deleteTicket(t.ticketFocado.id)}}},[e("q-tooltip",{attrs:{"content-class":"bg-primary text-bold"}},[t._v("\n                  Deletar Ticket\n                ")])],1):t._e()],1)],1),e("q-card",{key:t.ticketFocado.id+t.$uuid(),staticClass:"bg-white q-mt-sm border-radius-none q-pa-sm",staticStyle:{width:"100%"},attrs:{flat:""}},[e("q-card-section",{staticClass:"text-bold q-pb-none",class:t.$q.dark.isActive?"text-green":""},[t._v("\n              Etiquetas\n              "),e("q-separator")],1),e("q-card-section",{staticClass:"q-pa-none",class:t.$q.dark.isActive?"text-green":""},[e("q-select",{attrs:{square:"",borderless:"",value:t.ticketFocado.contact.tags,multiple:"",options:t.etiquetas,"use-chips":"","option-value":"id","option-label":"tag","emit-value":"","map-options":"","dropdown-icon":"add","content-class":t.$q.dark.isActive?"text-green":""},on:{input:t.tagSelecionada},scopedSlots:t._u([{key:"option",fn:function({itemProps:a,itemEvents:s,opt:i,selected:o,toggleOption:n}){return[e("q-item",t._g(t._b({},"q-item",a,!1),s),[e("q-item-section",[e("q-item-label",{domProps:{innerHTML:t._s(i.tag)}})],1),e("q-item-section",{attrs:{side:""}},[e("q-checkbox",{attrs:{value:o},on:{input:function(t){return n(i)}}})],1)],1)]}},{key:"selected-item",fn:function({opt:a}){return[e("q-chip",{staticClass:"q-ma-xs row col-12 text-body1",attrs:{dense:"",square:"",color:"white","text-color":"primary"}},[e("q-icon",{staticClass:"q-mr-sm",style:`color: ${a.color}`,attrs:{name:"mdi-pound-box-outline",size:"28px"}}),t._v("\n                    "+t._s(a.tag)+"\n                  ")],1)]}},{key:"no-option",fn:function({itemProps:a,itemEvents:s}){return[e("q-item",t._g(t._b({},"q-item",a,!1),s),[e("q-item-section",[e("q-item-label",{staticClass:"text-negative text-bold"},[t._v(" Ops... Sem etiquetas criadas! ")]),e("q-item-label",{attrs:{caption:""}},[t._v(" Cadastre novas etiquetas na administração de sistemas. ")])],1)],1)]}}],null,!1,2523533637)})],1)],1),e("q-card",{key:t.ticketFocado.id+t.$uuid(),staticClass:"bg-white q-mt-sm border-radius-none q-pa-sm",staticStyle:{width:"100%"},attrs:{flat:""}},[e("q-card-section",{staticClass:"text-bold q-pb-none",class:t.$q.dark.isActive?"text-green":""},[t._v("\n              Carteira\n              "),e("q-separator")],1),e("q-card-section",{staticClass:"q-pa-none"},[e("q-select",{attrs:{square:"",borderless:"",value:t.ticketFocado.contact.wallets,multiple:"","max-values":1,options:t.usuarios,"use-chips":"","option-value":"id","option-label":"name","emit-value":"","map-options":"","dropdown-icon":"add"},on:{input:t.carteiraDefinida},scopedSlots:t._u([{key:"option",fn:function({itemProps:a,itemEvents:s,opt:i,selected:o,toggleOption:n}){return[e("q-item",t._g(t._b({},"q-item",a,!1),s),[e("q-item-section",[e("q-item-label",{domProps:{innerHTML:t._s(i.name)}})],1),e("q-item-section",{attrs:{side:""}},[e("q-checkbox",{attrs:{value:o},on:{input:function(t){return n(i)}}})],1)],1)]}},{key:"selected-item",fn:function({opt:a}){return[e("q-chip",{staticClass:"q-ma-xs row col-12 text-body1",attrs:{dense:"",square:"",color:"white","text-color":"primary"}},[t._v("\n                    "+t._s(a.name)+"\n                  ")])]}},{key:"no-option",fn:function({itemProps:a,itemEvents:s}){return[e("q-item",t._g(t._b({},"q-item",a,!1),s),[e("q-item-section",[e("q-item-label",{staticClass:"text-negative text-bold"},[t._v(" Ops... Sem carteiras disponíveis!! ")])],1)],1)]}}],null,!1,3567612291)})],1)],1),"instagram"!==t.ticketFocado.channel&&"telegram"!==t.ticketFocado.channel?e("q-card",{key:t.ticketFocado.id+t.$uuid(),staticClass:"bg-white q-mt-sm border-radius-none q-pa-sm",staticStyle:{width:"100%","margin-bottom":"2vh"},attrs:{flat:""}},[e("q-card-section",{staticClass:"text-bold q-pb-none",class:t.$q.dark.isActive?"text-green":""},[t._v("\n              Mensagens Agendadas\n              "),e("q-separator")],1),e("q-card-section",{staticClass:"q-pa-none"},[t.ticketFocado.scheduledMessages?[e("q-list",t._l(t.ticketFocado.scheduledMessages.filter((t=>!t.isDeleted)),(function(a,s){return e("q-item",{key:s,attrs:{clickable:""}},[e("q-item-section",[e("q-item-label",{attrs:{caption:""}},[e("div",{staticClass:"row justify-between items-center no-wrap"},[e("div",[e("strong",[t._v("Agendado para:")]),e("div",[t._v(t._s(t.$formatarData(a.scheduleDate,"dd/MM/yyyy HH:mm")))])]),e("div",[e("div",{staticClass:"row q-gutter-xs no-wrap"},[e("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"mdi-trash-can-outline",size:"sm"},on:{click:function(e){return t.deletarMensagem(a)}}})],1)])])]),e("q-item-label",{attrs:{caption:"",lines:"2"}},[e("b",[t._v("Msg:")]),t._v(" "+t._s(a.mediaName||a.body)+" ")])],1),e("q-tooltip",{attrs:{delay:500}},[e("MensagemChat",{attrs:{mensagens:[a]}})],1)],1)})),1)]:t._e()],2)],1):t._e()],1)])],1):t._e(),e("ModalNovoTicket",{attrs:{modalNovoTicket:t.modalNovoTicket},on:{"update:modalNovoTicket":function(e){t.modalNovoTicket=e},"update:modal-novo-ticket":function(e){t.modalNovoTicket=e}}}),e("ContatoModal",{attrs:{contactId:t.selectedContactId,modalContato:t.modalContato},on:{"update:modalContato":function(e){t.modalContato=e},"update:modal-contato":function(e){t.modalContato=e},"contatoModal:contato-editado":t.contatoEditado}}),e("ModalTarefa",{attrs:{modalTarefa:t.modalTarefa},on:{"update:modalTarefa":function(e){t.modalTarefa=e},"update:modal-tarefa":function(e){t.modalTarefa=e}}}),e("ModalUsuario",{attrs:{isProfile:!0,modalUsuario:t.modalUsuario,usuarioEdicao:t.usuario},on:{"update:modalUsuario":function(e){t.modalUsuario=e},"update:modal-usuario":function(e){t.modalUsuario=e},"update:usuarioEdicao":function(e){t.usuario=e},"update:usuario-edicao":function(e){t.usuario=e}}}),e("q-dialog",{attrs:{"no-backdrop-dismiss":"","full-height":"",position:"right"},on:{hide:function(e){t.logsTicket=[]}},model:{value:t.exibirModalLogs,callback:function(e){t.exibirModalLogs=e},expression:"exibirModalLogs"}},[e("q-card",{staticStyle:{width:"400px"}},[e("q-card-section",{class:{"bg-grey-2":!t.$q.dark.isActive,"bg-primary":t.$q.dark.isActive}},[e("div",{staticClass:"text-h6"},[t._v("\n            Logs Ticket: "+t._s(t.ticketFocado.id)+"\n            "),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"bg-padrao float-right",attrs:{icon:"close",color:"negative",flat:"",round:""}})],1)]),e("q-card-section",{},[e("q-scroll-area",{staticClass:"full-width",staticStyle:{height:"calc(100vh - 200px)"}},[e("q-timeline",{staticClass:"q-pl-sm",class:{"text-black":!t.$q.dark.isActive},staticStyle:{width:"360px"},attrs:{color:"black"}},[t._l(t.logsTicket,(function(a,s){return[e("q-timeline-entry",{key:a&&a.id||s,attrs:{subtitle:t.$formatarData(a.createdAt,"dd/MM/yyyy HH:mm"),color:t.messagesLog[a.type]&&t.messagesLog[a.type].color||"",icon:t.messagesLog[a.type]&&t.messagesLog[a.type].icon||""},scopedSlots:t._u([{key:"title",fn:function(){return[e("div",{class:{"text-green":t.$q.dark.isActive},staticStyle:{width:"calc(100% - 20px)"}},[e("div",{staticClass:"row col text-bold text-body2"},[t._v(t._s(a.user&&a.user.name||"Bot")+":")]),e("div",{staticClass:"row col"},[t._v(t._s(t.messagesLog[a.type]&&t.messagesLog[a.type].message))])])]},proxy:!0}],null,!0)})]}))],2)],1)],1)],1)],1)],1)],1)},i=[],o=a("8039"),n=a("006a"),c=a("0ffe"),r=a("c5bd"),l=a("2f62"),d=a("0b67"),u=function(){var t=this,e=t._self._c;return e("q-dialog",{attrs:{value:t.modalNovoTicket,persistent:""},on:{hide:t.fecharModal}},[e("q-card",{staticClass:"q-pa-md",staticStyle:{width:"500px"}},[e("q-card-section",[e("div",{staticClass:"text-h6"},[t._v("Criar Ticket")])]),e("q-card-section",[e("q-select",{ref:"selectAutoCompleteContato",attrs:{autofocus:"",square:"",outlined:"",filled:"","hide-dropdown-icon":"",loading:t.loading,options:t.contatos,"input-debounce":"700","use-input":"","hide-selected":"","fill-input":"","option-label":"name","option-value":"id",label:"Localizar Contato",hint:"Digite no mínimo duas letras para localizar o contato."},on:{filter:t.localizarContato},scopedSlots:t._u([{key:"before-options",fn:function(){return[e("q-btn",{staticClass:"full-width no-border-radius",attrs:{color:"primary","no-caps":"",padding:"",ripple:"",outline:"",icon:"add",label:"Adicionar Contato"},on:{click:function(e){t.modalContato=!0}}})]},proxy:!0},{key:"option",fn:function(a){return[a.opt.name?e("q-item",t._g(t._b({},"q-item",a.itemProps,!1),a.itemEvents),[e("q-item-section",[e("q-item-label",[t._v(" "+t._s(a.opt.name))]),e("q-item-label",{attrs:{caption:""}},[t._v(t._s(a.opt.number))])],1)],1):t._e()]}}]),model:{value:t.contatoSelecionado,callback:function(e){t.contatoSelecionado=e},expression:"contatoSelecionado"}})],1),e("q-card-actions",{staticClass:"q-pr-md",attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-px-md q-mr-lg",attrs:{label:"Sair",color:"negative"}}),e("q-btn",{staticClass:"q-px-md",attrs:{label:"Salvar",color:"primary"},on:{click:t.criarTicket}})],1)],1),e("ContatoModal",{attrs:{modalContato:t.modalContato},on:{"update:modalContato":function(e){t.modalContato=e},"update:modal-contato":function(e){t.modalContato=e},"contatoModal:contato-criado":t.contatoCriadoNotoTicket}})],1)},p=[],m=a("73ad");const h=+localStorage.getItem("userId");var b={name:"ModalNovoTicket",components:{ContatoModal:n["a"]},props:{modalNovoTicket:{type:Boolean,default:!1}},data(){return{ticket:{},contatoSelecionado:null,contatos:[],modalContato:!1,loading:!1}},computed:{...Object(l["b"])(["whatsapps"])},methods:{fecharModal(){this.ticket={},this.contatoSelecionado=null,this.$emit("update:modalNovoTicket",!1)},async localizarContato(t,e,a){if(t.length<2)return this.contatos.length&&e((()=>{this.contatos=[...this.contatos]})),void a();this.loading=!0;const{data:s}=await Object(m["h"])({searchParam:t});e((()=>{s.contacts.length?this.contatos=s.contacts:this.contatos=[{}]})),this.loading=!1},contatoCriadoNotoTicket(t){this.contatoSelecionado=t,this.criarTicket()},async criarTicket(){if(!this.contatoSelecionado.id)return;const t=[],e=null;this.whatsapps.forEach((e=>{"whatsapp"===e.type&&t.push({label:e.name,value:e.id})})),this.loading=!0,this.$q.dialog({title:`Contato: ${this.contatoSelecionado.name}`,message:"Selecione o canal para iniciar o atendimento.",options:{type:"radio",model:e,isValid:t=>!!t,items:t},ok:{push:!0,color:"positive",label:"Iniciar"},cancel:{push:!0,label:"Cancelar",color:"negative"},persistent:!0}).onOk((async t=>{if(t){this.loading=!0;try{const{data:e}=await Object(r["h"])({contactId:this.contatoSelecionado.id,isActiveDemand:!0,userId:h,channel:"whatsapp",channelId:t,status:"open"});await this.$store.commit("SET_HAS_MORE",!0),await this.$store.dispatch("AbrirChatMensagens",e),this.$q.notify({message:`Atendimento Iniciado || ${e.contact.name} - Ticket: ${e.id}`,type:"positive",position:"top",progress:!0,actions:[{icon:"close",round:!0,color:"white"}]}),this.fecharModal(),this.$router.push({name:"chat",params:{ticketId:e.id}})}catch(e){if(409===e.status){const t=JSON.parse(e.data.error);return this.abrirAtendimentoExistente(this.contatoSelecionado,t),void this.fecharModal()}this.$notificarErro("Ocorreu um erro!",e)}this.loading=!1}})),this.loading=!1},abrirChatContato(t){this.$q.screen.lt.md&&"pending"!==t.status&&this.$root.$emit("infor-cabecalo-chat:acao-menu"),"pending"===t.status||t.id===this.$store.getters.ticketFocado.id&&"chat"===this.$route.name||(this.$store.commit("SET_HAS_MORE",!0),this.$store.dispatch("AbrirChatMensagens",t))},abrirAtendimentoExistente(t,e){this.$q.dialog({title:"Atenção!!",message:`${t.name} possui um atendimento em curso (Atendimento: ${e.id}). Deseja abrir o atendimento?`,cancel:{label:"Não",color:"primary",push:!0},ok:{label:"Sim",color:"negative",push:!0},persistent:!0}).onOk((async()=>{try{this.abrirChatContato(e)}catch(t){this.$notificarErro("Não foi possível atualizar o token",t)}}))}},destroyed(){this.contatoSelecionado=null}},g=b,k=a("2877"),v=a("24e8"),f=a("f09f"),q=a("a370"),T=a("ddd8"),C=a("9c40"),w=a("66e5"),y=a("4074"),x=a("0170"),_=a("4b7e"),S=a("7f67"),$=a("eebe"),A=a.n($),I=Object(k["a"])(g,u,p,!1,null,"19c6abbc",null),M=I.exports;A()(I,"components",{QDialog:v["a"],QCard:f["a"],QCardSection:q["a"],QSelect:T["a"],QBtn:C["a"],QItem:w["a"],QItemSection:y["a"],QItemLabel:x["a"],QCardActions:_["a"]}),A()(I,"directives",{ClosePopup:S["a"]});var N=a("ee0e"),E=a("41be"),O=function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex flex-inline q-gutter-sm"},[t._l(t.whatsapps,(function(a){return e("div",{key:a.id},[t.isIconStatusMenu?e("q-btn",{key:a.id,attrs:{unelevated:"",round:"",flat:"",color:t.isInvalidConnect(a)?"negative":"green"}},[t.isInvalidConnect(a)?t._e():e("q-icon",{attrs:{name:"mdi-wifi-check",size:"2em"}}),t.isInvalidConnect(a)?e("div",{staticClass:"notification-box"},[e("div",{staticClass:"notification-bell"},[e("span",{staticClass:"bell-top"}),e("span",{staticClass:"bell-middle"}),e("span",{staticClass:"bell-bottom"}),e("span",{staticClass:"bell-rad"})])]):t._e(),e("q-menu",{attrs:{anchor:"top right",self:"top left"}},[e("ItemStatusWhatsapp",{key:a.id,attrs:{wbot:a}})],1)],1):t._e()],1)})),e("transition",{attrs:{"transition-show":"flip-up","transition-hide":"flip-down"}},[!t.isIconStatusMenu&&t.whatsapps.length&&t.isProblemConnect?e("q-carousel",{ref:"carouselStatusWhatsapp",staticClass:"q-pa-none q-ma-none full-width bg-amber",attrs:{"transition-prev":"slide-right","transition-next":"slide-left",animated:"",swipeable:"",height:"90px"},scopedSlots:t._u([{key:"control",fn:function(){return[t.isBtnSlider?e("q-carousel-control",{staticClass:"q-gutter-xs",attrs:{position:"bottom-right",offset:[10,40]}},[e("q-btn",{attrs:{round:"",flat:"",dense:"",color:"white","text-color":"black",icon:"arrow_left"},on:{click:function(e){return t.$refs.carouselStatusWhatsapp.previous()}}}),e("q-btn",{attrs:{round:"",flat:"",dense:"",color:"white","text-color":"black",icon:"arrow_right"},on:{click:function(e){return t.$refs.carouselStatusWhatsapp.next()}}})],1):t._e()]},proxy:!0}],null,!1,2197069275),model:{value:t.idWbotVisible,callback:function(e){t.idWbotVisible=e},expression:"idWbotVisible"}},[t._l(t.whatsapps,(function(t,a){return[e("q-carousel-slide",{key:t.id+a,staticClass:"q-pa-none q-ma-none",attrs:{name:a}},[e("ItemStatusWhatsapp",{attrs:{wbot:t}})],1)]}))],2):t._e()],1)],2)},D=[],F=function(){var t=this,e=t._self._c;return e("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:t.wbot.id,staticClass:"full-width full-height",attrs:{clickable:"",dense:""}},[e("q-item-section",{attrs:{avatar:""}},[e("q-icon",{attrs:{color:t.status[t.wbot.status].color,size:"2.5em",name:t.status[t.wbot.status].icon}})],1),e("q-item-section",[e("q-item-label",{attrs:{lines:"1"}},[t._v("\n      Nome: "+t._s(t.wbot.name)+"\n    ")]),e("q-item-label",{attrs:{caption:"",lines:"1"}},[t._v("\n      "+t._s(t.status[t.wbot.status].status)+"\n    ")]),t.isIconStatusMenu?e("q-item-label",{attrs:{caption:"",lines:"3"}},[t._v("\n      "+t._s(t.status[t.wbot.status].description)+"\n    ")]):t._e()],1),t.isIconStatusMenu?t._e():e("q-tooltip",{attrs:{"content-class":"bg-light-blue-1 text-black q-pa-sm shadow-4"}},[e("span",{staticClass:"text-weight-medium"},[t._v(" "+t._s(t.status[t.wbot.status].description)+" ")])])],1)},Q=[],P={name:"ItemStatusWhatsapp",props:{wbot:{type:Object,default:()=>{}},isIconStatusMenu:{type:Boolean,default:!0}},data(){return{status:{PAIRING:{color:"info",icon:"mdi-cellphone-wireles",status:"Emparelhando",description:"Emparelhando sessão Whatsapp."},TIMEOUT:{color:"warning",icon:"mdi-timer-outline",status:"Timeout",description:"As tentativas de conexão falharam. Verifique a internet no celular."},DISCONNECTED:{color:"negative",icon:"mdi-wifi-strength-1-alert",status:"Desconectado",description:"Verifique se o celular do Whatsapp possui conexão com internet."},qrcode:{color:"positive",icon:"mdi-qrcode-scan",status:"Qr Code",description:"Necessário Ler o Qr Code"},DESTROYED:{color:"primary",icon:"mdi-close-network-outline",status:"Inativo",description:"Necessário iniciar a conexão com o Whatsapp e Ler o Qr Code."},CONFLICT:{color:"warning",icon:"mdi-equal",status:"Conflito",description:"Whatsapp Web sendo utilizado."},OPENING:{color:"black",icon:"mdi-connection",status:"Conectando",description:"Iniciando conexão com o Whatsapp."},CONNECTED:{color:"positive",icon:"mdi-wifi-arrow-up-down",status:"Conectado",description:"Conexão estabelecida com sucesso!"}}}}},L=P,j=(a("b3af"),a("0016")),U=a("05c0"),z=a("714f"),G=Object(k["a"])(L,F,Q,!1,null,null,null),R=G.exports;A()(G,"components",{QItem:w["a"],QItemSection:y["a"],QIcon:j["a"],QItemLabel:x["a"],QTooltip:U["a"]}),A()(G,"directives",{Ripple:z["a"]});var B={name:"StatusWhatsapp",components:{ItemStatusWhatsapp:R},props:{isIconStatusMenu:{type:Boolean,default:!1}},data(){return{idWbotVisible:0,isProblemConnect:!1}},watch:{whatsapps:{handler(){const t=-1!==this.whatsapps.findIndex((t=>"CONNECTED"!==t.status));setTimeout((()=>{this.isProblemConnect=t}),3e3)},deep:!0,immediate:!0}},computed:{...Object(l["b"])(["whatsapps"]),isBtnSlider(){const t=this.whatsapps.filter((t=>"CONNECTED"!==t.status));return t>1}},methods:{isInvalidConnect(t){const e=["PAIRING","TIMEOUT","DISCONNECTED","qrcode","DESTROYED","CONFLICT"],a=e.findIndex((e=>e===t.status));return-1!==a}},mounted(){this.isProblemConnect=-1!==this.whatsapps.findIndex((t=>"CONNECTED"!==t.status))}},W=B,H=a("4e73"),V=a("880c"),J=a("62cd"),K=a("32a7"),Y=a("2c91"),X=a("cb32"),Z=a("1c1c"),tt=a("eb85"),et=Object(k["a"])(W,O,D,!1,null,null,null),at=et.exports;A()(et,"components",{QBtn:C["a"],QIcon:j["a"],QMenu:H["a"],QCarousel:V["a"],QCarouselSlide:J["a"],QCarouselControl:K["a"],QTooltip:U["a"],QSpace:Y["a"],QAvatar:X["a"],QList:Z["a"],QItemLabel:x["a"],QSeparator:tt["a"],QItem:w["a"],QItemSection:y["a"]}),A()(et,"directives",{ClosePopup:S["a"]});var st=a("5c26"),it=a("1c16"),ot=a("b166"),nt=a("25c4"),ct=a("7963"),rt=a("1394"),lt=a("163e"),dt=a("7884"),ut=a("9a1b"),pt=a("ef42"),mt=a("c9d9"),ht=a("c3f3"),bt=a("fc45"),gt=a("0582"),kt=a("8baf");const vt=JSON.parse(localStorage.getItem("queues")),ft=localStorage.getItem("profile"),qt=localStorage.getItem("username"),Tt=JSON.parse(localStorage.getItem("usuario"));var Ct={name:"IndexAtendimento",mixins:[d["a"]],components:{ItemTicket:c["a"],ModalNovoTicket:M,StatusWhatsapp:at,ContatoModal:n["a"],ModalUsuario:nt["a"],MensagemChat:pt["a"],ItemStatusChannel:o["a"],ModalTarefa:bt["a"]},data(){return{delayed:0,venceHoje:0,userProfile:"user",tarefaEdicao:{},modalTarefa:!1,tabTickets:"private",tabTicketsStatus:"open",messagesLog:mt["c"],configuracoes:[],debounce:it["a"],usuario:Tt,usuarios:[],selectedTab:"open",username:qt,modalUsuario:!1,toolbarSearch:!0,drawerTickets:!0,loading:!1,profile:ft,modalNovoTicket:!1,modalContato:!1,selectedContactId:null,filterBusca:"",showDialog:!1,atendimentos:[],countTickets:0,pesquisaTickets:{searchParam:"",pageNumber:1,status:["open","pending","closed"],showAll:!1,count:null,queuesIds:[],withUnreadMessages:!1,isNotAssignedUser:!1,includeNotQueueDefined:!0},ordernar:null,filter:!1,filas:[],filasUser:[],etiquetas:[],mensagensRapidas:[],modalEtiquestas:!1,exibirModalLogs:!1,logsTicket:[],notificacaoInternaNaoLida:"",drawerContact:!1,contadorUniversal:"",ContactAdmin:null,chatbotLane:null,spyticket:null,hidetab:null,pageNumber:1,hasMore:!0}},computed:{currentAlertSound(){return this.isSilentMode?this.silenceSound:this.alertSound},canAccessPageContact(){return"enabled"!==this.ContactAdmin||"admin"===this.userProfile},...Object(l["b"])(["tickets","ticketFocado","hasMore","whatsapps","notificacoesChat"]),cUserQueues(){return vt},style(){return{height:this.$q.screen.height+"px"}},cToolbarSearchHeigthAjust(){return this.toolbarSearch?58:0},cHeigVerticalTabs(){return`${50+this.cToolbarSearchHeigthAjust}px`},cRouteContatos(){return"chat-contatos"===this.$route.name},cFiltroSelecionado(){const{queuesIds:t,showAll:e,withUnreadMessages:a,isNotAssignedUser:s}=this.pesquisaTickets;return!!(null!==t&&void 0!==t&&t.length||e||a||s)},cIsExtraInfo(){var t,e,a;return(null===(t=this.ticketFocado)||void 0===t||null===(e=t.contact)||void 0===e||null===(a=e.extraInfo)||void 0===a?void 0:a.length)>0},openTickets(){let t=this.tickets.filter((t=>"open"===t.status&&!t.isGroup));return t=this.ordenar?this.sortTicketsAscending(t):this.sortTicketsDescending(t),Object.values(this.groupTickets(t))},pendingTickets(){let t=this.tickets.filter((t=>"pending"===t.status&&!t.isGroup));return t=this.ordenar?this.sortTicketsAscending(t):this.sortTicketsDescending(t),Object.values(this.groupTickets(t))},pendingTicketsChatBot(){let t=this.tickets.filter((t=>"pending"===t.status&&!t.isGroup&&(t.stepAutoReplyId&&t.autoReplyId||t.chatFlowId&&t.stepChatFlow)));return t=this.ordenar?this.sortTicketsAscending(t):this.sortTicketsDescending(t),Object.values(this.groupTickets(t))},closedTickets(){let t=this.tickets.filter((t=>"closed"===t.status&&!t.isGroup));return t=this.ordenar?this.sortTicketsAscending(t):this.sortTicketsDescending(t),t},closedGroupTickets(){let t=this.tickets.filter((t=>"closed"===t.status&&t.isGroup));return t=this.ordenar?this.sortTicketsAscending(t):this.sortTicketsDescending(t),t},openGroupTickets(){let t=this.tickets.filter((t=>"open"===t.status&&t.isGroup));return t=this.ordenar?this.sortTicketsAscending(t):this.sortTicketsDescending(t),Object.values(this.groupTickets(t))},pendingGroupTickets(){let t=this.tickets.filter((t=>"pending"===t.status&&t.isGroup));return t=this.ordenar?this.sortTicketsAscending(t):this.sortTicketsDescending(t),Object.values(this.groupTickets(t))},privateMessages(){let t=this.tickets.filter((t=>t.unreadMessages&&!t.isGroup));return t=this.ordenar?this.sortTicketsAscending(t):this.sortTicketsDescending(t),t},groupMessages(){let t=this.tickets.filter((t=>t.unreadMessages&&t.isGroup));return t=this.ordenar?this.sortTicketsAscending(t):this.sortTicketsDescending(t),t}},methods:{async downloadPDF(){const t=new kt["a"];try{var e,s;const i=new Image;i.src=a("cd82"),await new Promise((t=>{i.onload=t}));const o=await Object(r["p"])({ticketId:this.ticketFocado.id}),n=o.data.messages;t.addImage(i,"PNG",0,0,210,297);const c=(null===(e=n[0])||void 0===e||null===(s=e.contact)||void 0===s?void 0:s.name)||"Contato";t.setFontSize(16),t.text(`Contato: ${c} - Ticket: ${this.ticketFocado.id}`,10,10);let l=30;n.forEach(((e,a)=>{l>280&&(t.addPage(),l=10,t.addImage(i,"PNG",0,0,210,297));const s=e.fromMe?"Eu":e.contact.name||"Contato";t.setFontSize(12),t.text(`Mensagem de: ${s}`,10,l),l+=10;const o=t.splitTextToSize(e.body,180);t.text(o,10,l),l+=10*o.length,l+=10})),t.save("atendimento_"+this.ticketFocado.id+"_mensagens.pdf")}catch(i){console.error("Erro ao baixar as mensagens:",i)}},getPhoneNumberLink(t){return t.startsWith("55")&&t.charAt(4)>5?`tel:${t.slice(0,4)}9${t.slice(-8)}`:`tel:${t}`},toggleSilentMode(){this.isSilentMode=!this.isSilentMode,localStorage.setItem("silentMode",this.isSilentMode),window.location.reload()},sortTicketsAscending(t){return t.sort(((t,e)=>new Date(t.updatedAt)-new Date(e.updatedAt)))},sortTicketsDescending(t){return t.sort(((t,e)=>new Date(e.updatedAt)-new Date(t.updatedAt)))},groupTickets(t){return t.reduce(((t,e)=>{const a=`${e.whatsappId}_${e.userId}_${e.status}_${e.contactId}`;return(!t[a]||t[a].id>e.id)&&(t[a]=e),t}),{})},async getTaskSummary(){const t=localStorage.getItem("username");try{const e=await Object(E["b"])({owner:t});this.delayed=e.data.delayed,this.venceHoje=e.data.venceHoje}catch(e){console.error("Erro ao consultar resumo de tarefas:",e)}},async loadOrdenar(){try{switch(this.$store.commit("RESET_TICKETS"),this.loading=!0,this.ordenar){case!1:this.ordenar=null;break;case!0:this.ordenar=!1;break;case null:this.ordenar=!0;break}this.consultarTicketsOrdenados()}catch(t){console.log(t)}},async atualizarUsuario(){try{const{data:t}=await Object(ut["c"])(this.usuario.userId);this.filasUser=t.queues}catch(t){console.error(t),this.$notificarErro("Problema ao carregar usuário",t)}},async loadMoreOpenTickets(){this.$q.notify({type:"warning",message:"Atendimentos carregados nas abas aberto, pendente e fechado!",position:"top"});try{this.loading=!0,this.pesquisaTickets.pageNumber++,await this.consultarTickets(),this.loading=!1}catch(t){this.loading=!1}},showNotification(){this.$q.notify({type:"warning",message:"Atendimentos carregados nas abas aberto, pendente e fechado!",position:"top"}),this.loadMoreOpenTickets()},toggleDrawer(){this.drawerContact=!1},formatId(t){const e=Object(gt["a"])(t);return e},async listarMensagens(){try{const{data:t}=await Object(ht["b"])(this.usuario.userId);this.notificacaoInternaNaoLida=t.count}catch(t){}},handlerNotifications(t){var e;const a=JSON.parse(localStorage.getItem("configuracoes")),s=null===a||void 0===a?void 0:a.find((t=>"groupnotification"===t.key));if("disabled"===(null===s||void 0===s?void 0:s.value)&&null!==(e=t.ticket)&&void 0!==e&&e.isGroup)return;const i={body:`${t.body} - ${Object(ot["a"])(new Date,"HH:mm")}`,icon:t.ticket.contact.profilePicUrl,tag:t.ticket.id,renotify:!0},o=new Notification(`Mensagem de ${t.ticket.contact.name}`,i);setTimeout((()=>{o.close()}),1e4),o.onclick=e=>{e.preventDefault(),window.focus(),this.$store.dispatch("AbrirChatMensagens",t.ticket),this.$router.push({name:"atendimento"})}},async listarConfiguracoes(){const{data:t}=await Object(ct["b"])();localStorage.setItem("configuracoes",JSON.stringify(t));const e=t.find((t=>"ignoreGroupMsg"===t.key));this.grupoAtivo=e.value;const a=t.find((t=>"universalCounter"===t.key));this.contadorUniversal=a.value;const s=t.find((t=>"ContactAdmin"===t.key));this.ContactAdmin=s.value;const i=t.find((t=>"chatbotLane"===t.key));this.chatbotLane=i.value;const o=t.find((t=>"spyticket"===t.key));this.spyticket=o.value;const n=t.find((t=>"hidetab"===t.key));this.hidetab=!!n&&"enabled"===n.value},onScroll(t){t.verticalPercentage<=.85||this.onLoadMore()},editContact(t){this.selectedContactId=t,this.modalContato=!0},deleteTicket(t){this.$q.dialog({title:"Atenção!! Deseja realmente deletar o Ticket? ",cancel:{label:"Não",color:"primary",push:!0},ok:{label:"Sim",color:"negative",push:!0},persistent:!0}).onOk((()=>{this.loading=!0,Object(r["j"])(t).then((t=>{this.$q.notify({type:"positive",progress:!0,position:"top",message:"Ticket deletado!",actions:[{icon:"close",round:!0,color:"white"}]}),this.$router.push("/atendimento/chats"),setTimeout((()=>{window.location.reload()}),5e3)})).catch((t=>{console.error(t),this.$notificarErro("Não é possível deletar o ticket",t)})),this.loading=!1}))},contatoEditado(t){this.$store.commit("UPDATE_TICKET_FOCADO_CONTACT",t)},async consultarTickets(t={}){const e={...this.pesquisaTickets,...t};try{const{data:t}=await Object(r["f"])(e);this.countTickets=t.count,this.$store.commit("LOAD_TICKETS",t.tickets),this.$store.commit("SET_HAS_MORE",t.hasMore)}catch(a){this.$notificarErro("Algum problema",a),console.error(a)}},async consultarTicketsOrdenados(t={}){const e={...this.pesquisaTickets,...t};try{const{data:t}=await Object(r["f"])(e);this.countTickets=t.count;const a=t.tickets;1==this.ordenar&&(a.sort(((t,e)=>{const a=new Date(t.updatedAt),s=new Date(e.updatedAt);return a.getTime()>s.getTime()?1:a.getTime()<s.getTime()?-1:0})),this.$store.commit("LOAD_TICKETS",a)),0==this.ordenar&&(a.sort(((t,e)=>{const a=new Date(t.updatedAt),s=new Date(e.updatedAt);return a.getTime()>s.getTime()?1:a.getTime()<s.getTime()?-1:0})),this.$store.commit("LOAD_TICKETS",a)),null==this.ordenar&&this.$store.commit("LOAD_TICKETS",a),this.$store.commit("SET_HAS_MORE",t.hasMore),console.log(a)}catch(a){this.$notificarErro("Algum problema",a),console.error(a)}},async BuscarTicketFiltro(){this.$store.commit("RESET_TICKETS"),this.loading=!0,localStorage.setItem("filtrosAtendimento",JSON.stringify(this.pesquisaTickets)),this.pesquisaTickets={...this.pesquisaTickets,pageNumber:1},await this.consultarTickets(this.pesquisaTickets),this.loading=!1,this.$setConfigsUsuario({isDark:this.$q.dark.isActive})},async onLoadMore(){if(0!==this.tickets.length&&this.hasMore&&!this.loading)try{this.loading=!0,this.pesquisaTickets.pageNumber++,await this.consultarTickets(),this.loading=!1}catch(t){this.loading=!1}},async listarFilas(){const{data:t}=await Object(N["d"])();this.filas=t,localStorage.setItem("filasCadastradas",JSON.stringify(t||[]))},async listarWhatsapps(){const{data:t}=await Object(st["d"])();this.$store.commit("LOAD_WHATSAPPS",t)},async listarEtiquetas(){const{data:t}=await Object(lt["d"])(!0);this.etiquetas=t},async abrirModalUsuario(){this.modalUsuario=!0},async efetuarLogout(){try{await Object(dt["b"])(Tt),localStorage.removeItem("token"),localStorage.removeItem("username"),localStorage.removeItem("profile"),localStorage.removeItem("userId"),localStorage.removeItem("queues"),localStorage.removeItem("usuario"),localStorage.removeItem("filtrosAtendimento"),this.$router.go({name:"login",replace:!0})}catch(t){this.$notificarErro("Não foi possível realizar logout",t)}},copyContent(t){navigator.clipboard.writeText(t).then((()=>{})).catch((t=>{console.error("Erro ao copiar o conteúdo: ",t)}))},deletarMensagem(t){const e={...t};this.$q.dialog({title:"Atenção!! Deseja realmente deletar a mensagem? ",message:"Mensagens antigas não serão apagadas no cliente.",cancel:{label:"Não",color:"primary",push:!0},ok:{label:"Sim",color:"negative",push:!0},persistent:!0}).onOk((()=>{this.loading=!0,Object(r["i"])(e).then((e=>{this.loading=!1,t.isDeleted=!0})).catch((t=>{this.loading=!1,console.error(t),this.$notificarErro("Não foi possível apagar a mensagem",t)}))})).onCancel((()=>{}))},async tagSelecionada(t){const{data:e}=await Object(m["e"])(this.ticketFocado.contact.id,[...t]);this.contatoEditado(e)},async carteiraDefinida(t){const{data:e}=await Object(m["c"])(this.ticketFocado.contact.id,[...t]);this.contatoEditado(e)},async listarUsuarios(){try{const{data:t}=await await Object(ut["e"])({pageNumber:this.pageNumber});this.usuarios=[...this.usuarios,...t.users],this.hasMore=t.hasMore,this.hasMore&&(this.pageNumber+=1,this.listarUsuarios())}catch(t){console.error(t),this.$notificarErro("Problema ao carregar usuários",t)}},setValueMenu(){this.drawerTickets=!this.drawerTickets},setValueMenuContact(){this.drawerContact=!this.drawerContact},async abrirModalLogs(){const{data:t}=await Object(r["e"])({ticketId:this.ticketFocado.id});this.logsTicket=t,this.exibirModalLogs=!0}},beforeMount(){this.$store.commit("RESET_TICKETS"),this.listarFilas(),this.listarEtiquetas(),this.listarConfiguracoes();const t=JSON.parse(localStorage.getItem("filtrosAtendimento"));null!==t&&void 0!==t&&t.pageNumber||localStorage.setItem("filtrosAtendimento",JSON.stringify(this.pesquisaTickets))},async mounted(){this.getTaskSummary(),this.loadingMount=!0,this.notify=this.$q.notify({position:"top",type:"positive",message:"Aguarde enquanto os tickets são carregados...",progress:!0,actions:[{icon:"close",round:!0,color:"white"}]}),localStorage.getItem("reloaded")?localStorage.removeItem("reloaded"):(localStorage.setItem("reloaded","true"),window.location.reload());try{var t,e;this.$root.$on("infor-cabecalo-chat:acao-menu",this.setValueMenu),this.$root.$on("update-ticket:info-contato",this.setValueMenuContact),await this.atualizarUsuario(),await this.listarMensagens(),this.$store.commit("UPDATE_SHOW_MENU",this.showMenu),this.socketTicketList(),this.pesquisaTickets=JSON.parse(localStorage.getItem("filtrosAtendimento")),this.$root.$on("handlerNotifications",this.handlerNotifications),await this.listarWhatsapps(),await this.consultarTickets(),await this.listarUsuarios();try{await this.atualizarUsuario(),await this.listarMensagens(),await this.loadMoreOpenTickets()}catch(a){console.log(a)}const{data:s}=await Object(rt["d"])();this.mensagensRapidas=s;const i=localStorage.getItem("silentMode");if(null!==i&&(this.isSilentMode=JSON.parse(i)),"Notification"in window&&Notification.requestPermission(),this.userProfile=localStorage.getItem("profile"),null!==(t=this.$route)&&void 0!==t&&null!==(e=t.params)&&void 0!==e&&e.ticketId){const t=this.$route.params.ticketId;if(t&&this.tickets.length>0){const e=this.tickets.find((e=>e.id===+t));e&&(this.$q.screen.lt.md&&"pending"!==e.status&&this.$root.$emit("infor-cabecalo-chat:acao-menu"),this.$store.commit("SET_HAS_MORE",!0),this.$store.dispatch("AbrirChatMensagens",e))}}else this.$router.push({name:"chat-empty"})}catch(s){console.error("Erro ao montar o componente:",s)}finally{this.isMounted=!0,this.loadingMount=!1,this.notify&&this.notify()}},beforeRouteLeave(t,e,a){this.isMounted?a():a(!1)},destroyed(){this.$store.commit("RESET_TICKETS"),this.$root.$off("handlerNotifications",this.handlerNotifications),this.$root.$off("infor-cabecalo-chat:acao-menu",this.setValueMenu),this.$root.$on("update-ticket:info-contato",this.setValueMenuContact),this.$store.commit("TICKET_FOCADO",{})}},wt=Ct,yt=(a("9127"),a("4d5a")),xt=a("9404"),_t=a("65c6"),St=a("58a81"),$t=a("6b1d"),At=a("27f9"),It=a("9564"),Mt=a("8f8e"),Nt=a("429b"),Et=a("7460"),Ot=a("4983"),Dt=a("09e3"),Ft=a("068f"),Qt=a("b047"),Pt=a("05eb"),Lt=a("74af"),jt=a("8572"),Ut=Object(k["a"])(wt,s,i,!1,null,null,null);e["default"]=Ut.exports;A()(Ut,"components",{QLayout:yt["a"],QDrawer:xt["a"],QToolbar:_t["a"],QBtn:C["a"],QAvatar:X["a"],QMenu:H["a"],QList:Z["a"],QItemLabel:x["a"],QItem:w["a"],QItemSection:y["a"],QTooltip:U["a"],QSpace:Y["a"],QBadge:St["a"],QLinearProgress:$t["a"],QInput:At["a"],QIcon:j["a"],QToggle:It["a"],QSeparator:tt["a"],QSelect:T["a"],QCheckbox:Mt["a"],QTabs:Nt["a"],QTab:Et["a"],QScrollArea:Ot["a"],QPageContainer:Dt["a"],QCard:f["a"],QCardSection:q["a"],QImg:Ft["a"],QChip:Qt["a"],QDialog:v["a"],QTimeline:Pt["a"],QTimelineEntry:Lt["a"],QField:jt["a"]}),A()(Ut,"directives",{ClosePopup:S["a"],Ripple:z["a"]})},b3af:function(t,e,a){"use strict";a("4d74")}}]);