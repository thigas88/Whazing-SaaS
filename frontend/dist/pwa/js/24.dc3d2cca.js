(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[24],{2162:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t._self._c;return"admin"===t.userProfile?e("div",[e("q-card",{attrs:{bordered:""}},[e("q-card-section",[e("div",{staticClass:"text-h6",class:t.$q.dark.isActive?"text-green":"",attrs:{"q-px-sm":""}},[t._v("\n        Relat√≥rio de Contatos ")])]),e("q-card-section",{staticClass:"q-pt-none"},[e("fieldset",[e("legend",{staticClass:"q-px-sm"},[t._v("Filtros (Data cria√ß√£o do contato)")]),e("div",{staticClass:"row q-gutter-md items-end"},[e("div",{staticClass:"col-grow"},[e("label",[t._v("In√≠cio")]),e("DatePick",{attrs:{dense:""},model:{value:t.pesquisa.startDate,callback:function(e){t.$set(t.pesquisa,"startDate",e)},expression:"pesquisa.startDate"}})],1),e("div",{staticClass:"col-grow"},[e("label",[t._v("Final")]),e("DatePick",{attrs:{dense:""},model:{value:t.pesquisa.endDate,callback:function(e){t.$set(t.pesquisa,"endDate",e)},expression:"pesquisa.endDate"}})],1),e("div",{staticClass:"col-grow text-center"},[e("q-btn",{staticClass:"q-mr-sm",attrs:{color:"info",label:"Gerar",icon:"refresh"},on:{click:t.gerarRelatorio}}),e("q-btn",{staticClass:"q-mr-sm",attrs:{color:"black",icon:"print",label:"Imprimir"},on:{click:function(e){return t.printReport("tRelatorioContatos")}}}),e("q-btn",{attrs:{color:"green",label:"Excel"},on:{click:function(e){return t.exportTable("tRelatorioContatos")}}})],1)])])])],1),e("div",{staticClass:"row"},[e("div",{staticClass:"col-xs-12 q-mt-sm"},[e("div",{staticClass:"tableLarge q-ma-sm q-markup-table q-table__container q-table__card q-table--cell-separator q-table--flat q-table--bordered q-table--no-wrap",attrs:{id:"tRelatorioContatos"}},[e("table",{staticClass:"q-pb-md q-table q-tabs--dense",attrs:{id:"tableRelatorioContatos"}},[e("thead",[e("tr",t._l(t.bl_sintetico?t.columns.filter((e=>e.name==t.opcoesRelatorio.agrupamento)):t.columns,(function(a){return e("td",{key:a.name},[t._v("\n                "+t._s(a.label)+"\n              ")])})),0)]),e("tbody",[t.bl_sintetico?t._e():t._l(t.contatos,(function(a){return e("tr",{key:a.number},t._l(t.columns,(function(o){return e("td",{key:o.name+"-"+a.id,class:o.class,style:o.style},[t._v("\n                  "+t._s(void 0!==o.format?o.format(a[o.field],a):a[o.field])+"\n                ")])})),0)}))],2)])])])]),e("ccPrintModelLandscape",{attrs:{id:"slotTableRelatorioContatos",imprimirRelatorio:t.imprimir,title:"Relat√≥rio de Contatos",styleP:"\n    table { width: 100%; font-size: 10px; border-spacing: 1; border-collapse: collapse;  }\n    #tableReport tr td { border:1px solid #DDD; padding-left: 10px; padding-right: 10px;  }\n    #tableReport thead tr:nth-child(1) td { text-align: center; padding: 5px; font-weight: bold; color: #000; background: lightgrey; opacity: 1; }\n    #lineGroup { background: black; line-height: 30px; }\n    #quebraAgrupamentoRelatorio { border-bottom: 1px solid black !important; }\n    #st_nome, #st_tipo_atendimento, #st_status_faturamento, #st_convenio, #st_nome_profissional, #st_status, #st_nome_unidade, #st_nome_profissional { width: 200px; word-wrap: normal !important; white-space: normal !important; }\n    #dt_atendimento_unidade { width: 100px; text-align: center }\n    "},scopedSlots:t._u([{key:"body",fn:function(){return[e("table",{staticClass:"q-pb-md q-table q-tabs--dense"},[e("thead",[e("tr",t._l(t.bl_sintetico?t.columns.filter((e=>e.name==t.opcoesRelatorio.agrupamento)):t.columns,(function(a){return e("td",{key:a.name},[t._v("\n              "+t._s(a.label)+"\n            ")])})),0)]),e("tbody",[t.bl_sintetico?t._e():t._l(t.contatos,(function(a){return e("tr",{key:a.number},t._l(t.columns,(function(o){return e("td",{key:o.name+"-"+a.id,class:o.class,style:o.style},[t._v("\n                "+t._s(void 0!==o.format?o.format(a[o.field],a):a[o.field])+"\n              ")])})),0)}))],2)])]},proxy:!0}],null,!1,1711674830)})],1):t._e()},n=[],s=a("b166"),i=a("ef06"),l=a("b09f"),r=a("1146"),c=a.n(r),d=a("ab52"),p={name:"RelatorioContatosGeral",components:{ccPrintModelLandscape:l["a"]},props:{moduloAtendimento:{type:Boolean,default:!1}},data(){return{userProfile:"user",data:null,bl_sintetico:!1,contatos:[],columns:[{name:"name",label:"Nome",field:"name",align:"left",style:"width: 300px",format:t=>this.replaceEmojis(t)},{name:"number",label:"WhatsApp",field:"number",align:"center",style:"width: 300px"},{name:"email",label:"Email",field:"email",style:"width: 500px",align:"left"}],pesquisa:{startDate:Object(s["a"])(Object(i["a"])(new Date,{days:30}),"yyyy-MM-dd"),endDate:Object(s["a"])(new Date,"yyyy-MM-dd")},ExibirTabela:!0,imprimir:!1}},methods:{replaceEmojis(t){var e=["[¬†-‚öü]","[‚ö†-„äü]","[üÄÑ-üßÄ]"];return t.replace(new RegExp(e.join("|"),"ug"),"")},sortObject(t){return Object.keys(t).sort().reduce(((e,a)=>(e[a]=t[a],e)),{})},printReport(t){this.imprimir=!this.imprimir},exportTable(){const t=c.a.utils.table_to_sheet(document.getElementById("tableRelatorioContatos"),{raw:!0});for(const a in t)"J"==a[0]&&(t[a].t="n",t[a].v=t[a].v.replace(/\./g,"").replace(",","."));const e=c.a.utils.book_new();c.a.utils.book_append_sheet(e,t,"Relat√≥rio Atendimentos"),c.a.writeFile(e,"relatorio-contatos-geral.xlsx")},async gerarRelatorio(){const{data:t}=await Object(d["h"])(this.pesquisa);this.contatos=t.contacts}},async mounted(){this.userProfile=localStorage.getItem("profile"),this.gerarRelatorio()}},m=p,b=(a("72cc"),a("2877")),u=a("f09f"),f=a("a370"),_=a("9c40"),g=a("2bb1"),q=a("eaac"),y=a("429b"),h=a("eebe"),x=a.n(h),w=Object(b["a"])(m,o,n,!1,null,"732d100d",null);e["default"]=w.exports;x()(w,"components",{QCard:u["a"],QCardSection:f["a"],QBtn:_["a"],QMarkupTable:g["a"],QTable:q["a"],QTabs:y["a"]})},5343:function(t,e,a){},"72cc":function(t,e,a){"use strict";a("5343")}}]);