(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"603c":function(t,e,a){},"7ff2":function(t,e,a){"use strict";a("603c")},e090:function(t,e,a){"use strict";a.r(e);a("14d9");var o=function(){var t=this,e=t._self._c;return e("div",[t.canAccessPage?t._e():e("div",[e("q-banner",{staticClass:"bg-red text-white",attrs:{dense:"","inline-actions":""},scopedSlots:t._u([{key:"avatar",fn:function(){return[e("q-icon",{attrs:{name:"warning"}})]},proxy:!0},{key:"action",fn:function(){return[e("q-btn",{attrs:{flat:"",dense:""},on:{click:t.redirectHome}},[t._v("OK")])]},proxy:!0}],null,!1,4218738526)},[t._v("\n      Somente administradores podem acessar esta página.\n      ")])],1),t.canAccessPage?e("div",[e("q-table",{staticClass:"contact-table my-sticky-dynamic container-rounded-10",class:{"q-ma-lg":!t.isChatContact,"q-ml-md heightChat":t.isChatContact},attrs:{title:"Contatos",id:"tabela-contatos-"+(t.isChatContact?"atendimento":""),data:t.contacts,columns:t.columns,loading:t.loading,"row-key":"id","virtual-scroll":"","virtual-scroll-item-size":48,"virtual-scroll-sticky-size-start":48,pagination:t.pagination,"rows-per-page-options":[0],bordered:t.isChatContact,square:t.isChatContact,flat:t.isChatContact,separator:t.isChatContact?"vertical":"horizontal"},on:{"update:pagination":function(e){t.pagination=e},"virtual-scroll":t.onScroll},scopedSlots:t._u([{key:"top",fn:function(){return[e("div",{staticClass:"row full-width q-table__title items-center"},[t.isChatContact?e("q-btn",{staticClass:"q-mr-sm",attrs:{color:"black",round:"",flat:"",icon:"mdi-close"},on:{click:function(e){return t.$router.push({name:"chat-empty"})}}}):t._e(),e("h2",{class:t.$q.dark.isActive?"text-green":""},[e("q-icon",{attrs:{name:"eva-people-outline q-pr-sm"}}),t._v("\n          Contatos\n        ")],1),e("div",{staticClass:"contact-header full-width"},[e("q-input",{staticClass:"contact-search",class:{"order-last q-mt-md":t.$q.screen.width<500},staticStyle:{width:"300px"},attrs:{filled:"",debounce:"500",clearable:"",placeholder:"Localize"},on:{input:t.filtrarContato},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"search"}})]},proxy:!0}],null,!1,2901929698),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),e("q-btn",{staticClass:"generate-button btn-rounded-50 q-ml-md",attrs:{icon:"eva-sync-outline",label:"Sincronizar Contatos"},on:{click:function(e){return t.confirmarSincronizarContatos("whatsapp")}}}),t.isChatContact?t._e():e("q-btn",{staticClass:"generate-button btn-rounded-50 q-ml-md",attrs:{icon:"eva-cloud-upload-outline",label:"Importar"},on:{click:function(e){t.modalImportarContatos=!0}}},[e("q-tooltip",{attrs:{offset:[5,5]}},[t._v("\n          Nome;User"),e("br"),t._v("\n          Número;5551900000\n        ")])],1),t.isChatContact?t._e():e("q-btn",{staticClass:"generate-button btn-rounded-50 q-ml-md",attrs:{icon:"eva-cloud-download-outline",label:"Exportar"},on:{click:t.handleExportContacts}}),e("q-btn",{staticClass:"generate-button btn-rounded-50 q-ml-md",attrs:{icon:"eva-person-add-outline",label:"Adicionar"},on:{click:function(e){t.selectedContactId=null,t.modalContato=!0}}})],1)],1)]},proxy:!0},{key:"body-cell-profilePicUrl",fn:function(a){return[e("q-td",[e("q-avatar",{staticStyle:{border:"1px solid #9e9e9ea1 !important"}},[a.value?t._e():e("q-icon",{attrs:{name:"mdi-account",size:"1.5em",color:"grey-5"}}),e("q-img",{staticStyle:{"max-width":"150px"},attrs:{src:a.value},scopedSlots:t._u([{key:"error",fn:function(){return[e("q-icon",{attrs:{name:"mdi-account",size:"1.5em",color:"grey-5"}})]},proxy:!0}],null,!0)})],1)],1)]}},{key:"body-cell-acoes",fn:function(a){return[e("q-td",{staticClass:"text-center"},[a.row.number?e("q-btn",{attrs:{flat:"",round:"",icon:"img:whatsapp-logo.png"},on:{click:function(e){return t.handleSaveTicket(a.row,"whatsapp")}}}):t._e(),a.row.instagramPK?e("q-btn",{attrs:{flat:"",round:"",icon:"img:hub_instagram-logo.png"},on:{click:function(e){return t.handleSaveTicket(a.row,"hub_facebook")}}}):t._e(),a.row.messengerId?e("q-btn",{attrs:{flat:"",round:"",icon:"img:hub_facebook-logo.png"},on:{click:function(e){return t.handleSaveTicket(a.row,"hub_facebook")}}}):t._e(),a.row.webchatId?e("q-btn",{attrs:{flat:"",round:"",icon:"img:hub_webchat-logo.png"}}):t._e(),e("q-btn",{class:t.$q.dark.isActive?"text-green":"",attrs:{flat:"",round:"",icon:"eva-edit-outline"},on:{click:function(e){return t.editContact(a.row.id)}}}),e("q-btn",{class:t.$q.dark.isActive?"text-green":"",attrs:{flat:"",round:"",icon:"eva-trash-outline"},on:{click:function(e){return t.deleteContact(a.row.id)}}})],1)]}},{key:"body-cell-number",fn:function(a){return[e("q-td",[a.row.number?e("span",{staticClass:"blur-effect"},[e("a",{class:t.$q.dark.isActive?"text-white":"",attrs:{href:t.getPhoneNumberLink(a.row.number)}},[t._v("\n            "+t._s(t.formatId(a.row.number))+"\n\n          ")])]):t._e()]),e("q-td")]}},{key:"body-cell-email",fn:function(a){return[e("q-td",[a.row.email?e("span",[e("a",{class:t.$q.dark.isActive?"text-white":"",attrs:{href:"mailto:"+a.row.email}},[t._v(t._s(a.row.email))])]):t._e()])]}},{key:"body-cell-name",fn:function(a){return[e("q-td",[a.row.name?e("span",{class:t.$q.dark.isActive?"text-white":""},[t._v("\n          "+t._s(a.row.name)+"\n        ")]):t._e()])]}},{key:"body-cell-tags",fn:function(a){return[e("q-td",{attrs:{props:a}},[e("span",{class:t.$q.dark.isActive?"bg-black text-white":"",domProps:{innerHTML:t._s(t.formatTags(a.row.tags))}})])]}},{key:"body-cell-disableBot",fn:function(t){return[e("q-td",{staticClass:"text-center"},[e("q-icon",{attrs:{size:"24px",name:t.value?"mdi-close-circle-outline":"mdi-check-circle-outline",color:t.value?"negative":"positive"}})],1)]}},{key:"body-cell-disableCampaign",fn:function(t){return[e("q-td",{staticClass:"text-center"},[e("q-icon",{attrs:{size:"24px",name:t.value?"mdi-close-circle-outline":"mdi-check-circle-outline",color:t.value?"negative":"positive"}})],1)]}},{key:"pagination",fn:function({pagination:e}){return[t._v("\n      "+t._s(t.contacts.length)+"/"+t._s(e.rowsNumber)+"\n    ")]}}],null,!1,4208757670)}),e("ContatoModal",{attrs:{contactId:t.selectedContactId,modalContato:t.modalContato},on:{"update:modalContato":function(e){t.modalContato=e},"update:modal-contato":function(e){t.modalContato=e},"contatoModal:contato-editado":t.UPDATE_CONTACTS,"contatoModal:contato-criado":t.UPDATE_CONTACTS}}),e("q-dialog",{attrs:{persistent:""},on:{show:t.abrirEnvioArquivo},model:{value:t.modalImportarContatos,callback:function(e){t.modalImportarContatos=e},expression:"modalImportarContatos"}},[e("q-card",{staticClass:"modal-container container-rounded-10"},[e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",dense:"",color:"negative",icon:"eva-close"},on:{click:function(e){t.isImportCSV=!1,t.modalImportarContatos=!1}}})],1),e("q-card-section",{staticClass:"items-center"},[e("div",{staticClass:"text-h6 text-center font-family-main"},[t._v("Importar Contatos")])]),e("div",{staticClass:"q-ma-lg container-border container-rounded-10"},[e("q-card-section",[e("q-file",{ref:"PickerFileMessage",attrs:{rounded:"",id:"PickerFileMessage","bg-color":"blue-grey-1",outlined:"",dense:"","use-chips":"",accept:".csv",label:"Importar contatos",hint:"O arquivo deve conter as colunas Nome e Numero"},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"cloud_upload"}})]},proxy:!0}],null,!1,1406165409),model:{value:t.file,callback:function(e){t.file=e},expression:"file"}})],1)],1),e("div",{staticClass:"q-ma-lg container-border container-rounded-10"},[e("q-card-section",[e("q-card",{staticClass:"bg-white q-mt-sm btn-rounded",staticStyle:{width:"100%"},attrs:{bordered:"",flat:""}},[e("q-card-section",{staticClass:"text-bold font-family-main q-pb-none"},[t._v("\n            Etiquetas\n            "),e("q-separator")],1),e("q-card-section",{staticClass:"q-pa-none"},[e("q-select",{attrs:{square:"",borderless:"",multiple:"",options:t.etiquetas,"use-chips":"","option-value":"id","option-label":"tag","emit-value":"","map-options":"","dropdown-icon":"add"},scopedSlots:t._u([{key:"option",fn:function({itemProps:a,itemEvents:o,opt:n,selected:i,toggleOption:s}){return[e("q-item",t._g(t._b({},"q-item",a,!1),o),[e("q-item-section",[e("q-item-label",{domProps:{innerHTML:t._s(n.tag)}})],1),e("q-item-section",{attrs:{side:""}},[e("q-checkbox",{attrs:{value:i},on:{input:function(t){return s(n)}}})],1)],1)]}},{key:"selected-item",fn:function({opt:a}){return[e("q-chip",{staticClass:"q-ma-xs row col-12 text-body1",attrs:{dense:"",square:"",color:"white","text-color":"primary"}},[e("q-icon",{staticClass:"q-mr-sm",style:`color: ${a.color}`,attrs:{name:"mdi-pound-box-outline",size:"28px"}}),t._v("\n                  "+t._s(a.tag)+"\n                ")],1)]}},{key:"no-option",fn:function({itemProps:a,itemEvents:o}){return[e("q-item",t._g(t._b({},"q-item",a,!1),o),[e("q-item-section",[e("q-item-label",{staticClass:"text-negative text-bold"},[t._v("\n                      Ops... Sem etiquetas criadas!\n                    ")]),e("q-item-label",{attrs:{caption:""}},[t._v("\n                      Cadastre novas etiquetas na administração de sistemas.\n                    ")])],1)],1)]}}],null,!1,3712714725),model:{value:t.tags,callback:function(e){t.tags=e},expression:"tags"}})],1)],1)],1),e("q-card-section",[e("q-card",{staticClass:"bg-white q-mt-sm btn-rounded",staticStyle:{width:"100%"},attrs:{bordered:"",flat:""}},[e("q-card-section",{staticClass:"text-bold font-family-main q-pb-none"},[t._v("\n            Carteira\n            "),e("q-separator")],1),e("q-card-section",{staticClass:"q-pa-none"},[e("q-select",{attrs:{square:"",borderless:"",multiple:"","max-values":1,options:t.usuarios,"use-chips":"","option-value":"id","option-label":"name","emit-value":"","map-options":"","dropdown-icon":"add"},model:{value:t.wallets,callback:function(e){t.wallets=e},expression:"wallets"}})],1)],1)],1)],1),e("q-card-section"),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-ml-md btn-rounded-50",attrs:{color:"negative",label:"Cancelar"},on:{click:function(e){t.isImportCSV=!1,t.modalImportarContatos=!1}}}),e("q-btn",{staticClass:"q-ml-md btn-rounded-50",attrs:{color:"positive",icon:"eva-checkmark",label:"Confirmar"},on:{click:t.handleImportCSV}}),e("q-btn",{staticClass:"q-ml-md generate-button btn-rounded-50",attrs:{icon:"eva-download",label:"Baixar Modelo"},on:{click:t.downloadModelCsv}})],1)],1)],1),e("q-dialog",{attrs:{persistent:""},on:{hide:function(e){t.modalTransferirTicket=!1}},model:{value:t.modalTransferirTicket,callback:function(e){t.modalTransferirTicket=e},expression:"modalTransferirTicket"}},[e("q-card",{staticClass:"q-pa-md",staticStyle:{width:"500px"}},[e("q-card-section",[e("div",{staticClass:"text-h6"},[t._v("Selecione o destino:")])]),e("q-card-section",[e("q-select",{attrs:{square:"",outlined:"",options:t.filas,"emit-value":"","map-options":"","option-value":"id","option-label":"queue",label:"Fila de destino"},model:{value:t.filaSelecionada,callback:function(e){t.filaSelecionada=e},expression:"filaSelecionada"}})],1),e("q-card-section",[e("q-select",{attrs:{square:"",outlined:"",options:t.usuariosTransferencia.filter(t.filterUsers),"emit-value":"","map-options":"","option-value":"id","option-label":"name",label:"Usuário destino"},model:{value:t.usuarioSelecionado,callback:function(e){t.usuarioSelecionado=e},expression:"usuarioSelecionado"}})],1),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-mr-lg",attrs:{flat:"",label:"Sair",color:"negative"}}),e("q-btn",{attrs:{flat:"",label:"Salvar",color:"primary"},on:{click:t.confirmarTransferenciaTicket}})],1)],1)],1)],1):t._e()])},n=[],i=(a("88a7"),a("271a"),a("5494"),a("c5bd")),s=a("0582"),r=a("73ad"),l=a("006a"),c=a("9a1b"),d=a("163e"),u=a("2f62"),m=a("ee0e"),p=a("7963");const h=+localStorage.getItem("userId");var f={name:"IndexContatos",components:{ContatoModal:l["a"]},userProfile:"user",usuario:{},props:{isChatContact:{type:Boolean,default:!1}},computed:{canAccessPage(){return"enabled"!==this.ContactAdmin||"admin"===this.userProfile},...Object(u["b"])(["whatsapps"])},data(){return{modalTransferirTicket:!1,usuarioSelecionado:null,filaSelecionada:null,filas:[],usuariosTransferencia:[],contacts:[],userProfile:"user",ContactAdmin:null,ticketFocado:"",modalImportarContatos:!1,modalContato:!1,file:[],isImportCSV:!1,filter:null,selectedContactId:null,params:{pageNumber:1,searchParam:null,hasMore:!0},wallets:[],tags:[],etiquetas:[],usuarios:[],pagination:{rowsPerPage:100,rowsNumber:0,lastIndex:0},loading:!1,columns:[{name:"profilePicUrl",label:"",field:"profilePicUrl",style:"width: 50px",align:"center"},{name:"name",label:"Nome",field:"name",align:"left",style:"width: 300px",format:(t,e)=>e.number&&e.name==e.number&&e.pushname?e.pushname:e.name},{name:"number",label:"WhatsApp",field:"number",align:"center",style:"width: 300px"},{name:"wallet",label:"Carteira",field:"wallet",align:"center",style:"width: 300px"},{name:"tags",label:"Etiquetas",field:"tags",align:"center",style:"width: 300px"},{name:"email",label:"Email",field:"email",style:"width: 500px",align:"left"},{name:"disableBot",label:"BOT",field:"disableBot",align:"center"},{name:"disableCampaign",label:"Campanha",field:"disableCampaign",align:"center"},{name:"acoes",label:"Ações",field:"acoes",align:"center"}]}},methods:{getPhoneNumberLink(t){return t.startsWith("55")&&t.charAt(4)>5?`tel:${t.slice(0,4)}9${t.slice(-8)}`:`tel:${t}`},formatId(t){const e=Object(s["a"])(t);return e},redirectHome(){this.$router.push("/")},async listarConfiguracoes(){const{data:t}=await Object(p["b"])();localStorage.setItem("configuracoes",JSON.stringify(t));const e=t.find((t=>"ContactAdmin"===t.key));this.ContactAdmin=e.value},formatTags(t){return Array.isArray(t)?t.map((t=>`<span style="background-color: ${t.color}; padding: 2px 8px; border-radius: 4px; color: white; margin-right: 4px;">${t.tag}</span>`)).join(""):""},downloadModelCsv(){const t="nome;numero\nUser;5551900000",e=new Blob([t],{type:"text/csv"}),a=document.createElement("a");a.href=window.URL.createObjectURL(e),a.setAttribute("download","model.csv"),document.body.appendChild(a),a.click(),document.body.removeChild(a)},abrirEnvioArquivo(t){this.isImportCSV=!0,this.$refs.PickerFileMessage.pickFiles(t)},async handleImportCSV(){try{this.$q.notify({type:"warning",message:"Isso pode demorar um pouco.",caption:"Após finalizar, a página será atualizada.",position:"top"});const t=new FormData;t.append("file",this.file),this.tags.length>0&&t.append("tags",this.tags),this.wallets.length>0&&t.append("wallets",this.wallets),await Object(r["g"])(t),this.$notificarSucesso("Contatos importados com sucesso!"),this.$router.go(0)}catch(t){this.$notificarErro(t)}},async listarFilas(){return new Promise(((t,e)=>{Object(m["d"])().then((({data:t})=>(this.filas=t.filter((t=>t.isActive)),this.modalTransferirTicket=!0,this.listarUsuariosTransferencia()))).then((()=>{this.$once("modalClosed",(()=>{t()}))})).catch((t=>{console.error(t),this.$notificarErro("Problema ao carregar filas",t),e(t)}))}))},async listarUsuariosTransferencia(){try{const{data:t}=await Object(c["e"])();this.usuariosTransferencia=t.users,this.modalTransferirTicket=!0}catch(t){console.error(t),this.$notificarErro("Problema ao carregar usuários",t)}},async listarUsuarios(){try{const{data:t}=await Object(c["e"])();this.usuarios=t.users}catch(t){console.error(t),this.$notificarErro("Problema ao carregar usuários",t)}},async listarEtiquetas(){const{data:t}=await Object(d["d"])(!0);this.etiquetas=t},filterUsers(t,e,a){const o=this.filaSelecionada;if(null==o)return!0;const n=t.queues.filter((function(t,e,a){return t.id==o}));return n.length>0},async confirmarTransferenciaTicket(){await Object(i["c"])(this.ticketFocado.id,{userId:this.usuarioSelecionado||h,queueId:this.filaSelecionada||null,status:"open",isTransference:1}),this.$q.notify({type:"positive",message:"Ticket transferido.",progress:!0,actions:[{icon:"close",round:!0,color:"white"}]}),this.modalTransferirTicket=!1,this.$emit("modalClosed"),this.$store.commit("TICKET_FOCADO",{})},downloadFile(t){const e=document.createElement("a");e.href=t,e.setAttribute("download","contatos.xlsx"),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)},handleExportContacts(){Object(r["f"])().then((t=>{const e=t.data.downloadLink;this.downloadFile(e)})).catch((t=>{console.error("Erro ao exportar contatos:",t)}))},LOAD_CONTACTS(t){const e=[];t.forEach((t=>{const a=this.contacts.findIndex((e=>e.id===t.id));-1!==a?this.contacts[a]=t:e.push(t)}));const a=[...this.contacts,...e];this.contacts=a},UPDATE_CONTACTS(t){const e=[...this.contacts],a=e.findIndex((e=>e.id===t.id));-1!==a?e[a]=t:e.unshift(t),this.contacts=[...e]},DELETE_CONTACT(t){const e=[...this.contacts],a=e.findIndex((e=>e.id===t));-1!==a&&e.splice(a,1),this.contacts=[...e]},filtrarContato(t){this.contacts=[],this.params.pageNumber=1,this.params.searchParam=t,this.loading=!0,this.listarContatos()},async listarContatos(){this.loading=!0;const{data:t}=await Object(r["h"])(this.params);this.params.hasMore=t.hasMore,this.LOAD_CONTACTS(t.contacts),this.loading=!1,this.pagination.lastIndex=this.contacts.length-1,this.pagination.rowsNumber=t.count},onScroll({to:t,ref:e,...a}){!0!==this.loading&&!0===this.params.hasMore&&t===this.pagination.lastIndex&&(this.loading=!0,this.params.pageNumber++,this.listarContatos())},async handleSaveTicket(t,e){if(!t.id)return;const a=[],o=null;this.whatsapps.forEach((t=>{t.type===e&&a.push({label:t.name,value:t.id})})),this.$q.dialog({title:`Contato: ${t.name}`,message:"Selecione o canal para iniciar o atendimento.",options:{type:"radio",model:o,isValid:t=>!!t,items:a},ok:{push:!0,color:"positive",label:"Iniciar"},cancel:{push:!0,label:"Cancelar",color:"negative"},persistent:!0}).onOk((async a=>{if(a){this.loading=!0;try{const{data:o}=await Object(i["h"])({contactId:t.id,isActiveDemand:!0,userId:h,channel:e,channelId:a,status:"open"});this.ticketFocado=o,await this.listarFilas(),await this.$store.commit("SET_HAS_MORE",!0),await this.$store.dispatch("AbrirChatMensagens",o),this.$q.notify({message:`Atendimento Iniciado || ${o.contact.name} - Ticket: ${o.id}`,type:"positive",position:"top",progress:!0,actions:[{icon:"close",round:!0,color:"white"}]}),this.$router.push({name:"chat",params:{ticketId:o.id}})}catch(s){var o;this.loading=!1,console.log("error",s);const e=(null===s||void 0===s||null===(o=s.data)||void 0===o?void 0:o.message)||"Ocorreu um erro desconhecido!";if(409===s.status&&"Já existe um ticket"===e){var n;console.log("Erro 409:",s);const e=null===(n=s.data)||void 0===n?void 0:n.ticket;this.abrirAtendimentoExistente(t,e)}else 409===s.status&&(console.log(s),this.$q.dialog({title:"Atenção!!",message:`${e}`,ok:{label:"Fechar",color:"primary",push:!0},persistent:!0}),this.$q.notify({message:e,type:"negative",position:"top",progress:!0,actions:[{icon:"close",round:!0,color:"white"}]}))}}}))},editContact(t){this.selectedContactId=t,this.modalContato=!0},deleteContact(t){this.$q.dialog({title:"Atenção!! Deseja realmente deletar o contato? ",cancel:{label:"Não",color:"primary",push:!0},ok:{label:"Sim",color:"negative",push:!0},persistent:!0}).onOk((()=>{this.loading=!0,Object(r["b"])(t).then((e=>{this.DELETE_CONTACT(t),this.$q.notify({type:"positive",progress:!0,position:"top",message:"Contato deletado!",actions:[{icon:"close",round:!0,color:"white"}]})})).catch((t=>{console.error(t),this.$notificarErro("Não é possível deletar o contato",t)})),this.loading=!1}))},abrirChatContato(t){this.$q.screen.lt.md&&"pending"!==t.status&&this.$root.$emit("infor-cabecalo-chat:acao-menu"),"pending"===t.status||t.id===this.$store.getters.ticketFocado.id&&"chat"===this.$route.name||(this.$store.commit("SET_HAS_MORE",!0),this.$store.dispatch("AbrirChatMensagens",t))},abrirAtendimentoExistente(t,e){this.$q.dialog({title:"Atenção!!",message:`${t.name} possui um atendimento em curso (Atendimento: ${e.id}). Deseja abrir o atendimento?`,cancel:{label:"Não",color:"primary",push:!0},ok:{label:"Sim",color:"negative",push:!0},persistent:!0}).onOk((async()=>{try{this.abrirChatContato(e)}catch(t){this.$notificarErro("Não foi possível atualizar o token",t)}}))},confirmarSincronizarContatos(t){const e=[],a=null;console.log(this.whatsapps),this.whatsapps.forEach((a=>{a.type===t&&e.push({label:a.name,value:a.id})})),this.$q.dialog({title:"Atenção!! Deseja realmente sincronizar os contatos? ",message:"Todas os contatos com os quais você já conversou pelo Whatsapp serão criados. Isso pode demorar um pouco...",options:{type:"radio",model:a,isValid:t=>!!t,items:e},cancel:{label:"Não",color:"primary",push:!0},ok:{label:"Sim",color:"warning",push:!0},persistent:!0}).onOk((async t=>{this.loading=!0,await this.sincronizarContatos(t),this.loading=!1}))},async sincronizarContatos(t){try{this.loading=!0,await Object(r["j"])(t),this.$q.notify({type:"info",progress:!0,position:"top",textColor:"black",message:"Contatos estão sendo atualizados. Isso pode levar um tempo...",actions:[{icon:"close",round:!0,color:"white"}]})}catch(e){console.error(e),this.$notificarErro("Ocorreu um erro ao sincronizar os contatos",e),this.loading=!0}this.loading=!0}},mounted(){this.listarConfiguracoes(),this.usuario=JSON.parse(localStorage.getItem("usuario")),this.userProfile=localStorage.getItem("profile"),this.listarContatos(),this.listarUsuarios(),this.listarEtiquetas()}},b=f,g=(a("7ff2"),a("2877")),C=a("54e1"),q=a("0016"),v=a("9c40"),w=a("eaac"),y=a("27f9"),k=a("05c0"),x=a("db86"),_=a("cb32"),S=a("068f"),T=a("24e8"),$=a("f09f"),I=a("4b7e"),A=a("a370"),E=a("7d53"),O=a("eb85"),P=a("ddd8"),N=a("66e5"),j=a("4074"),Q=a("0170"),z=a("8f8e"),M=a("b047"),F=a("7f67"),U=a("eebe"),D=a.n(U),L=Object(g["a"])(b,o,n,!1,null,null,null);e["default"]=L.exports;D()(L,"components",{QBanner:C["a"],QIcon:q["a"],QBtn:v["a"],QTable:w["a"],QInput:y["a"],QTooltip:k["a"],QTd:x["a"],QAvatar:_["a"],QImg:S["a"],QDialog:T["a"],QCard:$["a"],QCardActions:I["a"],QCardSection:A["a"],QFile:E["a"],QSeparator:O["a"],QSelect:P["a"],QItem:N["a"],QItemSection:j["a"],QItemLabel:Q["a"],QCheckbox:z["a"],QChip:M["a"]}),D()(L,"directives",{ClosePopup:F["a"]})}}]);