(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{"013f":function(e,a,i){"use strict";i.r(a);var t=function(){var e=this,a=e._self._c;return a("div",{staticClass:"container"},[a("div",{staticClass:"login-section"},[a("q-layout",{staticClass:"full-width"},[a("q-page-container",[a("q-page",{staticClass:"flex justify-center items-center"},[a("q-ajax-bar",{attrs:{position:"top",color:"primary",size:"5px"}}),a("div",{staticClass:"login-content"},[a("q-img",{staticClass:"logo-image q-mb-lg q-px-md",staticStyle:{"max-width":"100%"},attrs:{src:e.generateMediaUrl(),"spinner-color":"white"}}),a("q-separator",{attrs:{spaced:""}}),a("div",{staticClass:"text-primary"},[a("div",{staticClass:"text-h6"},[e._v("Bem vindo!")]),a("div",[a("q-input",{staticClass:"q-mb-md",attrs:{rounded:"",color:e.$q.dark.isActive?"white ":"black",clearable:"",placeholder:"meu@email.com",error:e.$v.form.email.$error,"error-message":"Deve ser um e-mail válido.",outlined:""},on:{blur:e.$v.form.email.$touch,keypress:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.fazerLogin.apply(null,arguments)}},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"mdi-email-outline",color:"primary"}})]},proxy:!0}]),model:{value:e.form.email,callback:function(a){e.$set(e.form,"email",a)},expression:"form.email"}}),a("q-input",{attrs:{rounded:"",color:e.$q.dark.isActive?"white ":"black",outlined:"",type:e.isPwd?"password":"text"},on:{keypress:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.fazerLogin.apply(null,arguments)}},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"mdi-shield-key-outline",color:"primary"}})]},proxy:!0},{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:e.isPwd?"visibility_off":"visibility"},on:{click:function(a){e.isPwd=!e.isPwd}}})]},proxy:!0}]),model:{value:e.form.password,callback:function(a){e.$set(e.form,"password",a)},expression:"form.password"}}),e.habilitasmtpEnabled?a("q-btn",{staticClass:"q-px-sm",attrs:{flat:"",color:"info","no-caps":"",dense:"",label:"Esqueci a senha"},on:{click:function(a){e.modalEsqueciSenha=!0}}}):e._e()],1),e.allowSignupEnabled?a("q-btn",{staticClass:"q-px-sm",attrs:{flat:"",color:"info","no-caps":"",dense:"",label:"Registre-se, agora mesmo!"},on:{click:e.redirecionarParaCadastro}}):e._e(),a("q-btn",{staticClass:"q-mr-sm q-my-lg generate-button btn-rounded-50",staticStyle:{width:"150px"},attrs:{loading:e.loading},on:{click:e.fazerLogin}},[e._v("\n                  Entrar\n                  "),a("span",{attrs:{slot:"loading"},slot:"loading"},[a("q-spinner-puff",{staticClass:"on-left"}),e._v("Entrando...\n                  ")],1)])],1)],1)],1)],1)],1)],1),a("q-dialog",{attrs:{persistent:""},model:{value:e.modalEsqueciSenha,callback:function(a){e.modalEsqueciSenha=a},expression:"modalEsqueciSenha"}},[a("q-card",{staticClass:"q-pa-md",staticStyle:{"max-width":"400px",margin:"auto"}},[a("q-card-section",[a("div",{staticClass:"row items-center"},[a("div",{staticClass:"col text-h6 text-center"},[e._v("Recuperar Senha")]),a("q-btn",{staticClass:"modal-close-btn col-auto",attrs:{dense:"",flat:"",round:"",icon:"close"},on:{click:function(a){e.modalEsqueciSenha=!1}}})],1)]),a("q-card-section",[a("q-form",{staticClass:"flex flex-center column",on:{submit:function(a){return a.preventDefault(),e.enviarEmail.apply(null,arguments)}}},[a("q-input",{staticClass:"full-width",attrs:{rounded:"",color:e.$q.dark.isActive?"white ":"black",clearable:"",placeholder:"meu@email.com",error:e.$v.form.email.$error,"error-message":"Deve ser um e-mail válido.",outlined:""},on:{blur:e.$v.form.email.$touch},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"mdi-email-outline",color:"primary"}})]},proxy:!0}]),model:{value:e.emailRedefinicao,callback:function(a){e.emailRedefinicao=a},expression:"emailRedefinicao"}}),a("q-btn",{staticClass:"q-my-lg generate-button btn-rounded-50",staticStyle:{width:"150px"},attrs:{type:"submit"}},[e._v("\n          Enviar Email\n        ")])],1),e.showAdditionalFields?a("div",{staticClass:"flex flex-center column"},[a("q-input",{staticClass:"q-mb-md full-width",attrs:{rounded:"",color:e.$q.dark.isActive?"white ":"black",clearable:"",label:"Código de Verificação",outlined:""},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"mdi-keyboard",color:"primary"}})]},proxy:!0}],null,!1,1050674871),model:{value:e.codigoVerificacao,callback:function(a){e.codigoVerificacao=a},expression:"codigoVerificacao"}}),a("q-input",{staticClass:"q-mb-md full-width",attrs:{rounded:"",color:e.$q.dark.isActive?"white ":"black",outlined:"",type:e.isPwd?"password":"text",label:"Nova Senha"},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"mdi-shield-key-outline",color:"primary"}})]},proxy:!0},{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:e.isPwd?"visibility_off":"visibility"},on:{click:function(a){e.isPwd=!e.isPwd}}})]},proxy:!0}],null,!1,1232420389),model:{value:e.novaSenha,callback:function(a){e.novaSenha=a},expression:"novaSenha"}}),a("q-input",{staticClass:"q-mb-md full-width",attrs:{rounded:"",color:e.$q.dark.isActive?"white ":"black",outlined:"",type:e.isPwd?"password":"text",label:"Confirmar Nova Senha"},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"mdi-shield-key-outline",color:"primary"}})]},proxy:!0},{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:e.isPwd?"visibility_off":"visibility"},on:{click:function(a){e.isPwd=!e.isPwd}}})]},proxy:!0}],null,!1,1232420389),model:{value:e.confirmarNovaSenha,callback:function(a){e.confirmarNovaSenha=a},expression:"confirmarNovaSenha"}}),a("q-btn",{staticClass:"q-my-lg generate-button btn-rounded-50",staticStyle:{width:"150px"},on:{click:e.redefinirSenha}},[e._v("\n          Redefinir Senha\n        ")])],1):e._e()],1)],1)],1),e.whatsappNumber?a("q-btn",{staticClass:"whatsapp-float",attrs:{fab:"",icon:"mdi-whatsapp",color:"green",round:""},on:{click:e.abrirWhatsApp}},[a("q-tooltip",[e._v("\n        Solicitar suporte!\n      ")])],1):e._e()],1)},o=[],n=(i("14d9"),i("b5ae")),r=i("8982");function s(e){return Object(r["a"])({url:`/forgetpassword/${e}`,method:"post"})}function l(e,a,i){return Object(r["a"])({url:`/resetpasswords/${e}/${a}/${i}`,method:"post"})}var c=i("a0b3"),d={name:"Login",data(){return{modalEsqueciSenha:!1,emailRedefinicao:"",codigoVerificacao:"",novaSenha:"",confirmarNovaSenha:"",showAdditionalFields:!1,form:{email:null,password:null},contasCliente:{},isPwd:!0,loading:!1,allowSignupEnabled:!1,habilitasmtpEnabled:!1,whatsappNumber:null}},validations:{form:{email:{required:n["required"],email:n["email"]},password:{required:n["required"]}},emailRedefinicao:{required:n["required"],email:n["email"]},codigoVerificacao:{required:n["required"]},novaSenha:{required:n["required"]},confirmarNovaSenha:{required:n["required"]}},methods:{generateMediaUrl(){return"http://localhost:3100/public/logos/login.png"},async fetchConfigurations(){try{const e=await Object(c["b"])(),a=e.data;this.allowSignupEnabled="enabled"===a.allowSignup,this.habilitasmtpEnabled="enabled"===a.habilitasmtp,this.whatsappNumber=a.whatsappnumber||null}catch(e){console.error("Erro ao buscar configurações:",e)}},abrirWhatsApp(){if(this.whatsappNumber){const e=`https://wa.me/${this.whatsappNumber}?text=Ol%C3%A1%21+Quero+conhecer+melhor`;window.open(e,"_blank")}},redirecionarParaCadastro(){this.$router.push("/signup")},fazerLogin(){this.$v.form.$touch(),this.$v.form.$error?this.$q.notify("Informe usuário e senha corretamente."):(this.loading=!0,this.$store.dispatch("UserLogin",this.form).then((e=>{this.loading=!1})).catch((e=>{console.error("exStore",e),this.loading=!1})))},clear(){this.form.email="",this.form.password="",this.$v.form.$reset()},enviarEmail(){this.$v.emailRedefinicao.$invalid?this.$v.emailRedefinicao.$touch():s(this.emailRedefinicao).then((e=>{404===e.data.status?this.$q.notify({type:"negative",message:"Email não encontrado"}):(this.$q.notify({type:"positive",message:"Email enviado com sucesso!"}),this.showAdditionalFields=!0)})).catch((e=>{console.log("API Error:",e),this.$q.notify({type:"negative",message:"Erro ao enviar email"})}))},redefinirSenha(){this.novaSenha===this.confirmarNovaSenha?l(this.emailRedefinicao,this.codigoVerificacao,this.novaSenha).then((()=>{this.$q.notify({type:"positive",message:"Senha redefinida com sucesso."}),this.modalEsqueciSenha=!1,this.showAdditionalFields=!1})).catch((e=>{console.log("API Error:",e),this.$q.notify({type:"negative",message:"Erro ao redefinir senha"})})):this.$q.notify({type:"negative",message:"As senhas não correspondem"})}},mounted(){this.fetchConfigurations()}},u=d,p=(i("804f"),i("2877")),m=i("4d5a"),f=i("09e3"),h=i("9989"),b=i("7ea5"),q=i("068f"),v=i("eb85"),y=i("27f9"),g=i("0016"),w=i("9c40"),k=i("06d5"),C=i("24e8"),S=i("f09f"),x=i("a370"),$=i("0378"),E=i("05c0"),_=i("eebe"),P=i.n(_),A=Object(p["a"])(u,t,o,!1,null,"3b5935fa",null);a["default"]=A.exports;P()(A,"components",{QLayout:m["a"],QPageContainer:f["a"],QPage:h["a"],QAjaxBar:b["a"],QImg:q["a"],QSeparator:v["a"],QInput:y["a"],QIcon:g["a"],QBtn:w["a"],QSpinnerPuff:k["a"],QDialog:C["a"],QCard:S["a"],QCardSection:x["a"],QForm:$["a"],QTooltip:E["a"]})},"804f":function(e,a,i){"use strict";i("d30f")},d30f:function(e,a,i){}}]);