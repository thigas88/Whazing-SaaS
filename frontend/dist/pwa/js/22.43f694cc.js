(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[22],{"037d":function(t,e,a){},2793:function(t,e,a){"use strict";a("037d")},e2bc:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t._self._c;return"admin"===t.userProfile?e("div",[e("q-card",{attrs:{bordered:""}},[e("q-card-section",[e("div",{staticClass:"text-h6",class:t.$q.dark.isActive?"text-green":"",attrs:{"q-px-sm":""}},[t._v("\n        Relat√≥rio de Contatos por Estado")])]),e("q-card-section",{staticClass:"q-pt-none"},[e("fieldset",[e("legend",{staticClass:"q-px-sm"},[t._v("Filtros")]),e("div",{staticClass:"row q-gutter-md items-end"},[e("div",{staticClass:"col-xs-12 col-sm-7 grow text-center"},[e("q-select",{attrs:{square:"",outlined:"",multiple:"",options:t.estadosBR,"use-chips":"","option-value":"sigla","option-label":"nome","emit-value":"","map-options":"","dropdown-icon":"add"},scopedSlots:t._u([{key:"option",fn:function({itemProps:a,itemEvents:o,opt:s,selected:n,toggleOption:i}){return[e("q-item",t._g(t._b({},"q-item",a,!1),o),[e("q-item-section",[e("q-item-label",{domProps:{innerHTML:t._s(s.nome)}})],1),e("q-item-section",{attrs:{side:""}},[e("q-checkbox",{attrs:{value:n},on:{input:function(t){return i(s)}}})],1)],1)]}},{key:"selected-item",fn:function({opt:t}){return[e("q-badge",{staticClass:"q-ma-xs text-body1",attrs:{dense:"",square:"",color:"grey-3","text-color":"primary",label:t.nome}})]}}],null,!1,3102959954),model:{value:t.pesquisa.ddds,callback:function(e){t.$set(t.pesquisa,"ddds",e)},expression:"pesquisa.ddds"}})],1),e("div",{staticClass:"col-grow text-center"},[e("q-btn",{staticClass:"q-mr-sm",attrs:{color:"info",label:"Gerar",icon:"refresh"},on:{click:t.gerarRelatorio}}),e("q-btn",{staticClass:"q-mr-sm",attrs:{color:"black",icon:"print",label:"Imprimir"},on:{click:function(e){return t.printReport("tRelatorioContatosEtiquetas")}}}),e("q-btn",{attrs:{color:"green",label:"Excel"},on:{click:function(e){return t.exportTable("tRelatorioContatosEtiquetas")}}})],1)])])])],1),e("div",{staticClass:"row"},[e("div",{staticClass:"col-xs-12 q-mt-sm"},[e("div",{staticClass:"tableLarge q-ma-sm q-markup-table q-table__container q-table__card q-table--cell-separator q-table--flat q-table--bordered q-table--no-wrap",attrs:{id:"tRelatorioContatosEtiquetas"}},[e("table",{staticClass:"q-pb-md q-table q-tabs--dense",attrs:{id:"tableRelatorioContatos"}},[e("thead",[e("tr",t._l(t.bl_sintetico?t.columns.filter((e=>e.name==t.opcoesRelatorio.agrupamento)):t.columns,(function(a){return e("td",{key:a.name},[t._v("\n                "+t._s(a.label)+"\n              ")])})),0)]),e("tbody",[t.bl_sintetico?t._e():t._l(t.contatos,(function(a){return e("tr",{key:a.number},t._l(t.columns,(function(o){return e("td",{key:o.name+"-"+a.id,class:o.class,style:o.style},[t._v("\n                  "+t._s(void 0!==o.format?o.format(a[o.field],a):a[o.field])+"\n                ")])})),0)}))],2)])])])]),e("ccPrintModelLandscape",{attrs:{id:"slotTableRelatorioContatos",imprimirRelatorio:t.imprimir,title:"Relat√≥rio de Contatos por Etiquetas",styleP:"\n    table { width: 100%; font-size: 10px; border-spacing: 1; border-collapse: collapse;  }\n    #tableReport tr td { border:1px solid #DDD; padding-left: 10px; padding-right: 10px;  }\n    #tableReport thead tr:nth-child(1) td { text-align: center; padding: 5px; font-weight: bold; color: #000; background: lightgrey; opacity: 1; }\n    #lineGroup { background: #f8f8f8; line-height: 30px; }\n    #quebraAgrupamentoRelatorio { border-bottom: 1px solid black !important; }\n    #st_nome, #st_tipo_atendimento, #st_status_faturamento, #st_convenio, #st_nome_profissional, #st_status, #st_nome_unidade, #st_nome_profissional { width: 200px; word-wrap: normal !important; white-space: normal !important; }\n    #dt_atendimento_unidade { width: 100px; text-align: center }\n    "},scopedSlots:t._u([{key:"body",fn:function(){return[e("table",{staticClass:"q-pb-md q-table q-tabs--dense"},[e("thead",[e("tr",t._l(t.bl_sintetico?t.columns.filter((e=>e.name==t.opcoesRelatorio.agrupamento)):t.columns,(function(a){return e("td",{key:a.name},[t._v("\n              "+t._s(a.label)+"\n            ")])})),0)]),e("tbody",[t.bl_sintetico?t._e():t._l(t.contatos,(function(a){return e("tr",{key:a.number},t._l(t.columns,(function(o){return e("td",{key:o.name+"-"+a.id,class:o.class,style:o.style},[t._v("\n                "+t._s(void 0!==o.format?o.format(a[o.field],a):a[o.field])+"\n              ")])})),0)}))],2)])]},proxy:!0}],null,!1,1711674830)})],1):t._e()},s=[],n=a("b09f"),i=a("1146"),r=a.n(i),l=a("ab52"),d=a("163e"),c=a("c9d9"),m={name:"RelatorioContatosEtiquetas",components:{ccPrintModelLandscape:n["a"]},props:{moduloAtendimento:{type:Boolean,default:!1}},data(){return{userProfile:"user",data:null,bl_sintetico:!1,estadoPorDdd:c["a"],estadosBR:c["b"],contatos:[],etiquetas:[],columns:[{name:"name",label:"Nome",field:"name",align:"left",style:"width: 300px",format:t=>this.replaceEmojis(t)},{name:"number",label:"WhatsApp",field:"number",align:"center",style:"width: 300px"},{name:"email",label:"Email",field:"email",style:"width: 500px",align:"left"},{name:"estado",label:"Estado",field:"number",style:"width: 500px",align:"left",format:t=>this.definirEstadoNumero(t)}],pesquisa:{ddds:[]},ExibirTabela:!0,imprimir:!1}},methods:{replaceEmojis(t){var e=["[¬†-‚öü]","[‚ö†-„äü]","[üÄÑ-üßÄ]"];return t.replace(new RegExp(e.join("|"),"ug"),"")},sortObject(t){return Object.keys(t).sort().reduce(((e,a)=>(e[a]=t[a],e)),{})},printReport(t){this.imprimir=!this.imprimir},exportTable(){const t=r.a.utils.table_to_sheet(document.getElementById("tableRelatorioContatos"),{raw:!0});for(const a in t)"J"==a[0]&&(t[a].t="n",t[a].v=t[a].v.replace(/\./g,"").replace(",","."));const e=r.a.utils.book_new();r.a.utils.book_append_sheet(e,t,"Relat√≥rio Atendimentos"),r.a.writeFile(e,"relatorio-contatos-estado.xlsx")},async listarEtiquetas(){const{data:t}=await Object(d["d"])(!0);this.etiquetas=t},definirEstadoNumero(t){var e;const a=t.substring(2,4);return(null===(e=c["b"].find((t=>t.sigla===c["a"][a])))||void 0===e?void 0:e.nome)||""},async gerarRelatorio(){if(!this.pesquisa.ddds.length)return void this.$q.notify({message:"Ops... Para gerar o relat√≥rio, √© necess√°rio selecionar pelo menos um Estado.",type:"negative",progress:!0,position:"top",actions:[{icon:"close",round:!0,color:"white"}]});const{data:t}=await Object(l["h"])(this.pesquisa);this.contatos=t.contacts}},beforeMount(){this.userProfile=localStorage.getItem("profile"),this.listarEtiquetas()},async mounted(){}},u=m,p=(a("2793"),a("2877")),b=a("f09f"),f=a("a370"),q=a("ddd8"),_=a("66e5"),g=a("4074"),h=a("0170"),x=a("8f8e"),y=a("58a81"),v=a("9c40"),w=a("2bb1"),k=a("eaac"),C=a("429b"),R=a("eebe"),E=a.n(R),Q=Object(p["a"])(u,o,s,!1,null,"559095b2",null);e["default"]=Q.exports;E()(Q,"components",{QCard:b["a"],QCardSection:f["a"],QSelect:q["a"],QItem:_["a"],QItemSection:g["a"],QItemLabel:h["a"],QCheckbox:x["a"],QBadge:y["a"],QBtn:v["a"],QMarkupTable:w["a"],QTable:k["a"],QTabs:C["a"]})}}]);