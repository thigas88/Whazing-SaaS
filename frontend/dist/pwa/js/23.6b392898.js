(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[23],{b1ff:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t._self._c;return"admin"===t.userProfile?e("div",[e("q-card",{attrs:{bordered:""}},[e("q-card-section",[e("div",{staticClass:"text-h6",class:t.$q.dark.isActive?"text-green":"",attrs:{"q-px-sm":""}},[t._v("\n        Relat√≥rio de Contatos ")])]),e("q-card-section",{staticClass:"q-pt-none"},[e("fieldset",[e("legend",{staticClass:"q-px-sm"},[t._v("Filtros")]),e("div",{staticClass:"row q-gutter-md items-end"},[e("div",{staticClass:"col-xs-12 col-sm-7 grow text-center"},[e("q-select",{attrs:{square:"",outlined:"",multiple:"",options:t.etiquetas,"use-chips":"","option-value":"id","option-label":"tag","emit-value":"","map-options":"","dropdown-icon":"add"},scopedSlots:t._u([{key:"option",fn:function({itemProps:a,itemEvents:o,opt:s,selected:i,toggleOption:n}){return[e("q-item",t._g(t._b({},"q-item",a,!1),o),[e("q-item-section",[e("q-item-label",{domProps:{innerHTML:t._s(s.tag)}})],1),e("q-item-section",{attrs:{side:""}},[e("q-checkbox",{attrs:{value:i},on:{input:function(t){return n(s)}}})],1)],1)]}},{key:"selected-item",fn:function({opt:a}){return[e("q-chip",{staticClass:"q-ma-xs text-body1",attrs:{dense:"",square:"",color:"white","text-color":"primary"}},[e("q-icon",{staticClass:"q-mr-sm",style:`color: ${a.color}`,attrs:{name:"mdi-pound-box-outline",size:"28px"}}),t._v("\n                  "+t._s(a.tag)+"\n                ")],1)]}}],null,!1,973234622),model:{value:t.pesquisa.tags,callback:function(e){t.$set(t.pesquisa,"tags",e)},expression:"pesquisa.tags"}})],1),e("div",{staticClass:"col-grow text-center"},[e("q-btn",{staticClass:"q-mr-sm",attrs:{color:"info",label:"Gerar",icon:"refresh"},on:{click:t.gerarRelatorio}}),e("q-btn",{staticClass:"q-mr-sm",attrs:{color:"black",icon:"print",label:"Imprimir"},on:{click:function(e){return t.printReport("tRelatorioContatosEtiquetas")}}}),e("q-btn",{attrs:{color:"green",label:"Excel"},on:{click:function(e){return t.exportTable("tRelatorioContatosEtiquetas")}}})],1)])])])],1),e("div",{staticClass:"row"},[e("div",{staticClass:"col-xs-12 q-mt-sm"},[e("div",{staticClass:"tableLarge q-ma-sm q-markup-table q-table__container q-table__card q-table--cell-separator q-table--flat q-table--bordered q-table--no-wrap",attrs:{id:"tRelatorioContatosEtiquetas"}},[e("table",{staticClass:"q-pb-md q-table q-tabs--dense",attrs:{id:"tableRelatorioContatos"}},[e("thead",[e("tr",t._l(t.bl_sintetico?t.columns.filter((e=>e.name==t.opcoesRelatorio.agrupamento)):t.columns,(function(a){return e("td",{key:a.name},[t._v("\n                "+t._s(a.label)+"\n              ")])})),0)]),e("tbody",[t.bl_sintetico?t._e():t._l(t.contatos,(function(a){return e("tr",{key:a.number},t._l(t.columns,(function(o){return e("td",{key:o.name+"-"+a.id,class:o.class,style:o.style},[t._v("\n                  "+t._s(void 0!==o.format?o.format(a[o.field],a):a[o.field])+"\n                ")])})),0)}))],2)])])])]),e("ccPrintModelLandscape",{attrs:{id:"slotTableRelatorioContatos",imprimirRelatorio:t.imprimir,title:"Relat√≥rio de Contatos por Etiquetas",styleP:"\n    table { width: 100%; font-size: 10px; border-spacing: 1; border-collapse: collapse;  }\n    #tableReport tr td { border:1px solid #DDD; padding-left: 10px; padding-right: 10px;  }\n    #tableReport thead tr:nth-child(1) td { text-align: center; padding: 5px; font-weight: bold; color: #000; background: lightgrey; opacity: 1; }\n    #lineGroup { background: #f8f8f8; line-height: 30px; }\n    #quebraAgrupamentoRelatorio { border-bottom: 1px solid black !important; }\n    #st_nome, #st_tipo_atendimento, #st_status_faturamento, #st_convenio, #st_nome_profissional, #st_status, #st_nome_unidade, #st_nome_profissional { width: 200px; word-wrap: normal !important; white-space: normal !important; }\n    #dt_atendimento_unidade { width: 100px; text-align: center }\n    "},scopedSlots:t._u([{key:"body",fn:function(){return[e("table",{staticClass:"q-pb-md q-table q-tabs--dense"},[e("thead",[e("tr",t._l(t.bl_sintetico?t.columns.filter((e=>e.name==t.opcoesRelatorio.agrupamento)):t.columns,(function(a){return e("td",{key:a.name},[t._v("\n              "+t._s(a.label)+"\n            ")])})),0)]),e("tbody",[t.bl_sintetico?t._e():t._l(t.contatos,(function(a){return e("tr",{key:a.number},t._l(t.columns,(function(o){return e("td",{key:o.name+"-"+a.id,class:o.class,style:o.style},[t._v("\n                "+t._s(void 0!==o.format?o.format(a[o.field],a):a[o.field])+"\n              ")])})),0)}))],2)])]},proxy:!0}],null,!1,1711674830)})],1):t._e()},s=[],i=a("b09f"),n=a("1146"),r=a.n(n),l=a("ab52"),c=a("163e"),d={name:"RelatorioContatosEtiquetas",components:{ccPrintModelLandscape:i["a"]},props:{moduloAtendimento:{type:Boolean,default:!1}},data(){return{userProfile:"user",data:null,bl_sintetico:!1,contatos:[],etiquetas:[],columns:[{name:"name",label:"Nome",field:"name",align:"left",style:"width: 300px",format:t=>this.replaceEmojis(t)},{name:"number",label:"WhatsApp",field:"number",align:"center",style:"width: 300px"},{name:"email",label:"Email",field:"email",style:"width: 500px",align:"left"},{name:"tags",label:"Etiquetas",field:"tags",style:"width: 500px",align:"left",format:t=>{if(t){const e=t.map((t=>t.tag));return e.join(", ")}return""}}],pesquisa:{tags:[]},ExibirTabela:!0,imprimir:!1}},methods:{replaceEmojis(t){var e=["[¬†-‚öü]","[‚ö†-„äü]","[üÄÑ-üßÄ]"];return t.replace(new RegExp(e.join("|"),"ug"),"")},sortObject(t){return Object.keys(t).sort().reduce(((e,a)=>(e[a]=t[a],e)),{})},printReport(t){this.imprimir=!this.imprimir},exportTable(){const t=r.a.utils.table_to_sheet(document.getElementById("tableRelatorioContatos"),{raw:!0});for(const a in t)"J"==a[0]&&(t[a].t="n",t[a].v=t[a].v.replace(/\./g,"").replace(",","."));const e=r.a.utils.book_new();r.a.utils.book_append_sheet(e,t,"Relat√≥rio Atendimentos"),r.a.writeFile(e,"relatorio-contatos-etiquetas.xlsx")},async listarEtiquetas(){const{data:t}=await Object(c["d"])(!0);this.etiquetas=t},async gerarRelatorio(){if(!this.pesquisa.tags.length)return void this.$notificarErro("Ops... Para gerar o relat√≥rio, √© necess√°rio selecionar pelo menos uma etiqueta.");const{data:t}=await Object(l["h"])(this.pesquisa);this.contatos=t.contacts}},beforeMount(){this.userProfile=localStorage.getItem("profile"),this.listarEtiquetas()},async mounted(){}},u=d,m=(a("fe5a"),a("2877")),p=a("f09f"),b=a("a370"),f=a("ddd8"),q=a("66e5"),_=a("4074"),g=a("0170"),h=a("8f8e"),x=a("b047"),y=a("0016"),v=a("9c40"),w=a("2bb1"),C=a("eaac"),k=a("429b"),R=a("eebe"),E=a.n(R),Q=Object(m["a"])(u,o,s,!1,null,"441cfa96",null);e["default"]=Q.exports;E()(Q,"components",{QCard:p["a"],QCardSection:b["a"],QSelect:f["a"],QItem:q["a"],QItemSection:_["a"],QItemLabel:g["a"],QCheckbox:h["a"],QChip:x["a"],QIcon:y["a"],QBtn:v["a"],QMarkupTable:w["a"],QTable:C["a"],QTabs:k["a"]})},b8ae:function(t,e,a){},fe5a:function(t,e,a){"use strict";a("b8ae")}}]);