(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[34],{"907f":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return"admin"===t.userProfile?e("div",[e("q-table",{staticClass:"contact-table container-rounded-10 my-sticky-dynamic q-ma-lg",attrs:{flat:"",bordered:"",square:"","hide-bottom":"",data:t.etiquetas,columns:t.columns,loading:t.loading,"row-key":"id",pagination:t.pagination,"rows-per-page-options":[0]},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"top-left",fn:function(){return[e("div",[e("h2",{class:t.$q.dark.isActive?"text-green":""},[e("q-icon",{attrs:{name:"mdi-tag-outline"}}),t._v("\n        Etiquetas\n      ")],1),e("q-btn",{staticClass:"generate-button btn-rounded-50",attrs:{icon:"eva-plus-outline",label:"Adicionar"},on:{click:function(e){t.etiquetaEdicao={},t.modalEtiqueta=!0}}})],1)]},proxy:!0},{key:"body-cell-color",fn:function(a){return[e("q-td",{staticClass:"text-center"},[e("div",{staticClass:"q-pa-sm rounded-borders",style:`background: ${a.row.color}`},[t._v("\n          "+t._s(a.row.color)+"\n        ")])])]}},{key:"body-cell-isActive",fn:function(t){return[e("q-td",{staticClass:"text-center"},[e("q-icon",{attrs:{size:"24px",name:t.value?"mdi-check-circle-outline":"mdi-close-circle-outline",color:t.value?"positive":"negative"}})],1)]}},{key:"body-cell-acoes",fn:function(a){return[e("q-td",{staticClass:"text-center"},[e("q-btn",{class:t.$q.dark.isActive?"text-green":"",attrs:{flat:"",round:"",icon:"eva-edit-outline"},on:{click:function(e){return t.editarEtiqueta(a.row)}}}),e("q-btn",{class:t.$q.dark.isActive?"text-green":"",attrs:{flat:"",round:"",icon:"eva-trash-outline"},on:{click:function(e){return t.deletarEtiqueta(a.row)}}})],1)]}}],null,!1,671847737)}),e("ModalEtiqueta",{attrs:{modalEtiqueta:t.modalEtiqueta,etiquetaEdicao:t.etiquetaEdicao},on:{"update:modalEtiqueta":function(e){t.modalEtiqueta=e},"update:modal-etiqueta":function(e){t.modalEtiqueta=e},"update:etiquetaEdicao":function(e){t.etiquetaEdicao=e},"update:etiqueta-edicao":function(e){t.etiquetaEdicao=e},"modal-etiqueta:criada":t.etiquetaCriada,"modal-etiqueta:editada":t.etiquetaEditada}})],1):t._e()},o=[],n=(a("14d9"),a("163e")),s=function(){var t=this,e=t._self._c;return e("q-dialog",{attrs:{persistent:"",value:t.modalEtiqueta},on:{hide:t.fecharModal,show:t.abrirModal}},[e("q-card",{staticClass:"q-pa-lg container-rounded-10 modal-container"},[e("q-card-actions",{staticClass:"q-mt-md",attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",icon:"eva-close",color:"negative"}})],1),e("q-card-section",[e("div",{staticClass:"text-h6 font-family-main text-center"},[t._v(t._s(t.etiquetaEdicao.id?"Editar":"Criar")+" Etiqueta")])]),e("q-card-section",{staticClass:"container-rounded-10 container-border q-pa-lg"},[e("div",{staticClass:"text-h6 font-family-main q-mb-md"},[t._v("\n        Informações\n      ")]),e("q-input",{staticClass:"row col",attrs:{rounded:"",outlined:"",label:"Nome da Etiqueta"},model:{value:t.etiqueta.tag,callback:function(e){t.$set(t.etiqueta,"tag",e)},expression:"etiqueta.tag"}}),e("q-input",{staticClass:"q-my-md",style:`background: ${t.etiqueta.color} `,attrs:{filled:"","hide-bottom-space":"",rules:["anyColor"],dark:!1,rounded:""},scopedSlots:t._u([{key:"preappend",fn:function(){},proxy:!0},{key:"append",fn:function(){return[e("q-icon",{staticClass:"cursor-pointer",attrs:{name:"colorize"}},[e("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[e("q-color",{attrs:{"format-model":"hex",rounded:"","default-view":"palette","no-header":"",bordered:""},model:{value:t.etiqueta.color,callback:function(e){t.$set(t.etiqueta,"color",e)},expression:"etiqueta.color"}})],1)],1)]},proxy:!0}]),model:{value:t.etiqueta.color,callback:function(e){t.$set(t.etiqueta,"color",e)},expression:"etiqueta.color"}}),e("q-checkbox",{attrs:{label:"Ativo"},model:{value:t.etiqueta.isActive,callback:function(e){t.$set(t.etiqueta,"isActive",e)},expression:"etiqueta.isActive"}})],1),e("q-card-actions",{staticClass:"q-mt-md",attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-mr-md btn-rounded-50",attrs:{label:"Cancelar",color:"negative"}}),e("q-btn",{staticClass:"btn-rounded-50 generate-button",attrs:{label:"Salvar",icon:"eva-save-outline"},on:{click:t.handleEtiqueta}})],1)],1)],1)},l=[],r={name:"ModalEtiqueta",props:{modalEtiqueta:{type:Boolean,default:!1},etiquetaEdicao:{type:Object,default:()=>({id:null})}},data(){return{etiqueta:{id:null,tag:null,color:"#ffffff",isActive:!0}}},methods:{resetarEtiqueta(){this.etiqueta={id:null,tag:null,color:"#ffffff",isActive:!0}},fecharModal(){this.resetarEtiqueta(),this.$emit("update:etiquetaEdicao",{id:null}),this.$emit("update:modalEtiqueta",!1)},abrirModal(){this.etiquetaEdicao.id?this.etiqueta={...this.etiquetaEdicao}:this.resetarEtiqueta()},async handleEtiqueta(){try{if(this.loading=!0,this.etiqueta.id){const{data:t}=await Object(n["a"])(this.etiqueta);this.$emit("modal-etiqueta:editada",t),this.$q.notify({type:"info",progress:!0,position:"top",textColor:"black",message:"Etiqueta editada!",actions:[{icon:"close",round:!0,color:"white"}]})}else{const{data:t}=await Object(n["b"])(this.etiqueta);this.$emit("modal-etiqueta:criada",t),this.$q.notify({type:"positive",progress:!0,position:"top",message:"Etiqueta criada!",actions:[{icon:"close",round:!0,color:"white"}]})}this.loading=!1,this.fecharModal()}catch(t){console.error(t),this.$notificarErro("Ocorreu um erro ao criar a etiqueta",t)}}}},c=r,d=a("2877"),u=a("24e8"),q=a("f09f"),p=a("4b7e"),f=a("9c40"),m=a("a370"),h=a("27f9"),b=a("0016"),g=a("7cbe"),v=a("b498"),E=a("8f8e"),y=a("7f67"),k=a("eebe"),C=a.n(k),x=Object(d["a"])(c,s,l,!1,null,"4ed0e7a3",null),w=x.exports;C()(x,"components",{QDialog:u["a"],QCard:q["a"],QCardActions:p["a"],QBtn:f["a"],QCardSection:m["a"],QInput:h["a"],QIcon:b["a"],QPopupProxy:g["a"],QColor:v["a"],QCheckbox:E["a"]}),C()(x,"directives",{ClosePopup:y["a"]});var $={name:"Etiquetas",components:{ModalEtiqueta:w},data(){return{userProfile:"user",etiquetaEdicao:{},modalEtiqueta:!1,etiquetas:[],pagination:{rowsPerPage:40,rowsNumber:0,lastIndex:0},loading:!1,columns:[{name:"id",label:"#",field:"id",align:"left"},{name:"tag",label:"Etiqueta",field:"tag",align:"left"},{name:"color",label:"Cor",field:"color",align:"center"},{name:"isActive",label:"Ativo",field:"isActive",align:"center"},{name:"acoes",label:"Ações",field:"acoes",align:"center"}]}},methods:{async listarEtiquetas(){const{data:t}=await Object(n["d"])();this.etiquetas=t},etiquetaCriada(t){const e=[...this.etiquetas];e.push(t),this.etiquetas=[...e]},etiquetaEditada(t){const e=[...this.etiquetas],a=e.findIndex((e=>e.id===t.id));a>-1&&(e[a]=t),this.etiquetas=[...e]},editarEtiqueta(t){this.etiquetaEdicao={...t},this.modalEtiqueta=!0},deletarEtiqueta(t){this.$q.dialog({title:"Atenção!!",message:`Deseja realmente deletar a Etiqueta "${t.tag}"?`,cancel:{label:"Não",color:"primary",push:!0},ok:{label:"Sim",color:"negative",push:!0},persistent:!0}).onOk((()=>{this.loading=!0,Object(n["c"])(t).then((e=>{let a=[...this.etiquetas];a=a.filter((e=>e.id!==t.id)),this.etiquetas=[...a],this.$q.notify({type:"positive",progress:!0,position:"top",message:`Etiqueta ${t.tag} deletada!`,actions:[{icon:"close",round:!0,color:"white"}]})})),this.loading=!1}))}},mounted(){this.listarEtiquetas(),this.userProfile=localStorage.getItem("profile")}},A=$,Q=a("eaac"),_=a("db86"),O=Object(d["a"])(A,i,o,!1,null,"408fb8cc",null);e["default"]=O.exports;C()(O,"components",{QTable:Q["a"],QIcon:b["a"],QBtn:f["a"],QTd:_["a"]})}}]);