(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[38],{cce6:function(e,a,t){"use strict";t.r(a);var o=function(){var e=this,a=e._self._c;return"admin"===e.userProfile?a("div",[a("q-table",{staticClass:"contact-table container-rounded-10 my-sticky-dynamic q-ma-lg",attrs:{flat:"",bordered:"",square:"","hide-bottom":"",data:e.integracoes,columns:e.columns,loading:e.loading,"row-key":"id","rows-per-page-options":[0]},scopedSlots:e._u([{key:"top-left",fn:function(){return[a("div",[a("h2",{class:e.$q.dark.isActive?"text-green":""},[a("q-icon",{attrs:{name:"mdi-hub-outline q-pr-sm"}}),e._v("\n          Integrações\n        ")],1),a("q-btn",{staticClass:"generate-button btn-rounded-50",attrs:{icon:"eva-plus-outline",label:"Adicionar"},on:{click:function(a){e.integracaoEdicao={},e.modalIntegracao=!0}}}),e.whatsappNumber?a("q-btn",{staticClass:"generate-button btn-rounded-50",attrs:{flat:"",icon:"mdi-whatsapp",label:"Chamar Suporte"},on:{click:e.abrirWhatsApp}}):e._e()],1)]},proxy:!0},{key:"body-cell-color",fn:function(t){return[a("q-td",{staticClass:"text-center"},[a("div",{staticClass:"q-pa-sm rounded-borders",style:`background: ${t.row.color}`},[e._v("\n          "+e._s(t.row.color)+"\n        ")])])]}},{key:"body-cell-isActive",fn:function(e){return[a("q-td",{staticClass:"text-center"},[a("q-icon",{attrs:{size:"24px",name:e.value?"mdi-check-circle-outline":"mdi-close-circle-outline",color:e.value?"positive":"negative"}})],1)]}},{key:"body-cell-acoes",fn:function(t){return[a("q-td",{staticClass:"text-center"},[a("q-btn",{class:e.$q.dark.isActive?"text-green":"",attrs:{flat:"",round:"",icon:"eva-edit-outline"},on:{click:function(a){return e.editarIntegracao(t.row)}}}),a("q-btn",{class:e.$q.dark.isActive?"text-green":"",attrs:{flat:"",round:"",icon:"eva-trash-outline"},on:{click:function(a){return e.deletarIntegracao(t.row)}}})],1)]}}],null,!1,4083612365)}),a("ModalIntegracao",{attrs:{modalIntegracao:e.modalIntegracao,integracaoEdicao:e.integracaoEdicao},on:{"update:modalIntegracao":function(a){e.modalIntegracao=a},"update:modal-integracao":function(a){e.modalIntegracao=a},"update:integracaoEdicao":function(a){e.integracaoEdicao=a},"update:integracao-edicao":function(a){e.integracaoEdicao=a},"modal-integracao:criada":e.integracaoCriada,"modal-integracao:editada":e.integracaoEditada}})],1):e._e()},n=[],i=(t("14d9"),t("a005")),l=t("a0b3"),r=function(){var e=this,a=e._self._c;return a("q-dialog",{attrs:{persistent:"",value:e.modalIntegracao},on:{hide:e.fecharModal,show:e.abrirModal}},[a("q-card",{staticClass:"q-pa-lg modal-container container-rounded-10"},[a("q-card-actions",{staticClass:"q-mt-md",attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"eva-close",color:"negative",flat:""}})],1),a("q-card-section",[a("div",{staticClass:"text-h6 text-center font-family-main"},[e._v(e._s(e.integracaoEdicao.id?"Editar":"Criar")+" Integração")])]),a("q-card-section",{staticClass:"container-border container-rounded-10"},[a("div",{staticClass:"text-h6 font-family-main q-mb-sm"},[e._v("\n        Informações\n      ")]),a("div",{staticClass:"col-12 q-my-sm"},[a("q-select",{attrs:{disable:!!e.integracao.id,options:e.integracaoTypes,validator:e.$v.integracao.type,label:"Tipo","emit-value":"","map-options":"",filled:""},on:{blur:e.$v.integracao.type.$touch},model:{value:e.integracao.type,callback:function(a){e.$set(e.integracao,"type",a)},expression:"integracao.type"}})],1),a("div",{staticClass:"col-12"},[a("q-input",{staticClass:"row col",attrs:{rounded:"",outlined:"",validator:e.$v.integracao.name,label:"Nome da Integração"},on:{blur:e.$v.integracao.name.$touch},model:{value:e.integracao.name,callback:function(a){e.$set(e.integracao,"name",a)},expression:"integracao.name"}})],1),a("div",{staticClass:"col-12 q-my-sm"},["openai"===e.integracao.type?a("q-select",{attrs:{rounded:"",outlined:"",options:e.modelsOpenai,label:"Model","emit-value":"","map-options":"",filled:""},model:{value:e.integracao.aiModel,callback:function(a){e.$set(e.integracao,"aiModel",a)},expression:"integracao.aiModel"}}):e._e()],1),a("div",{staticClass:"col-12 q-my-sm"},["groq"===e.integracao.type?a("q-select",{attrs:{rounded:"",outlined:"",options:e.modelsGroq,label:"Model","emit-value":"","map-options":"",filled:""},model:{value:e.integracao.aiModel,callback:function(a){e.$set(e.integracao,"aiModel",a)},expression:"integracao.aiModel"}}):e._e()],1),a("div",{staticClass:"col-12"},["typebot"===e.integracao.type|"n8n"===e.integracao.type?a("q-input",{staticClass:"row col",attrs:{rounded:"",outlined:"",label:"URL Integração"},model:{value:e.integracao.urlN8N,callback:function(a){e.$set(e.integracao,"urlN8N",a)},expression:"integracao.urlN8N"}}):e._e()],1),a("div",{staticClass:"col-12"},["openai"===e.integracao.type|"groq"===e.integracao.type?a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.integracao.jsonContent,expression:"integracao.jsonContent"}],staticClass:"q-pa-sm bg-white full-width rounded-borders",staticStyle:{"min-height":"25vh","max-height":"25vh"},attrs:{rounded:"",outlined:"",placeholder:"Prompt"},domProps:{value:e.integracao.jsonContent},on:{input:function(a){a.target.composing||e.$set(e.integracao,"jsonContent",a.target.value)}}}):e._e()]),a("div",{staticClass:"col-12"},["openai"===e.integracao.type|"groq"===e.integracao.type?a("q-select",{staticClass:"row col",attrs:{rounded:"",outlined:"",label:"Fila",options:e.listaFila,"map-options":"","emit-value":"","option-value":"id","option-label":"queue",clearable:""},model:{value:e.integracao.queueId,callback:function(a){e.$set(e.integracao,"queueId",a)},expression:"integracao.queueId"}},[a("q-tooltip",[e._v("\n          Fila será atribuido caso solicitar ao BOT\n        ")])],1):e._e()],1),a("div",{staticClass:"col-12"},["n8n"===e.integracao.type?a("q-input",{staticClass:"row col",attrs:{rounded:"",outlined:"",label:"N8N API KEY"},model:{value:e.integracao.n8nApiKey,callback:function(a){e.$set(e.integracao,"n8nApiKey",a)},expression:"integracao.n8nApiKey"}}):e._e()],1),a("div",{staticClass:"col-12"},["typebot"===e.integracao.type?a("q-input",{staticClass:"row col",attrs:{rounded:"",outlined:"",label:"Typebot - Slug"},model:{value:e.integracao.typebotSlug,callback:function(a){e.$set(e.integracao,"typebotSlug",a)},expression:"integracao.typebotSlug"}}):e._e(),"typebot"===e.integracao.type?a("q-input",{staticClass:"row col",attrs:{rounded:"",outlined:"",type:"number",label:"Tempo em minutos para expirar uma conversa"},model:{value:e.integracao.typebotExpires,callback:function(a){e.$set(e.integracao,"typebotExpires",a)},expression:"integracao.typebotExpires"}}):e._e(),"typebot"===e.integracao.type|"openai"===e.integracao.type|"groq"===e.integracao.type?a("q-input",{staticClass:"row col",attrs:{rounded:"",outlined:"",type:"number",label:"Intervalor (ms) entre mensagens"},model:{value:e.integracao.typebotDelayMessage,callback:function(a){e.$set(e.integracao,"typebotDelayMessage",a)},expression:"integracao.typebotDelayMessage"}}):e._e(),"typebot"===e.integracao.type?a("q-input",{staticClass:"row col",attrs:{rounded:"",outlined:"",label:"Palavra que fecha ticket"},model:{value:e.integracao.typebotKeywordFinish,callback:function(a){e.$set(e.integracao,"typebotKeywordFinish",a)},expression:"integracao.typebotKeywordFinish"}}):e._e(),"typebot"===e.integracao.type?a("q-input",{staticClass:"row col",attrs:{rounded:"",outlined:"",label:"Palavra que renicia o Fluxo"},model:{value:e.integracao.typebotKeywordRestart,callback:function(a){e.$set(e.integracao,"typebotKeywordRestart",a)},expression:"integracao.typebotKeywordRestart"}}):e._e(),"typebot"===e.integracao.type?a("q-input",{staticClass:"row col",attrs:{rounded:"",outlined:"",label:"Mensagem caso opção escolhida seja invalida"},model:{value:e.integracao.typebotUnknownMessage,callback:function(a){e.$set(e.integracao,"typebotUnknownMessage",a)},expression:"integracao.typebotUnknownMessage"}}):e._e(),"typebot"===e.integracao.type?a("q-input",{staticClass:"row col",attrs:{rounded:"",outlined:"",label:"Mensagem ao reniciar fluxo"},model:{value:e.integracao.typebotRestartMessage,callback:function(a){e.$set(e.integracao,"typebotRestartMessage",a)},expression:"integracao.typebotRestartMessage"}}):e._e(),"openai"===e.integracao.type|"groq"===e.integracao.type?a("q-input",{staticClass:"row col",attrs:{rounded:"",outlined:"",label:"API Key"},model:{value:e.integracao.apiKey,callback:function(a){e.$set(e.integracao,"apiKey",a)},expression:"integracao.apiKey"}}):e._e(),"openai"===e.integracao.type|"groq"===e.integracao.type?a("q-input",{staticClass:"row col",attrs:{rounded:"",outlined:"",type:"number",label:"Máximo de tokens na resposta"},model:{value:e.integracao.maxTokens,callback:function(a){e.$set(e.integracao,"maxTokens",a)},expression:"integracao.maxTokens"}}):e._e(),"openai"===e.integracao.type|"groq"===e.integracao.type?a("q-input",{staticClass:"row col",attrs:{rounded:"",outlined:"",type:"number",label:"Máximo de mensagens no histórico"},model:{value:e.integracao.maxMessages,callback:function(a){e.$set(e.integracao,"maxMessages",a)},expression:"integracao.maxMessages"}}):e._e(),"openai"===e.integracao.type|"groq"===e.integracao.type?a("q-input",{staticClass:"row col",attrs:{rounded:"",outlined:"",type:"number",label:"Temperatura"},model:{value:e.integracao.temperature,callback:function(a){e.$set(e.integracao,"temperature",a)},expression:"integracao.temperature"}}):e._e()],1),a("div",{staticClass:"col-12 q-my-sm"},["openai"===e.integracao.type|"groq"===e.integracao.type?a("q-select",{attrs:{rounded:"",outlined:"",options:e.AudiosIA,label:"Formato da resposta da IA","emit-value":"","map-options":"",filled:""},model:{value:e.integracao.voice,callback:function(a){e.$set(e.integracao,"voice",a)},expression:"integracao.voice"}}):e._e()],1),a("div",{staticClass:"col-12 q-my-sm"},["openai"===e.integracao.type|"groq"===e.integracao.type?a("q-input",{staticClass:"row col",attrs:{rounded:"",outlined:"",label:"API Key Speech service"},model:{value:e.integracao.voiceKey,callback:function(a){e.$set(e.integracao,"voiceKey",a)},expression:"integracao.voiceKey"}}):e._e()],1),a("div",{staticClass:"col-12 q-my-sm"},["openai"===e.integracao.type|"groq"===e.integracao.type?a("q-input",{staticClass:"row col",attrs:{rounded:"",outlined:"",label:"Localização/região Speech service"},model:{value:e.integracao.voiceRegion,callback:function(a){e.$set(e.integracao,"voiceRegion",a)},expression:"integracao.voiceRegion"}}):e._e()],1)]),a("q-card-actions",{staticClass:"q-mt-md",attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-mr-md btn-rounded-50",attrs:{label:"Cancelar",color:"negative"}}),a("q-btn",{staticClass:"generate-button btn-rounded-50",attrs:{label:"Salvar",icon:"eva-save-outline"},on:{click:e.handleIntegracao}})],1)],1)],1)},s=[],c=t("ee0e"),u=t("b5ae"),d={name:"ModalIntegracao",props:{modalIntegracao:{type:Boolean,default:!1},integracaoEdicao:{type:Object,default:()=>({id:null})}},data(){return{listaFila:[],integracaoTypes:[{label:"N8N/WebHook",value:"n8n"},{label:"Typebot",value:"typebot"},{label:"OpenAi",value:"openai"},{label:"GroqCloud",value:"groq"}],modelsOpenai:[{label:"gpt-4o",value:"gpt-4o"},{label:"gpt-4o-mini",value:"gpt-4o-mini"},{label:"gpt-4-turbo",value:"gpt-4-turbo"},{label:"gpt-3.5-turbo",value:"gpt-3.5-turbo"},{label:"gpt-3.5-turbo-instruct",value:"gpt-3.5-turbo-instruct"}],modelsGroq:[{label:"Meta Llama 3 8B",value:"llama3-8b-8192"},{label:"Gemma 7B",value:"gemma-7b-it"},{label:"Gemma 2 9B",value:"gemma2-9b-it"},{label:"Llama 3.1 70B (Preview)",value:"llama-3.1-70b-versatile"},{label:"Llama 3.1 8B (Preview)",value:"llama-3.1-8b-instant"},{label:"Meta Llama 3 70B",value:"llama3-70b-8192"},{label:"Mixtral 8x7B",value:"mixtral-8x7b-32768"}],AudiosIA:[{label:"Texto",value:"texto"},{label:"Francisca",value:"pt-BR-FranciscaNeural"},{label:"Antônio",value:"pt-BR-AntonioNeural"},{label:"Brenda",value:"pt-BR-BrendaNeural"},{label:"Donato",value:"pt-BR-DonatoNeural"},{label:"Elza",value:"pt-BR-ElzaNeural"},{label:"Fábio",value:"pt-BR-FabioNeural"},{label:"Giovanna",value:"pt-BR-GiovannaNeural"},{label:"Humberto",value:"pt-BR-HumbertoNeural"},{label:"Julio",value:"pt-BR-JulioNeural"},{label:"Leila",value:"pt-BR-LeilaNeural"},{label:"Letícia",value:"pt-BR-LeticiaNeural"},{label:"Manuela",value:"pt-BR-ManuelaNeural"},{label:"Nicolau",value:"pt-BR-NicolauNeural"},{label:"Valério",value:"pt-BR-ValerioNeural"},{label:"Yara",value:"pt-BR-YaraNeural"}],integracao:{id:null,type:null,name:null,projectName:null,jsonContent:null,urlN8N:null,language:null,typebotSlug:null,typebotExpires:null,typebotKeywordFinish:null,typebotUnknownMessage:null,typebotDelayMessage:null,typebotKeywordRestart:null,typebotRestartMessage:null,n8nApiKey:null,aiModel:null,apiKey:null,maxTokens:null,temperature:null,maxMessages:null,voice:null,voiceKey:null,voiceRegion:null,queueId:null}}},validations:{integracao:{name:{required:u["required"]},type:{required:u["required"]}}},methods:{async buscaFilas(){const{data:e}=await Object(c["d"])();this.listaFila=e.filter((e=>e.isActive))},resetarIntegracao(){this.integracao={id:null,type:null,name:null,projectName:null,jsonContent:null,urlN8N:null,language:null,typebotSlug:null,typebotExpires:null,typebotKeywordFinish:null,typebotUnknownMessage:null,typebotDelayMessage:null,typebotKeywordRestart:null,typebotRestartMessage:null,n8nApiKey:null,aiModel:null,apiKey:null,maxTokens:null,temperature:null,maxMessages:null,voice:null,voiceKey:null,voiceRegion:null,queueId:null}},fecharModal(){this.resetarIntegracao(),this.$emit("update:integracaoEdicao",{id:null}),this.$emit("update:modalIntegracao",!1)},abrirModal(){this.integracaoEdicao.id?this.integracao={...this.integracaoEdicao}:this.resetarIntegracao()},async handleIntegracao(){if(this.$v.integracao.$invalid)return this.$v.$touch(),void this.$q.notify("Informe todos os dados corretamente.");try{if(this.loading=!0,this.integracao.id){const{data:e}=await Object(i["a"])(this.integracao);this.$emit("modal-integracao:editada",e),this.$q.notify({type:"info",progress:!0,position:"top",textColor:"black",message:"Integração editada!",actions:[{icon:"close",round:!0,color:"white"}]})}else{const{data:e}=await Object(i["b"])(this.integracao);this.$emit("modal-integracao:criada",e),this.$q.notify({type:"positive",progress:!0,position:"top",message:"Integração criada!",actions:[{icon:"close",round:!0,color:"white"}]})}this.loading=!1,this.fecharModal()}catch(e){console.error("Erro capturado: ",e),e.data&&"name must be at least 2 characters"===e.data.error?this.$q.notify({type:"negative",progress:!0,position:"top",message:"Ocorreu um erro ao criar Integração, nome muito curto",actions:[{icon:"close",round:!0,color:"white"}]}):e.data&&"This integration name is already used."===e.data.error?this.$q.notify({type:"negative",progress:!0,position:"top",message:"Já existe uma integração com esse nome",actions:[{icon:"close",round:!0,color:"white"}]}):this.$notificarErro("Ocorreu um erro ao criar o integração",e)}}},mounted(){this.buscaFilas()}},p=d,g=t("2877"),m=t("24e8"),b=t("f09f"),y=t("4b7e"),v=t("9c40"),h=t("a370"),f=t("ddd8"),q=t("27f9"),w=t("05c0"),x=t("7f67"),C=t("eebe"),k=t.n(C),I=Object(g["a"])(p,r,s,!1,null,"caa932f4",null),$=I.exports;k()(I,"components",{QDialog:m["a"],QCard:b["a"],QCardActions:y["a"],QBtn:v["a"],QCardSection:h["a"],QSelect:f["a"],QInput:q["a"],QTooltip:w["a"]}),k()(I,"directives",{ClosePopup:x["a"]});var M={name:"Integrações",components:{ModalIntegracao:$},data(){return{userProfile:"user",integracaoEdicao:{},modalIntegracao:!1,integracoes:[],loading:!1,whatsappNumber:null,columns:[{name:"id",label:"#",field:"id",align:"left"},{name:"name",label:"Nome",field:"name",align:"left"},{name:"type",label:"Tipo",field:"type",align:"left"},{name:"acoes",label:"Ações",field:"acoes",align:"center"}]}},methods:{async fetchConfigurations(){try{const e=await Object(l["b"])(),a=e.data;this.whatsappNumber=a.whatsappnumber||null}catch(e){console.error("Erro ao buscar configurações:",e)}},abrirWhatsApp(){if(this.whatsappNumber){const e=`https://wa.me/${this.whatsappNumber}?text=Ol%C3%A1%21+tenho+duvidas+integrações`;window.open(e,"_blank")}},async listarIntegracoes(){const{data:e}=await Object(i["d"])();this.integracoes=e},integracaoCriada(e){const a=[...this.integracoes];a.push(e),this.integracoes=[...a]},integracaoEditada(e){const a=[...this.integracoes],t=a.findIndex((a=>a.id===e.id));t>-1&&(a[t]=e),this.integracoes=[...a]},editarIntegracao(e){this.integracaoEdicao={...e},this.modalIntegracao=!0},deletarIntegracao(e){this.$q.dialog({title:"Atenção!!",message:`Deseja realmente deletar a Integração "${e.name}"?`,cancel:{label:"Não",color:"primary",push:!0},ok:{label:"Sim",color:"negative",push:!0},persistent:!0}).onOk((()=>{this.loading=!0,Object(i["c"])(e).then((a=>{let t=[...this.integracoes];t=t.filter((a=>a.id!==e.id)),this.integracoes=[...t],this.$q.notify({type:"positive",progress:!0,position:"top",message:`Integração ${e.name} deletada!`,actions:[{icon:"close",round:!0,color:"white"}]})})),this.loading=!1}))}},mounted(){this.fetchConfigurations(),this.listarIntegracoes(),this.userProfile=localStorage.getItem("profile")}},N=M,_=t("eaac"),R=t("0016"),A=t("db86"),B=Object(g["a"])(N,o,n,!1,null,"36c14083",null);a["default"]=B.exports;k()(B,"components",{QTable:_["a"],QIcon:R["a"],QBtn:v["a"],QTd:A["a"]})}}]);